\chapter{Modelica Revision History}\label{modelica-revision-history}

This appendix describes the history of the Modelica Language Design, and its contributors.
This appendix is just present for historic reasons and is not normative.
The current version of this document is available from \url{https://modelica.org/documents}.

\section{Modelica 3.6}\label{modelica-3-6}

Modelica~3.6 will later be voted to be approved.
The Modelica~3.6 specification was edited by Hans Olsson.

\subsection{Main Changes in Modelica 3.6}\label{main-changes-in-modelica-3-6}

The following Modelica Change Proposals are backward compatible extensions added in 3.6:
\begin{itemize}
\item Undefined modification (MCP-0009), \cref{removing-modifiers-break}.
Ticket \specpull{3167}, and including changes in \specpull{2936} - and clarified in \specpull{3315}.
\item Selective Model Extension (MCP-0032), \cref{selective-model-extension}.
Ticket \specpull{3166}, and including changes in \specpull{2375}, \specpull{2422}, \specpull{2506}, \specpull{2507}, \specpull{2948}, and \specpull{3006}.
\item Multilingual support of Modelica (MCP-0035), \cref{multilingual-descriptions}.
Ticket \specpull{2956}, and including changes in \specpull{3126}, \specpull{3131}, and \specpull{3177}.
\end{itemize}

Additionally the \url{specification.modelica.org} landing page was updated with search functionality, \specpull{2911} correcting \specissue{2404}.

Other issues resolved were:
\begin{itemize}
\item Deprecate String formatting of Real as Integer \specpull{3328}.
\item Improve definition of exponentation \specpull{3285}.
\item Clarified predefined type names, \specpull{3325} closing \specissue{2813}.
\item Only restrict public connectors in blocks, \specpull{3318} closing \specissue{3309}.
\item Improve iterator examples \specpull{3317}.
\item Remove \lstinline!extends FilledShape! from Text-definitions, \specpull{3316} closes \specissue{2157}.
\item Clarified each \specpull{3314} closing \specissue{3052}.
\item Clarified lookup for choices \specpull{3307}.
\item Constrain array assignment with implicit iterators \specpull{3306} closing \specissue{3250}.
\item Refence connector balancing restriction \specpull{3305} closing \specissue{3260}.
\item Correction: connect-clause was renamed to be connect-equation \specpull{3304}.
\item Corrected example by adding type specifier \specpull{3303}.
\item Don't say that String supports String, because it doesn't \specpull{3288} closing \specissue{3264}.
\item Clarified that clock is only determined from equations \specpull{3283} closing \specissue{3265}.
\item Clarify encapsulated short class definition \specpull{3282} closing \specissue{3270}.
\item Correct broken link for a paper \specpull{3281}.
\item Clarify the difference between when-equations and clocked when \specpull{3279} closing \specissue{3001}.
\item Clean-up of terminology related to connection equations \specpull{3277} closing \specissue{3273}.
\item Clarify String named argument combinations  \specpull{3262}.
\item Specify that extent and preserveAspectRatio use the same logic \specpull{3253} closing \specissue{3219}.
\item Don't give impression of undefined behavior being error \specpull{3248}.
\item Clarify that a when-clause cannot activate multiple reinit for the same variable \specpull{3246}.
\item More advanced elaboration for expandable connectors \specpull{3241} closing \specissue{3147}.
\item Adjust non-normative description of smoothOrder \specpull{3237} closing \specissue{3200}.
\item Clarify role of protected components passed to external functions \specpull{3236} closing \specissue{3188}.
\item Add example for shiftSample \specpull{3233} closing \specissue{3040}.
\item Add clocked discrete-time expressions to discrete-time, \specpull{3231} closing \specissue{3116}.
\item Clarify record type compatible \specpull{3230} closing \specissue{3145}.
\item Extend choicesAllMatching to records, \specpull{3229} closing \specissue{3210}.
\item Remove zero start value and explain alternative, \specpull{3226}.
\item Fix hard-coded cross references related to function application \specpull{3221}.
\item Clarify elsewhen \specpull{3217} and \specpull{3228} closing \specissue{3216}.
\item Correct invalid reference, \specpull{3218}.
\item Also mention outputs when presenting list of inputs and outputs, \specpull{3215}.
\item Clarify previous parameter expression \specpull{3214} closing \specissue{3074}.
\item Annotation to limit number of connections \specpull{3212} and \specpull{3129} closing \specissue{3117}.
\item Forbid combination of parameter and input, \specpull{3211} closing \specissue{3141}.
\item Add directorySelector \specpull{3207}.
\item Explain abs no event  clarification \specpull{3202}.
\item Clarify that URIs shall also be converted \specpull{3201} closing \specissue{3199}.
\item Clarify non-normative text for expandable connectors \specpull{3197} and \specpull{3195} closing \specissue{3194}.
\item Remove arrayLayout since most tools have not implemented it, \specpull{3196} closing \specissue{3189}.
\item Mandatory ignoring of trailing "1" in defaultComponentName, \specpull{3186} closing \specissue{3151}.
\item Give a procedure for getting another name for components \specpull{3182} closing \specissue{3151}.
\item Clarified that you cannot have equations or algorithm in types \specpull{3180} closing \specissue{3157}.
\item Clarified "operator" \specpull{3179} closing \specissue{3171}.
\item Clarify odd cases of IconMap and DiagramMap 'extent' \specpull{3160} closing \specissue{3150}.
\item Illustrate potential implicit nature of discrete-time Real variable equations \specpull{3159}.
\item Avoid need to define a term (simulator) \specpull{3152}.
\item Define initialization, and simulation \specpull{3146}.
\item Provide better alternative in Clock Example \specpull{3144} closing \specissue{3143}.
\item Make it more clear that noEvent can make a difference inside functions \specpull{3142} closing \specissue{3136}.
\item Variability rule for multiple return assignment (clarification) \specpull{3135}.
\item Clarify DAE representation of discrete equations \specpull{3134} closing \specissue{3127}.
\item Clarify nested records, \specpull{3130} closing \specissue{3128}.
\item Do not require that all conditional connectors must be connected \specpull{3129} closing \specissue{3117}.
\item A class is not a specialized class \specpull{3121}.
\item Improve description of operator precedence \specpull{3119} closing \specissue{3110}.
\item Clarify problem with non-clocked sample in clocked systems \specpull{3099}.
\item Generalize calling functions through instances \specpull{3097} closing \specissue{3089}.
\item Allow specifying both choices and choicesAllMatching (clarification) \specpull{3096} closing \specissue{3084}.
\item Make conversion example clearer (clarification) \specpull{3095} closing \specissue{3081}.
\item Allow "flow" for operator record which was defined \specpull{3094}.
\item Simplify logic in Modelica code examples \specpull{3092} closing \specissue{3080}.
\item Clarify synchronous code for odd cases \specpull{3090}.
\item Minor corrections with empty arrays \specpull{3087}.
\item Specify that all strings can be Unicode \specpull{3079} closing \specissue{3070}.
\item Call the preferredView string the 'view' \specpull{3071}.
\item Add icon to list of views \specpull{3067} closing \specissue{2987}.
\item Clarify pure \specpull{3066} closing \specissue{2971}.
\item Make GenerateEvents imply inlining \specpull{3065} closing \specissue{2986}.
\item Clarify reinit \specpull{3063} closing \specissue{3001}.
\item Clarify degree formatting \specpull{3048} closing \specissue{3020}.
\item Allow derivatives to be referenced in figures \specpull{3046} closing \specissue{3044}.
\item Make use of component variability when defining expression variability \specpull{3039}.
\item Say we do 'cyber-physical systems', aligning with modelica.org \specpull{3037}.
\item Clarify array range operator \specpull{3031} closing \specissue{3028}.
\item Remove non-compensation sentence \specpull{3022}.
\item Improve start-value priority by considering parameters \specpull{3019} closing \specissue{3008}.
\item Clarify operator \specpull{3018} closing \specissue{3015}.
\item Improved example for external function call \specpull{3010}.
\item Turned equations into assignments in when-algorithm \specpull{2998}.
\item Clearly define discrete time variable \specpull{2989}.
\item Do not incorrectly use import name \specpull{2980} closing \specissue{2974}.
\item Improve text for initialization \specpull{2961} closing \specissue{2947}.
\item Clean up formulations and formatting related to 'is not provided' in 'Synchronous Language Elements' \specpull{2946}.
\item Clarify that URI is absolute URI, might be changed later \specpull{2930} closing \specissue{2701}.
\item Don't repeatedly explain that non-discrete time is continuous-time \specpull{2923} closing \specissue{2891}.
\item Remove outdated reference of MSL for GenerateEvents annotation \specpull{2914}.
\item Rephrase implied discrete-valued equation rule as non-normative observation \specpull{2907}.
\item Improve description of string allocation functions \specpull{2903} closing \specissue{2858}.
\item Don't present value of predefined type as having a name \specpull{2902} closing \specissue{2869}.
\item Explain potential ambiguity of providing inverse functions \specpull{2901} closing \specissue{2866}.
\item Constrain dimension of equalityConstraint \specpull{2898} closing \specissue{2886}.
Updated to restore non-strict inequality for dimension of equalityConstraint \specpull{2909}.
\item Fix description of "proposes to not inline" \specpull{2894}.
\item Better variant of difference equation vs. algorithm \specpull{2890} closing \specissue{2814}.
\item Clarify that Figure.caption and identifiers have an empty default \specpull{2889} closing \specissue{2851}.
\item Clarified defaults for Dialog-annotation \specpull{2888} closing \specissue{2854}.
\item Clarify discrete and remove odd statement about Pantelides \specpull{2887}.
\item Clarified derivative example text \specpull{2881}.
\item Clarify that continuous-time algorithm as well \specpull{2875} closing \specissue{2817}.
\item Improved source directory example \specpull{2874} closing \specissue{2847}.
\item Allow optional semicolon for conversions \specpull{2870} closing \specissue{2801}.
\item Increase copyright year \specpull{2865}.
\item Clarify noDerivative and zeroDerivative, \specpull{2864} closing \specissue{2840}.
\item Add restriction on inverse and derivative \specpull{2863} closing \specissue{2837}.
\item State that external objects must not depend on themselves, \specpull{2862} closing \specissue{2845}.
\item Clean up example "Variables with array dimensions" \specpull{2857} closing \specissue{2855}.
\item Don't call the Dialog a "menu" \specpull{2849}.
\item Stop saying that 'promote' isn't a Modelica function \specpull{2844} closing \specissue{2843}.
\item Use macro and proper reference \specpull{2834}.
\item Clean up description of the Dialog annotation \specpull{2819} closing \specissue{2476}.
\item Remove incorrect string quoting of '+' for string concatenation \specpull{2810}.
\item Remove comment with definition of 'partial flattening' from old glossary \specpull{2807} closing \specissue{2787}.
\item Switch from 3.5 to 3.6-dev; \specpull{2791} and \specpull{2794}.
\item Better integration of terms 'instantaneous equation/statement' \specpull{2788}.
\item Say 'variable value' instead of 'value-attribute' \specpull{2786}.
\item Treat 'connect' like the keyword it is in listings \specpull{2785}.
\item Improvements in the style of presentations including correcting typos:
\begin{itemize}
\item Update bibliography item \specpull{3338} closing \specissue{3337}.
\item Fix minor typo, \specpull{3333}.
\item Fix indentation error in listing, \specpull{3331}.
\item Consistent punctuation for "e.g." and "i.e." \specpull{3329} closing \specissue{3235}.
\item Simplified presentation of Transformation-annotation, \specpull{3326} closing \specissue{3275}.
\item Explained quote around code fragments, \specpull{3324} closing \specissue{3191}.
\item Clean up absoluteValue formatting \specpull{3301}.
\item Split the restrictions for when-equations into two lists, \specpull{3292}.
\item Add missing "if" in "if and only they" \specpull{3289}.
\item Fix formatting of 'if-clause' \specpull{3276}.
\item Fix grammar 'is' -> 'are' \specpull{3272} closing \specissue{3271}.
\item Add 'cat' to document index  \specpull{3268}.
\item Fix missing formatting of "T" \specpull{3267}.
\item Work-around for table issue in LaTeXML \specpull{3208} and \specpull{3205} closing \specissue{3156}.
\item Add 'time' to document index \specpull{3203}.
\item Remove spurious semi-colons \specpull{3193} closing \specissue{3192}.
\item Clarified description of BaseProperties in example \specpull{3190}.
\item Avoid bad leading white-space inside strings in StateSelect definition \specpull{3185}.
\item Fix false indention in code listings \specpull{3181} and \specpull{3183}.
\item Fix typo 'GraphicsItem' -> 'GraphicItem' \specpull{3176}.
\item Correctly use may be \specpull{3174} closing \specissue{3165}.
\item Minor cleanup for for-equation listings \specpull{3170}.
\item Library annotation supports arrays, not tuples \specpull{3132}.
\item Remove trailing blank \specpull{3124}.
\item Add trailing semicolon \specpull{3120}.
\item Clean up quadrature listings \specpull{3114}.
\item Changed y into x in spatialDistribution() definitions  clarification \specpull{3113}.
\item Add missing closing '!' in preferredView specification \specpull{3112}.
\item Fix indentation of listings related to versionDate and friends \specpull{3105}.
\item Version annotation indent \specpull{3104}.
\item Fix indentation of Ellipse pseudo-code record definition \specpull{3085}.
\item Fix oversize listing lines \specpull{3082}.
\item Make first part of section name matter \specpull{3073} and shorten in \specpull{3100}.
\item Better definition of comments \specpull{3064} closing \specissue{2992}.
\item Fix minor issues in chapter 'Connectors and Connections' \specpull{3061}.
\item Remove incorrect escaping of '\&' in bibliography 'url' entry \specpull{3059} closing \specissue{3056}.
\item More stable links for openprod \specpull{3058} closing \specissue{3055}.
\item Remove leading www from web-links \specpull{3057} closing \specissue{3054}.
\item Remove excessive indexing of 'inverse' annotation \specpull{3050} closing \specissue{3047}.
\item Improve descriptions of notation \specpull{3045} closing \specissue{3044}.
\item Tighten connection between \firstuse and document index \specpull{3043} correcting  \specissue{3041}.
\item Fix typos in Section 5.4 \specpull{3032} and \specpull{3036}.
\item Ensure that Modelica code in HTML is teletype! \specpull{3034}.
\item Sentence-based line breaking in operatorsandexpressions.tex \specpull{3030}.
\item Remove unused parameter 'p' in example for 'smooth' \specpull{3029}.
\item Fix problems with 'parenthesis' in the singular \specpull{3027} closing \specissue{3026}.
\item Fix typo for homotopy \specpull{3016}.
\item Clean up chapter 'Unit Expressions' \specpull{3013}.
\item Cleanup file hierarchy listings \specpull{3011}.
\item Fix year in date reference \specpull{3002}.
\item Fix formatting of 'when', 'elsewhen', and 'when initial()' \specpull{3000}.
\item Consistently quote in grammar (and remove one spurious ;) \specpull{2990} closing \specissue{2988}.
\item Small cleanup of scoping chapter \specpull{2982}.
\item Fix typo: 'subsample' -> 'subSample' \specpull{2979}.
\item Start bullet item with upper case letter \specpull{2976}.
\item Cross reference multiple extends rule, and related cleanup \specpull{2978}.
\item Mostly trivial clean up related to equations and statements \specpull{2975}.
\item Fix typo in specification of 'delay' \specpull{2973}.
\item Align keywords for 'grammar' with keywords for 'modelica' \specpull{2972}.
\item Remove copy-paste from unknown source \specpull{2970} closing \specissue{2968}.
\item Correct double for (introduced in \specpull{2916}) \specpull{2969} closing \specissue{2966}.
\item Fix moist air2 and apply the style guide to the next paragraph \specpull{2964} closing \specissue{2963}.
\item Move and add reference to rule about constants having declaration equation \specpull{2960} closing \specissue{2945}.
\item Add style guide section on inline code at beginning of sentence \specpull{2959} closing \specissue{2943}.
\item Gather annotations for functions \specpull{2922} closing \specissue{2895}.
\item Apply style guide \specpull{2916} closing \specissue{2713}.
\item Add blank after extends \specpull{2913}.
\item Cleanup of "Matching Function" \specpull{2910}.
\item Fix line breaks in connector examples \specpull{2906} and \specpull{2905}.
\item Fix bad backslash in C-code \specpull{2897}.
\item Add specification document style guide \specpull{2884} closing \specissue{2713}.
\item Styling cleanup for 'derivative' annotation \specpull{2883}.
\item Fix white-space errors in recently introduced example on derivative \specpull{2880}.
\item Break down first items describing ExternalObject \specpull{2879}.
\item Be more consistent with Modelica.StateGraph \specpull{2876} closing \specissue{2839}.
\item Revert "Use angle brackets for '<describing text>' in listings \specpull{2868} closing \specissue{2867}.
\item Add missing plural 's' \specpull{2860}.
\item Minor formatting cleanup related to colon (:) dimensions \specpull{2856}.
\item More systematic use of \lstinline for figure annotations Axis and Curve \specpull{2850}.
\item Cleanup formatting related to lexical conventions \specpull{2846}.
\item Minor cleanup of inline code and math for Derivative annotation \specpull{2836}.
\item Align duplicated parts of lexing rules \specpull{2831}.
\item Protect space after \LaTeX{} \specpull{2829}.
\item Typo corrections from revision 3.5 \specpull{2828}.
\item Clean up ellipsis and angle brackets in listings \specpull{2812}.
\item Avoid overlong lines \specpull{2809} closes \specissue{2796}.
\item Add 'MODELICAPATH' to the index \specpull{2808}.
\item Fix typo in 'bibliograph\emph{y}' \specpull{2803}.
\item Use colon instead of dash when attaching 'th' to ordinals \specpull{2793}.
\item Use comments instead of text escape in array indexing listing \specpull{2789}.
\item Fix issues with C listings \specpull{2784} (already added in 3.5).
\item Don't treat 'nondiscrete' as keyword in listings \specpull{2783}.
\end{itemize}
\item Improvements in build system and \LaTeX{} (including workarounds):
\begin{itemize}
\item Only load cmap.sty when building PDF \specpull{3323}.
\item Add globs to cleaning targets \specpull{3319}.
\item Comments regarding recently fixed LaTeXML issues \specpull{3308}.
\item Do not remove curl from the docker image \specpull{3299}.
\item Support search and copying of ligatures \specpull{3296}, \specpull{3294} closing \specissue{3286}.
\item Update to texlive 2022 \specpull{3148}.
\item Use the listings.sty option upquote=true  LaTeXIssue with the LaTeX code \specpull{3123} closing \specissue{3122}.
\item Address fancyhdr warning about too small 'headheight' \specpull{3086}.
\item Update status regarding LaTeXML issue 1719 \specpull{3083}.
\item Name the HTML entry page 'index.html' \specpull{3077} closing \specissue{3076}.
\item Increase sizes a bit, and use "smallifpdf" for comments \specpull{3072}.
\item Tweak CSS for :target:before \specpull{3069} closing \specissue{2967}.
\item Work around LaTeXML problem with line breaks around 'tabbing' environment \specpull{3042} closing \specissue{3009}.
\item Add space for LaTeXML to fix formatting of -2 \specpull{3025} and \specpull{3033} closing \specissue{3024}.
\item (Continuous integration) Set a username before git commit \specpull{3021}.
\item Avoid just a '0' in lstinline when generating HTML \specpull{2993} closing \specissue{2991}.
\item Update comments about LaTeXML issues that are now fixed on 'master' \specpull{2983}.
\item (Continuous integration) Workaround for the markdown image not having ssh-agent \specpull{2939}.
\item Make the menu hover work on iOS Safari \specpull{2934}.
\item Do not use block links in the page header \specpull{2933}.
\item Add a meta viewport tag to counter small text \specpull{2932}.
\item Push builds to github-pages instead of SSH upload \specpull{2925}.
\item Add newtxtt.sty to LaTeXML continuous integration builds \specpull{2908}.
\item Add comments with TODOs after LaTeXML issue is fixed \specpull{2882}.
\item Added logo in ReadMe.md \specpull{2877}, \specpull{2873}, and \specpull{2833}.
\item Avoid current HTML jump target being hidden behind page header \specpull{2841}.
\item Remove HTML footer links to bibliography and index \specpull{2832}.
\item Remove Travis CI badge from README.md \specpull{2821}.
\item Add keywords to generated PDF, \specpull{2802}.
\item Update comment regarding LaTeXML issue 1400 (now fixed) \specpull{2800}.
\item Improve navbar on top page \specpull{2799}.
\item Pass option 'pdfusetitle' to hyperref.sty \specpull{2797} closing \specissue{2795}.
\end{itemize}
\end{itemize}

\section{Modelica 3.5}\label{modelica-3-5}

Modelica 3.5 was last edited December 31, 2020, and will later be voted to be approved.
The Modelica 3.5 specification was edited by Hans Olsson.

\subsection{Main Changes in Modelica 3.5}\label{main-changes-in-modelica-3-5}

The following Modelica Change Proposals are backward compatible extensions added in 3.5:
\begin{itemize}
\item Change of specification format (MCP-0018).
The development of the specification was changed to use \LaTeX{} for formatting; and \url{https://github.com/modelica/ModelicaSpecification} for issue-tracking.
\item Annotations for Predefined Plots (MCP-0033), \cref{annotations-for-figures}. Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2710}{\#2710}.
\begin{itemize}
\item Generalize links in text markup, \cref{text-markup-escape-sequences}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2692}{\#2692}.
\item Mandate that Axis.unit is for tick labels, \cref{axis-properties}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2633}{\#2633}.
\item Define meaning of empty Axis.unit, \cref{axis-properties}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2632}{\#2632}.
\item Elaborate on inheritance of figures, \cref{annotations-for-figures}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2588}{\#2588}.
\item Clarified that leading and ending newline is ignored, \cref{text-markup-in-captions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2581}{\#2581}.
\item Made figure title optional, \cref{annotations-for-figures}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2580}{\#2580}.
\item Clarified curves and units for figures, \cref{axis-properties} and \cref{plot-curves}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2579}{\#2579}.
\item Clarified uniqueness of Figure and Plot identifiers, \cref{annotations-for-figures}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2544}{\#2544}.
\item Relaxed uniqueness of Plot identifiers, \cref{annotations-for-figures}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2537}{\#2537}.
\item Updated to have HTML-caption, sub-plot title and identifier.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2363}{\#2363}.
\end{itemize}
\end{itemize}

Other issues resolved were:
\begin{itemize}
\item Overall improvements of the document, made easier by the switch to \LaTeX.
\begin{itemize}
\item A real bibliography was added, but excluding papers in this chapter; \href{https://github.com/modelica/ModelicaSpecification/pull/2740}{\#2740}.
\item Dead links in the bibliography were removed and DOI used when possible.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2502}{\#2502}.
\item Chapter introductions are now non-normative, \href{https://github.com/modelica/ModelicaSpecification/issues/2366}{\#2366}.
\item The index was updated to reference the main definition of the term, and the glossary removed to avoid duplicated effort; \href{https://github.com/modelica/ModelicaSpecification/pull/2726}{\#2726}.
\item Hyphens and dashes were cleaned up, \href{https://github.com/modelica/ModelicaSpecification/pull/2628}{\#2628}.
\item Minor English language improvements, including removing "allows to" and "may not".
Tickets \href{https://github.com/modelica/ModelicaSpecification/issues/2685}{\#2685}, \href{https://github.com/modelica/ModelicaSpecification/issues/2683}{\#2683}, and additional ones.
\item Moved non-normative text to separate paragraphs.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2536}{\#2536}.
\item Consistent use of different quote symbols.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2508}{\#2508}.
\item The minor issues related to change of formatting, continuous integration, examples, and maintenance of repository are not listed here.
\end{itemize}

\item Improved functions, \cref{functions}.
\begin{itemize}
\item Clarified impure function as function arguments, \cref{pure-modelica-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2756}{\#2756}.
\item Clarified that public variables in functions must be input or output, \cref{function-as-a-specialized-class}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2730}{\#2730}.
\item Changed inputs to C functions to be const-correct, \cref{arrays-1}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1955}{\#1955}.
\item Clarified that external object is a class, \cref{external-objects}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2705}{\#2705}.
\item Deprecate "builtin" external language, \cref{external-function-interface}.
Avoid reference to Modelica.Math \cref{built-in-mathematical-functions-and-external-built-in-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2662}{\#2662}.
\item Clarified functions with no outputs, \cref{empty-function-calls}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2692}{\#2692}.
\item Replace use of outdated grammar-construct class-name, \cref{external-resources}, \cref{functional-input-arguments-to-functions}, and \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2598}{\#2598}.
\item Updated example for function as argument to function, \cref{functional-input-arguments-to-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2563}{\#2563}.
\item Extend function inverses and clarify them, \cref{modelica:inverse}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2478}{\#2478}.
\item Clarify consequence of using impure functions in binding equations for parameters, \cref{pure-modelica-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2475}{\#2475}.
\item Removed deprecated assignments from function declaration template, \cref{function-declaration}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2439}{\#2439}.
\item Corrected regression in example specifying the second derivative of a function, \cref{using-the-derivative-annotation}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2401}{\#2401}.
\item Clarified variability restrictions of inputs in functions, \cref{parameter-expressions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2243}{\#2243}.
\item Clarified handling of lib/dll on Windows, \cref{annotations-for-external-libraries-and-include-files}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2252}{\#2252}.
\item Clarified function component, \cref{functional-input-arguments-to-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2255}{\#2255}.
\item Clarified that object-files are not library-files, \cref{annotations-for-external-libraries-and-include-files}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2257}{\#2257}.
\item Clarified ModelicaAllocateString, \cref{utility-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2279}{\#2279}.
\item Clarified memory management for external objects, \cref{external-objects}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2524}{\#2524}.
\item Introduced ModelicaDuplicateString for C-code, \cref{utility-functions-for-allocating-strings}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2417}{\#2417}.
\item Improved ModelicaAllocateString for C-code, \cref{utility-functions-for-allocating-strings}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2403}{\#2403}.
\end{itemize}

\item Clarified synchronous Modelica, \cref{synchronous-language-elements}
\begin{itemize}
\item Clarified that clock operators are not callable in functions and that functions may not contain Clock-variables and that they do not vectorize, \cref{argument-restrictions-component-expression}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2177}{\#2177} and Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2269}{\#2269}.
\item Clarified that clocks are not valid inputs for hold, \cref{base-clock-conversion-operators}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2174}{\#2174}.
\item Clarified rational clock to only have translation-time clock inference, \cref{modelica:clock-rational}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2386}{\#2386}.
\item Clarified that different clock partitions should be separate, \cref{sub-clock-partitioning}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2365}{\#2365}.
\item Rewrote rationale to be positive, \cref{rationale-for-clocked-semantics}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2512}{\#2512}.
\item Clarified terminology for discrete states, \cref{clocked-state-variables}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2651}{\#2651}.
\item Clarified that clocked signals are extrapolated using hold, not constant \cref{clocks-and-clocked-variables}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2607}{\#2607}.
\item Clarified that clock constructors can take named arguments and that clock partioning must be parametric, \cref{clock-constructors};
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2394}{\#2394}.
\item Restricted noClock to not take a Clock as input, \cref{sub-clock-conversion-operators}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2355}{\#2355}.
\item Consistently use "Event Clock".
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2356}{\#2356}.
\item Clarified that Boolean clock is considered for clock partitioning, \cref{base-clock-partitioning}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2179}{\#2179}.
\item Clarified Real Clock constructor interval argument, \cref{clock-constructors}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2180}{\#2180}.
\item Clarified inferencing of solverMethod by rewriting algorithm, \cref{inferencing-of-solvermethod}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2182}{\#2182}.
\item Clarified wording of solver method for clock constructor, \cref{clock-constructors}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2194}{\#2194}.
\item Clarify that clocked operators cannot be differentiated, \cref{sub-clock-conversion-operators}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2236}{\#2236}.
\item Clarified that hold and backSample only take component expressions, \cref{flattening-of-model}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2270}{\#2270}.
\end{itemize}

\item Clarified state-machines, \cref{state-machines}.
\begin{itemize}
\item Removed color recommendation for state machines, \cref{state-machine-graphics}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2650}{\#2650}.
\item Clarified connecting multiple outputs (for state-machines), \cref{merging-connections-to-multiple-outputs}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2735}{\#2735}.
\item Clarified inactive equations, \cref{activation-handling}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2734}{\#2734}.
\item Defined hierarchical ticksInState and timeInState, \cref{transitions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2407}{\#2407}.
\item Correct both variants of nextResetStates to clarify reset handling, \cref{reset-handling}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2209}{\#2209}.
\end{itemize}


\item Conversions, \cref{conversion-rules}, were used for Modelica Standard Library 4.0.0, and were thus clarified and slightly extended for the future.
\begin{itemize}
\item Extend convertMessage to elements of classes, \cref{convertmessageoldclass-failed-message2}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2516}{\#2516}.
\item Clarify convertClassIf for enumerations and strings and restrict allowed types, \cref{conversion-rules}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2451}{\#2451}.
\item Further clarify conversion rules, \cref{conversion-rules}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2522}{\#2522}.
\item Avoid ambiguity by giving precedence to convertModifiers, \cref{conversion-rules}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2409}{\#2409}.
\item Clarified inheritance for conversions, \cref{conversion-rules}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2178}{\#2178}.
\end{itemize}

\item Added and clarified other specific annotations, \cref{annotations}.
\begin{itemize}
\item Annotation SourceDirectory which is a starting point for exporting sources, \cref{annotations-for-external-libraries-and-include-files}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2145}{\#2145}.
\item Clarified Evaluate annotation for hierarchical components, \cref{annotations-for-symbolic-processing}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2288}{\#2288}.
\item Added test-case annotation for incorrect models, \cref{modelica:TestCase}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2340}{\#2340}.
\item Clarified choicesAllMatching, \cref{annotation-choices-for-suggested-redeclarations-and-modifications}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2693}{\#2693}.
\item Clarified HTML encoded contents, \cref{annotations-for-documentation}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2593}{\#2593}.
\item Allow restricted form of Dialog annotation for classes, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2617}{\#2617}.
\item Clarified connectorSizing, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2599}{\#2599}.
\item Improved description for Documentation annotation (included with MCP-0033), \cref{annotations-for-documentation}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2594}{\#2594}.
\item Clarified order in parameter dialog, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2310}{\#2310}.
\item Clarify URI fragments, \cref{annotations-for-documentation}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2445}{\#2445}.
\item Specify that Dialog group does not have a default, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2476}{\#2476}.
\item Clarify aspect ratio for lines with arrows, \cref{line}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2528}{\#2528}.
\item Clarify that protection of classes prevent "copying", \cref{protection-of-classes}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2260}{\#2260}.
\item Extended bitmaps to allow svg-format, \cref{bitmap}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/174}{\#174}.
\item Clarified macros for text, \cref{text}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2416}{\#2416}.
\item State that changing default name for inner/outer component is not good, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2398}{\#2398}.
\item Clarified that preserveAspectRatio is a hint, \cref{coordinate-systems}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2268}{\#2268}.
\item Clarified that include-files provide prototypes, \cref{external-function-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2278}{\#2278}.
\item Clarified visibility of encrypted contents, \cref{protection-of-classes}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2318}{\#2318}.
\item Clarified that \lstinline!missingInnerMessage! is a literal string, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2334}{\#2334}.
\item Clarified text-macros including \lstinline!%class!, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2335}{\#2335}.
\item Clarified that obsolete is not inherited, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2338}{\#2338}.
\item Added unit for \lstinline!%par!, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2339}{\#2339}.
\item Clarified text-annotations on connections, \cref{connections1}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2170}{\#2170}.
\item Add iconVisible to be able to show/hide connectors in icon layer for public connectors, \cref{component-instance}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2200}{\#2200}.
\item Correct grammar for experiment and give default for \lstinline!StartTime!, \cref{modelica:experiment}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2224}{\#2224}.
\item Clarified that versionBuild and dateModified can be used for uses annotation, \cref{version-handling}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2239}{\#2239}.
\item Clarified that image backgrounds are assumed to be white/transparent with light color, \cref{annotations-for-the-graphical-user-interface}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2244}{\#2244}.
\item Clarified that IconMap is also allowed on short class definitions, \cref{extends-clause}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2281}{\#2281}.
\item Clarify that some protection annotations have no effect (not merely no "meaningful effect"), \cref{protection-of-classes}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2193}{\#2193}.
\end{itemize}

\item Minor updates of syntax, \cref{modelica-concrete-syntax}.
\begin{itemize}
\item Update grammar to use description instead of non-existent comment, \cref{grammar}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2620}{\#2620}.
\item Allow empty quoted identifier, \cref{identifiers}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2612}{\#2612}.
\item Allow .13 as floating point number, \cref{floating-point-numbers}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2122}{\#2122}.
\item Factor out function-partial application, \cref{expressions1}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2250}{\#2250}.
\item Reverted regression for function arguments, \cref{expressions1}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2176}{\#2176}.
\item Renamed string-comment to description-string, \cref{comments}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2467}{\#2467}.
\item Clarified quoted identifiers, \cref{identifiers}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2408}{\#2408}.
\item Correct grammar to allow ".*" as one token for import, \cref{class-definition}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2430}{\#2430}.
\item Removed redundant parentheses in syntax rules, \cref{grammar}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2434}{\#2434}.
\item Removed old underscores in syntax rule, \cref{expressions1}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2431}{\#2431}.
\item Corrected use of annotation-comment, \cref{extends}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2428}{\#2428}.
\end{itemize}

\item Improved DAE-chapter to be a complete description, \cref{modelica-dae-representation}.
\begin{itemize}
\item Added clocked variables.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2286}{\#2286}.
\item Stated solvability requirements for discrete-valued variables.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2639}{\#2639}.
\end{itemize}

\item Improved stream connector formulation, \cref{derivation-of-stream-equations}
\begin{itemize}
\item Updated notation to use mass-flows as derivatives, \cref{derivation-of-stream-equations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2644}{\#2644}.
\item Further clarify inStream simplifications, \cref{connection-of-3-stream-connectors-where-one-mass-flow-rate-is-identical-to-zero-n-3-and}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2242}{\#2242}.
\item Clarified inStream to make it clear that positive mass-flow is assumed, \cref{rationale-for-the-formulation-of-the-instream-operator}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2253}{\#2253}.
\end{itemize}


\item Stated that disable conditional components are ignored for inner/outer, \cref{instance-hierarchy-name-lookup-of-inner-declarations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2499}{\#2499}.
\item Clarify some use of heterogenous record arrays, \cref{arrays}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2282}{\#2282}.
\item Allow end for non-integer indexed arrays, \cref{indexing-with-end}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2204}{\#2204}.
\item Improved encapsulated short class to be consistent with encapsulation, \cref{short-class-definitions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2743}{\#2743}.
\item Clarified that array declarations cannot be scalar, \cref{array-declarations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2753}{\#2753}.
\item Clarified acyclic rule for non-fixed parameters, \cref{acyclic-bindings-of-constants-and-parameters}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2742}{\#2742}.
\item Clarified final for classes, \cref{final-element-modification-prevention}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2676}{\#2676}.
\item Made when-descriptions more similar, \cref{restrictions-on-where-a-when-equation-may-occur} and \cref{restrictions-on-equations-within-when-equations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2635}{\#2635}.
\item Make assertion level a structural parameter, \cref{assert}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2642}{\#2642}.
\item Deprecate byte order mark, \cref{mapping-a-package-class-hierarchy-into-a-directory-hierarchy-structured-entity}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2675}{\#2675}.
\item State that matrix/vector algebra functions return Real, \cref{matrix-and-vector-algebra-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2673}{\#2673}.
\item Clarified each, \cref{modifiers-for-array-elements}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2630}{\#2630}.
\item Clarified elsewhen initial, \cref{initialization-initial-equation-and-initial-algorithm}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2636}{\#2636}.
\item Consistently use "discrete-time variable".
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2640}{\#2640}.
\item Clarified use of expandable connector, \cref{expandable-connectors}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2606}{\#2606}.
\item Made ndims constant, \cref{constant-expressions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2605}{\#2605}.
\item Restrict use of size of components of expandable connectors, \cref{expandable-connectors}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2560}{\#2560}.
\item Clarify scoping for component names, \cref{composite-name-lookup}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2547}{\#2547}.
\item Extend promote to be allowed in Modelica, and not only internally in the specification, \cref{built-in-array-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2568}{\#2568}.
\item Clarify that iterator ranges cannot be deduced from expandable connector variables, \cref{implicit-iteration-ranges}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2560}{\#2560}.
\item Restructure description of Real and Integer types to keep details together, \cref{real-type}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2552}{\#2552}.
\item Clarify pre for arrays, \cref{event-related-operators-with-function-syntax}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2556}{\#2566}.
\item Clarify variability guarantee, \cref{component-variability-prefixes-discrete-parameter-constant}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2553}{\#2553}.
\item Corrected errors in example of over-determined connectors for power system, \cref{an-overdetermined-connector-for-power-systems}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2564}{\#2564}.
\item Cleanup of example of over-determined connectors for power system, \cref{an-overdetermined-connector-for-power-systems}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2565}{\#2565}.
\item Correct so that normal connector cannot inherit from expandable connector, \cref{restrictions-on-the-kind-of-base-class}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2298}{\#2298}.
\item Clarify that locally non-singular models can be combined to a globally singular model, \cref{balanced-models}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2510}{\#2510}.
\item Clarify interaction between variability and perfect matching, \cref{variability-of-expressions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2525}{\#2525}.
\item In examples change SIunits to Units.SI following MSL 4.0.0.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2504}{\#2504}.
\item Remove outdated statement that model and class are the same, \cref{specialized-classes}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1345}{\#1345}.
\item Remove outdated statement that constants cannot be modified, \cref{record-constructor-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2492}{\#2492}.
\item Revert regressions for lookup, \cref{static-name-lookup}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2175}{\#2175}.
\item Clarify handling of equations involving connectors, \cref{specialized-classes}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2235}{\#2235}.
\item Clarified some builtin array functions, \cref{matrix-and-vector-algebra-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2295}{\#2295}.
\item Clarified when initial() for algorithms, \cref{initialization-initial-equation-and-initial-algorithm}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2436}{\#2436}.
\item Clarify differentiability of expressions, \cref{component-variability-prefixes-discrete-parameter-constant}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2464}{\#2464}.
\item Clarified standard type coercion, \cref{standard-type-coercion}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2326}{\#2326}.
\item Fully renamed declaration assignments to binding equations, \cref{initialization-and-binding-equations-of-components-in-functions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2249}{\#2249}.
\item Restrict left-hand sides to not be components of models and blocks, \cref{restrictions-on-assigned-variables}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2385}{\#2385}.
\item Correct order in example of short-circuit logic, \cref{evaluation-order}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2442}{\#2442}.
\item Clarified evaluation of for-equations, \cref{explicit-iteration-ranges-of-for-equations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2205}{\#2205}.
\item Clarify how sizes can be deduced from binding equations, \cref{array-declarations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2212}{\#2212}.
\item Clarify that component declarations allow indexing with types, \cref{syntax-and-examples-of-component-declarations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2221}{\#2221}.
\item Corrected formulation of synchronous data-flow principle, \cref{synchronous-data-flow-principle-and-single-assignment-rule}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2348}{\#2348}.
\item Restrict functions to not have connectors - later clarified, \cref{function-as-a-specialized-class}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/2308}{\#2308}.

\item Clarified sample, \cref{event-related-operators-with-function-syntax}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2118}{\#2118}.
\item Clarified that presentation of units is not restricted to ASCII, \cref{the-syntax-of-unit-expressions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2142}{\#2142}.
\item Clarified array variants for short classes, \cref{component-declaration-static-semantics}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2159}{\#2159}.
\item Clarified examples for external libraries, \cref{annotations-for-external-libraries-and-include-files}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2192}{\#2192}.
\item Clarified over-determined connector handling by renaming "breakable branch" to "optional spanning tree edge", \cref{overconstrained-equation-operators-for-connection-graphs}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2201}{\#2201}.
\item Improved pseudo-code spatialDistribution, \cref{spatialdistribution}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2202}{\#2202}.
\item Clarified reinit, \cref{event-related-operators-with-function-syntax}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2203}{\#2203}.
\item Allow sum and product of matrix with non integer index, \cref{reduction-functions-and-operators}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2204}{\#2204}.
\item Correct spelling of units to be consistent with SI, \cref{unit-expressions}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2232}{\#2232}.
\item Clarify that description string of modifier replaces existing one, \cref{modifications}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2237}{\#2237}.
\item Clarified that first argument to cat is an integer parameter expression, \cref{array-concatenation}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2273}{\#2273}.
\item Clarified illegal modification of outer element, \cref{instance-hierarchy-name-lookup-of-inner-declarations}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2283}{\#2283}.

\if0
\item xxx, \cref{xxx}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/}{\#}.
\item xxx, \cref{xxx}.
Ticket \href{https://github.com/modelica/ModelicaSpecification/pull/}{\#}.
\fi
\end{itemize}

\section{Modelica 3.4}\label{modelica-3-4}

Modelica 3.4 was released April 10, 2017. The Modelica 3.4 specification
was edited by Hans Olsson.

\subsection{Main Changes in Modelica 3.4}\label{main-changes-in-modelica-3-4}

The following Modelica Change Proposals are backward compatible
extensions added in 3.4:
\begin{itemize}
\item
  Automatic conversions between different versions (MCP-0014),
  \cref{version-handling}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1622}{\#1622}.
\item
  Flattening is clearly specified (MCP-0019), \cref{simple-name-lookup} and \cref{flattening-process}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1829}{\#1829}.
\item
  Convert from \lstinline!Integer! to Enumeration (MCP-0022), primarily \cref{type-conversion-of-integer-to-enumeration-values}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1842}{\#1842}.
\item
  Explicitly casting a Model to Record (MCP-0023), \cref{casting-to-record}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1953}{\#1953}.
\item
  Initialization of Clocked Continuous States (MCP-0024),
  \cref{clocked-discrete-time-and-clocked-discretized-continuous-time-partition},
  \cref{initialization-of-clocked-partitions} and \cref{other-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2007}{\#2007}.
\item
  An added option to Ellipse Annotation to draw only an arc (MCP-0026),
  \cref{ellipse}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2045}{\#2045}.
\item
  Allowing mixed \lstinline!Real! and non-\lstinline!Real! Record Derivatives (MCP-0028), \cref{using-the-derivative-annotation}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2134}{\#2134}.
\end{itemize}

The definition of pure functions was refined, in particular to restore
backwards compatibility with Modelica 3.2, \cref{pure-modelica-functions}. Ticket
\href{https://github.com/modelica/ModelicaSpecification/issues/1937}{\#1937}.

The following minor improvements were made (starting from 3.3 Revision 1):
\begin{itemize}
\item
  Clarified simulation model, \cref{scope-of-the-specification}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/730}{\#730}.
\item
  Clarified structural analysis, \cref{scope-of-the-specification}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/588}{\#588}.
\item
  Clarified meta-symbols, \cref{notation} and 2.3.1.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1616}{\#1616}.
\item
  Typo, \cref{identifiers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1702}{\#1702}.
\item
  Clarified newline, \cref{strings}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1479}{\#1479}.
\item
  Allow `\lstinline!"!' and define it to be equal to `\lstinline!\"!' (and
  similarly for `\lstinline!\?!'), \cref{identifiers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1176}{\#1176}.
\item
  Clarified that built-in functions in the specification, \cref{built-in-intrinsic-operators-with-function-syntax}
  and 12.5. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1608}{\#1608}.
\item
  Clarified named arguments for builtin operators, in particular \lstinline!spatialDistribution!, \cref{derivative-and-special-purpose-operators-with-function-syntax} and \cref{positional-or-named-input-arguments-of-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2002}{\#2002}.
\item
  Clarified that \lstinline!semiLinear! is continuous, \cref{derivative-and-special-purpose-operators-with-function-syntax}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/112}{\#112}.
\item
  Corrected spelling, \cref{derivative-and-special-purpose-operators-with-function-syntax}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1828}{\#1828}.
\item
  Corrected typo in code and reformulated description, \cref{spatialdistribution}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1588}{\#1588},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1729}{\#1729}, and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2166}{\#2166}.
\item
  Corrected typo for events, \cref{modelica:smooth}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1657}{\#1657}.
\item
  Clarified \lstinline!sample! operator, \cref{event-related-operators-with-function-syntax}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/677}{\#677}.
\item
  Additional functions give parameter expression, \cref{parameter-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1082}{\#1082}.
\item
  Clarified \lstinline!ExternalObject!, \cref{prefix-rules}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1546}{\#1546}.
\item
  Simplified rules type prefixes for structured components, \cref{prefix-rules}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1686}{\#1686}.
\item
  Clarified that unexpanded bindings shall be unexpanded, \cref{acyclic-bindings-of-constants-and-parameters}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2153}{\#2153}.
\item
  Clarified conditional components, \cref{conditional-component-declaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2057}{\#2057}.
\item
  Improved example to avoid using class, \cref{local-class-definitions-nested-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/553}{\#553}.
\item
  Clarify inheritance from predefines types, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1250}{\#1250}.
\item
  Allow \lstinline!connector! inheriting from \lstinline!operator record!, \cref{specialized-classes}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1714}{\#1714}.
\item
  Clarify restrictions on record components, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1615}{\#1615}.
\item
  Clarify that only functions may have \lstinline!external!-clause, \cref{specialized-classes} and \cref{function-as-a-specialized-class}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2014}{\#2014}.
\item
  Clarified equation count for operator record, \cref{balanced-models}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/866}{\#866}.
\item
  Clarified restriction on attributes, \cref{predefined-types-and-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1426}{\#1426}.
\item
  Clarified how reserved the different built-in types are, \cref{predefined-types-and-classes}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1538}{\#1538}.
\item
  Removed restriction on nominal and explained purpose, \cref{real-type}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1445}{\#1445}.
\item
  Added \lstinline!unbounded! to \lstinline!Real!, \cref{real-type} and \cref{attributes-start-fixed-nominal-and-unbounded}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/926}{\#926}.
\item
  Added fixed-attribute for \lstinline!String!, \cref{string-type}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1797}{\#1797}.
\item
  Clarified and corrected example in \cref{enumeration-types}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1849}{\#1849} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2150}{\#2150}.
\item
  Clarified nominal attribute, \cref{attributes-start-fixed-nominal-and-unbounded}
  and \cref{stream-operator-instream-and-connection-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1877}{\#1877}.
\item
  Added that \lstinline!Connections! is builtin package, \cref{connections}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1883}{\#1883}.
\item
  Clarified lookup-order regarding import, \cref{simple-name-lookup}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1573}{\#1573}.
\item
  Extend calling functions through component to array case, \cref{composite-name-lookup} and \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1613}{\#1613}.
\item
  Clarified existing use of automatic inner declarations, \cref{instance-hierarchy-name-lookup-of-inner-declarations}
  and \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1551}{\#1551} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/1749}{\#1749}.
\item
  Removed restriction on array size for modifiers, \cref{interface-compatibility-or-subtyping}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1432}{\#1432}.
\item
  Clarified that 2/3 and 2\^{}(-3) are \lstinline!Real!, \cref{type-compatible-expressions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1647}{\#1647}.
\item
  Clarified that the \lstinline!external!-clause is inherited, \cref{inheritance-extends-clause}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/789}{\#789}.
\item
  Further clarified order for multiple inheritance, \cref{instantiation} and
  \cref{inheritance-extends-clause}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2015}{\#2015}.
\item
  Clarified inheritance restrictions, \cref{restrictions-on-the-kind-of-base-class}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1451}{\#1451}.
\item
  Restricted merging of modifiers, \cref{merging-of-modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/791}{\#791}.
\item
  Clarified each especially for nested arrays, \cref{single-modification} and \cref{modifiers-for-array-elements}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1596}{\#1596}.
\item
  Clarified replaceable with array sizes on types, \cref{redeclaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1251}{\#1251}.
\item
  Corrected and moved example, \cref{redeclaration} and \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1034}{\#1034}.
\item
  Clarified \lstinline!redeclare class extends B!, \cref{the-class-extends-redeclaration-mechanism}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/462}{\#462} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/709}{\#709}.
\item
  Corrected example, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1725}{\#1725}.
\item
  Clarified description and annotation on \lstinline[language=grammar]!constraining-clause!, \cref{constraining-clause-annotations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/512}{\#512}.
\item
  Corrected typo, \cref{annotation-choices-for-suggested-redeclarations-and-modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1770}{\#1770}.
\item
  Clarified \lstinline!for!-equation with types, \cref{for-equations-repetitive-equation-structures}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/915}{\#915}.
\item
  Clarified event generation, \cref{events-and-synchronization}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2114}{\#2114}.
\item
  Further clarified \lstinline!initial()! for \lstinline!when!-clauses, \cref{initialization-initial-equation-and-initial-algorithm}, and indicated that this appendix is not normative.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1852}{\#1852}.
\item
  Clarified using \lstinline!start!-attribute for parameters, \cref{initialization-initial-equation-and-initial-algorithm}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2136}{\#2136}.
\item
  Clarified that states for first order ODE, \cref{the-number-of-equations-needed-for-initialization}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/937}{\#937}.
\item
  Clarified adding \lstinline!input!/\lstinline!output! prefix for expandable connector variables, \cref{expandable-connectors}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/829}{\#829}.
\item
  Clarified creating elements in expandable connectors, \cref{expandable-connectors}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/428}{\#428}.
\item
  Corrected expandable connector example, \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1763}{\#1763}.
\item
  Clarified that stream variables do not generate equations, \cref{generation-of-connection-equations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1584}{\#1584}.
\item
  Restrict that stream only connects to stream, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/796}{\#796}.
\item
  Clarified section heading, \cref{balancing-restriction-and-size-of-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/727}{\#727}.
\item
  Clarified vector arguments for operators in \cref{overconstrained-equation-operators-for-connection-graphs}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1590}{\#1590}.
\item
  Corrected example, \cref{an-overdetermined-connector-for-power-systems}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2143}{\#2143}.
\item
  Clarified return type for reduction expressions, \cref{reduction-functions-and-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/981}{\#981}.
\item
  Extended reduction expression sum to operator records, \cref{reduction-functions-and-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1897}{\#1897}.
\item
  Clarified table in \cref{reduction-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1722}{\#1722}.
\item
  Match parenthesis, \cref{array-constructor-with-several-iterators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1558}{\#1558}.
\item
  Recommend better alternative for generating vector, \cref{vector-construction}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1837}{\#1837}.
\item
  Defined unary operators, \cref{array-element-wise-addition-subtraction-and-string-concatenation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2027}{\#2027}.
\item
  Allow missing trailing indices, sections \cref{array-indexing} and \cref{slice-operation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1603}{\#1603}.
\item
  Clarified that element-wise division gives real result,
  \cref{array-element-wise-division}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1119}{\#1119}.
\item
  Removed misleading comment, \cref{execution-of-an-algorithm-in-a-model}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/938}{\#938}.
\item
  Clarified how assignment works for multi-returning functions,
  \cref{assignments-from-called-functions-with-multiple-results}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1921}{\#1921}.
\item
  Clarified no equations and initial algorithms in functions,
  \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2160}{\#2160}.
\item
  Clarified assigning to record variables with bindings in functions,
  \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2016}{\#2016}.
\item
  Clarified initialization of variables in functions, \cref{initialization-and-declaration-assignments-of-components-in-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1708}{\#1708}.
\item
  Standarize current practice of using = instead of := for bindings in
  functions, \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1595}{\#1595}.
\item
  Clarified function partial evaluation, \cref{function-partial-application}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/647}{\#647}.
\item
  Clarified initialization of record components in functions,
  \cref{initialization-and-declaration-assignments-of-components-in-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1230}{\#1230}.
\item
  Clarified flexible array sizes, \cref{flexible-array-sizes-and-resizing-of-arrays-in-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2158}{\#2158}.
\item
  Clarified name of output for record constructor in \cref{record-constructor-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/366}{\#366}.
\item
  Clarified derivatives for functions in several ways, \cref{using-the-derivative-annotation}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/985}{\#985},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1543}{\#1543},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1544}{\#1544},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1545}{\#1545},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1547}{\#1547},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1548}{\#1548},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1788}{\#1788},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1972}{\#1972},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1987}{\#1987}.
\item
  Clarified that using C89 and added possibility for C89, C99, and C11 ,
  \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1088}{\#1088}.
\item
  Clarified input/output to external functions, \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/775}{\#775}.
\item
  Clarified handling of \lstinline!Boolean! variables for external C, \cref{simple-types}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1846}{\#1846}.
\item
  Added that strings can be sent to FORTRAN~77, \cref{simple-types}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1971}{\#1971}.
\item
  Allow multiple include directories, \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2103}{\#2103}.
\item
  Allow specific libraries for different compiler versions,
  \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1316}{\#1316}.
\item
  Added external warning functions, \cref{utility-functions}. Ticker
  \href{https://github.com/modelica/ModelicaSpecification/issues/1967}{\#1967}.
\item
  Clarified that pointers are only valid during each call, \cref{external-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1611}{\#1611}.
\item
  Clarified constructor and destructor, \cref{external-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1907}{\#1907}.
\item
  Clarified 'structured entity' to be 'directory', \cref{mapping-package-class-structures-to-a-hierarchical-file-system}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/922}{\#922}.
\item
  Clarified handling of incorrect package.order, \cref{mapping-a-package-class-hierarchy-into-a-directory-hierarchy-structured-entity}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1858}{\#1858}.
\item
  Restricted use of files with multiple classes, \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1854}{\#1854}.
\item
  Clarified storing resources in a file-system, \cref{external-resources}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/685}{\#685},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1623}{\#1623}.
\item
  Used correct font, \cref{external-resources}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2061}{\#2061}.
\item
  Clarified that \lstinline!inStream! optimizations are allowed, \cref{stream-operator-instream-and-connection-equations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1766}{\#1766}.
\item
  Corrected \lstinline!actualStream! example in \cref{stream-operator-actualstream}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1652}{\#1652}.
\item
  Corrected non-periodic rational clocks, \cref{clock-constructors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2022}{\#2022}.
\item
  Clarified initialization of clocked discretized continuous-time
  partitions, \cref{solver-methods}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1528}{\#1528}.
\item
  Defined rendering order, \cref{annotations-for-graphical-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1750}{\#1750}.
\item
  Clarified rotation direction, \cref{common-definitions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1830}{\#1830}.
\item
  Clarified coordinate system definition, \cref{coordinate-systems}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1831}{\#1831}.
\item
  Defined coordinate system inheritance to be less suprising,
  \cref{coordinate-systems} and \cref{extends-clause}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1978}{\#1978}.
\item
  Clarified \lstinline!lineThickness! and \lstinline!borderPattern!, \cref{graphical-primitives} \cref{graphical-properties}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1896}{\#1896}.
\item
  Corrected formatting, \cref{graphical-properties}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1825}{\#1825}.
\item
  Made the different Text-annotations more similar, \cref{connections}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1621}{\#1621}.
\item
  Clarified \lstinline!LinePattern! in \cref{graphical-primitives}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1483}{\#1483}.
\item
  Corrected flipping of components and bitmaps, and clarified various
  aspects of bitmaps, \cref{component-instance} and \cref{bitmap}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1923}{\#1923}.
\item
  Clarified arrows, \cref{line}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1894}{\#1894}.
\item
  Clarified existing use of zero-width texts, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1636}{\#1636}.
\item
  Added specific fontnames, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1986}{\#1986}.
\item
  Added alternative for macro-expansion, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2148}{\#2148}.
\item
  Corrected example in \cref{mouse-input}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2111}{\#2111}.
\item
  Placed annotation last in classes, in particular \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1009}{\#1009}.
\item
  Cleaned up code and formatting in \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2041}{\#2041},
  \href{https://github.com/modelica/ModelicaSpecification/issues/2042}{\#2042}, and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2125}{\#2125}.
\item
  Added missing nano prefix, \cref{the-syntax-of-unit-expressions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1261}{\#1261}.
\item
  Replaced the outdated contents of \cref{the-modelica-standard-library} by a hyperlink. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2130}{\#2130}.
\item
  Added ModelicaServices to \cref{the-modelica-standard-library}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2132}{\#2132}.
\item
  Restrict grammar to avoid modifiers with leading dot, \cref{grammar}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1027}{\#1027}.
\item
  Restrict grammar for \lstinline[language=grammar]!base-prefix!, \cref{class-definition}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/917}{\#917}.
\item
  Restrict grammar for arrays, \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/809}{\#809}.
\item
  Restrict grammar for function arguments (replacing semantic
  restriction), \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1634}{\#1634}.
\item
  Corrected typo in \cref{rationale-for-the-formulation-of-the-instream-operator}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1317}{\#1317}.
\end{itemize}

\subsection{Contributors to the Modelica Language 3.4}\label{contributors-to-the-modelica-language-3-4}

The members of the Modelica Association contributed to the Modelica 3.4
specification.

\section{Modelica 3.3 Revision 1}\label{modelica-3-3-revision-1}

Modelica 3.3 Revision 1 was released July 11, 2014. The Modelica 3.3
Revision 1 specification was edited by Hans Olsson.

\subsection{Main Changes in Modelica 3.3 Revision 1}\label{main-changes-in-modelica-3-3-revision-1}

The changes made in Modelica 3.2 Revision 2 are included, and in
addition the following improvements were made:
\begin{itemize}
\item
  Clarified that \lstinline!String! operator cannot use positional arguments, \cref{numeric-functions-and-conversion-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1468}{\#1468}.
\item
  Corrected size of enumeration, \cref{numeric-functions-and-conversion-functions} and \cref{type-conversion-of-enumeration-values-to-string-or-integer}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1369}{\#1369}.
\item
  Clarified \lstinline!spatialDistribution!, \cref{built-in-mathematical-functions-and-external-built-in-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1510}{\#1510}.
\item
  Restricted \lstinline!cardinality! to give a clear definition, \cref{cardinality-deprecated}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1409}{\#1409}.
\item
  Clarified which constants need a value, \cref{constant-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1220}{\#1220}.
\item
  Clarified type prefixes rules, \cref{prefix-rules}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1196}{\#1196},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1221}{\#1221},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1301}{\#1301}.
\item
  Added exception for cyclic parameter bindings (already used in MSL),
  \cref{acyclic-bindings-of-constants-and-parameters}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1320}{\#1320}.
\item
  Added example for use of conditional components, \cref{conditional-component-declaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1227}{\#1227}.
\item
  Corrected annotation-grammar, \cref{class-declarations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1378}{\#1378}.
\item
  Corrected duplicated class-definition grammar, \cref{class-declarations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1388}{\#1388}.
\item
  Clarified short class definition, \cref{short-class-definitions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/527}{\#527}.
\item
  Removed unusable variant for operator and operator function, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1459}{\#1459},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1497}{\#1497}.
\item
  Added definition of AssertionLevel, \cref{assertionlevel}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/962}{\#962}.
\item
  Corrected typos at end of loops in examples,\cref{enumeration-types} and
  \cref{implicit-iteration-ranges-of-for-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/902}{\#902}
\item
  Clarified temporary flattening, \cref{composite-name-lookup}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1327}{\#1327}.
\item
  Added definition of modification equations, \cref{modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/959}{\#959}.
\item
  Clarified modifiers for array elements, \cref{modifiers-for-array-elements}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1324}{\#1324}.
\item
  Corrected example for final element modification, \cref{final-element-modification-prevention}
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1326}{\#1326}.
\item
  Corrected duplicated class-definition grammar, \cref{the-class-extends-redeclaration-mechanism}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1388}{\#1388}.
\item
  Clarified modifiers on constraining type, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1033}{\#1033}.
\item
  Clarified when \lstinline!redeclare! can be used with the same type and rules for redeclaring array types, \cref{restrictions-on-redeclarations}.
  Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1252}{\#1252},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1281}{\#1281}.
\item
  Clarified default for annotation \lstinline!choicesAllMatching!, \cref{annotation-choices-for-suggested-redeclarations-and-modifications}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1391}{\#1391}.
\item
  Forbid \lstinline!when!-statements in initial equation/algorithm (they would in most cases not be active; leading to confusion), \cref{restrictions-on-equations-within-when-equations} and \cref{restrictions-on-where-a-when-statement-may-occur}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1288}{\#1288}.
\item
  Clarified \lstinline!reinit! during initialization, \cref{reinit} \cref{initialization-initial-equation-and-initial-algorithm}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1372}{\#1372}.
\item
  Clarified using \lstinline!start!-attributes as guess-values; \cref{initialization-initial-equation-and-initial-algorithm}.
  Tickets \href{https://github.com/modelica/ModelicaSpecification/issues/1133}{\#1133}, \href{https://github.com/modelica/ModelicaSpecification/issues/1246}{\#1246}.
\item
  Clarified allowed use of variables in expandable connectors; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1279}{\#1279}.
\item
  Clarified causality for expandable connectors; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1305}{\#1305}.
\item
  Clarified expandable connectors in general; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1330}{\#1330}.
\item
  Clarified connection matching, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/884}{\#884}.
\item
  Added quantity checks for connectors (MSL already relies on this
  check); \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1284}{\#1284}.
\item
  Clarified arrays with non-\lstinline!Integer! dimensions, \cref{array-declarations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1501}{\#1501}.
\item
  Clarified that ndims is allow for a scalar, \cref{array-dimension-and-size-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1303}{\#1303}.
\item
  Clarified number of arguments for zeros, ones, fill, \cref{specialized-array-constructor-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1351}{\#1351}.
\item
  Clarified min/max, \cref{reduction-functions-and-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1036}{\#1036}.
\item
  Clarified array expressions using iterations allow non-simple types,
  \cref{array-constructor-with-iterators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1521}{\#1521}.
\item
  Clarified arrays with non-\lstinline!Integer! dimensions, \cref{boolean-or-enumeration-indices}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1463}{\#1463}.
\item
  Clarified calling function as specialized class, \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1362}{\#1362}.
\item
  Clarified default values in functions depending on other inputs,
  \cref{positional-or-named-input-arguments-of-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1346}{\#1346}.
\item
  Corrected syntax error in example, \cref{function-partial-application}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1338}{\#1338}.
\item
  Clarified annotations on external functions, \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/660}{\#660}.
\item
  Add possibility for sending arrays in records to external functions,
  \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/351}{\#351}.
\item
  Corrected spelling to FORTRAN~77, \cref{aliasing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1278}{\#1278}.
\item
  Clarified default directories, \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1456}{\#1456}.
\item
  Clarified constructing/destructing external objects, \cref{external-objects}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1518}{\#1518}.
\item
  Clarified encapsulation requirement for operator record, \cref{overloaded-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1254}{\#1254}.
\item
  Clarified operator record: arrays, priority, and zero result,
  \cref{overloaded-binary-operations}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1469}{\#1469},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1476}{\#1476},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1481}{\#1481}.
\item
  Added element wise operations for operator record, \cref{overloaded-binary-operations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1455}{\#1455}.
\item
  Improved formulation, \cref{clock-constructors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1362}{\#1362}.
\item
  Clarified why noClock exists; \cref{sub-clock-conversion-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1094}{\#1094}.
\item
  Added initial conditions to solver methods for clocked discretized
  continuous-time partitions; \cref{solver-methods}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1379}{\#1379}.
\item
  Added requirement that priorities must be unique for statechart
  transitions (the restriction was present in original description and
  is necessary to ensure deterministic behavior), \cref{state-machine-semantics}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/853}{\#853}.
\item
  Corrected syntax in Line definition, \cref{line}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1464}{\#1464}.
\item
  Corrected \lstinline!connectorSizing! description, \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1441}{\#1441}.
\item
  Corrected license example, \cref{licensing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1127}{\#1127}.
\item
  Clarified names of productions in grammar and changed to use hyphen,
  \cref{lexical-conventions}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/713}{\#713} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/1033}{\#1033}.
\item
  Modified grammar use consistent style for import-list, \cref{class-definition}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1374}{\#1374}.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.3 Revision 1}\label{contributors-to-the-modelica-language-version-3-3-revision-1}

The following members of the Modelica Association contributed to the
Modelica 3.3 Revision 1 and/or Modelica 3.2 Revision 2 specification
(alphabetical list):
\begin{contributors}
\item Peter Aronsson, MathCore AB, Linköping, Sweden
\item Peter Fritzson, PELAB, Linköping University, Linköping, Sweden
\item Hilding Elmqvist, Dassault Systèmes, Lund, Sweden
\item Christoph Höger, Technical University of Berlin, Berlin, Germany
\item Gerd Kurzbach, ITI GmbH, Dresden, Germany
\item Jesper Mattsson, Modelon AB, Lund, Sweden
\item Hans Olsson, Dassault Systèmes, Lund, Sweden
\item Martin Otter, DLR, Oberpfaffenhofen, Germany
\item Adrian Pop, Linköping University, Linköping, Sweden
\item Elena Shmoylova, Maplesoft, Waterloo, Canada
\item Martin Sjölund, PELAB, Linköping University, Linköping, Sweden
\item Stefan Vorkoetter, Maplesoft, Waterloo, Canada
\end{contributors}

\section{Modelica 3.3}\label{modelica-3-3}

Modelica 3.3 was released on May 9, 2012. The Modelica 3.3 specification
was edited by Hans Olsson, Hilding Elmqvist and Martin Otter.

\subsection{Main Changes in Modelica 3.3}\label{main-changes-in-modelica-3-3}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.3:
\begin{itemize}
\item
  Language elements for describing synchronous behavior suited for
  implementation of control systems, \cref{synchronous-language-elements}.
\item
  Language elements to define synchronous state machines, \cref{state-machines}.
\item
  The \lstinline!spatialDistribution! function for special one-dimensional flow problems, \cref{spatialdistribution}.
\item
  The \lstinline!getInstanceName! function for diagnostic messages, \cref{getinstancename}.
\item
  Possible to call a function through an instance name, \cref{composite-name-lookup}.
\item
  Can use the \lstinline!start!-attribute for a parameter to give a non-zero default that should be changed, \cref{initialization-initial-equation-and-initial-algorithm}.
\item
  A recommened procedure for priority between initial values have been added, \cref{recommended-selection-of-start-values}.
\item
  Functions can be defined without algorithm-section, \cref{function-as-a-specialized-class}.
\item
  Functions can be marked as \lstinline!pure! or \lstinline!impure! with specified semantics, \cref{pure-modelica-functions}.
\item
  The rules for \lstinline!ExternalObject! have been clarified, \cref{external-objects} and \cref{interface-or-type-relationships}.
\item
  Multiple definition import, \cref{importing-definitions-from-a-package}.
\item
  Additional annotations allowing:
  \begin{itemize}
  \item
    Functions to generate events, \cref{modelica:GenerateEvents}.
  \item
    Experiments to specify a time-resolution of simulation result, \cref{modelica:experiment}.
  \item
    Single instance of class, \cref{annotation-for-single-use-of-class}.
  \item
    Text in the diagram layer can use a macro syntax, \cref{text}.
  \item
    Color selection dialog for parameters, \cref{annotations-for-the-graphical-user-interface}.
  \item
    Conversion to specify a set of versions to convert with one script,
    \cref{version-handling}.
  \item
    Licensed libraries to define the set of allowed operations
    (including binary/source export), \cref{licensing}.
  \end{itemize}
\end{itemize}

The following changes in Modelica 3.3 are \emph{not} backwards compatible:
\begin{itemize}
\item
  \Crefnameref{synchronous-language-elements} from
  Modelica 3.2 has been removed (a more powerful functionality is
  instead provided with the new \cref{synchronous-language-elements} and \cref{state-machines}). Since, no
  released tools has yet supported the previous \cref{synchronous-language-elements}, this not
  backwards compatible change is uncritical.
\item
  The new \lstinline!spatialDistribution! and \lstinline!getInstanceName! functions could cause
  problems if another function with that name was already used.
\end{itemize}

\begin{itemize}
\item
  Conditional physical connectors must be connected if enabled,
  \cref{conditional-component-declaration}
  and \cref{restrictions-of-connections-and-connectors}. In almost all cases they have to be connected
  to generate correct result, and it is not possible to check that they
  are connected in the models
\end{itemize}

\subsection{Contributors to Modelica 3.3}\label{contributors-to-modelica-3-3}

The language elements for describing synchronous behavior, \cref{synchronous-language-elements},
was mainly developed by Hilding Elmqvist, Martin Otter, and Sven Erik
Mattsson. Hilding Elmqvist wrote a detailed tutorial. Sven Erik Mattsson
developed a test implementation of the language elements and the needed
new algorithms. Based on the prototype, tests and feedback have been
provided by Martin Otter and Bernhard Thiele.

The language elements to define synchronous state machines, \cref{state-machines},
was mainly developed by Hilding Elmqvist with contributions from
Francois Dupont, Sven Erik Mattsson and Fabien Gaucher. Hilding Elmqvist
wrote a tutorial. Sven Erik Mattsson and Carl-Fredrik Abelson developed
a test implementation. Based on the prototype, tests and feedback have
been provided by Alain Thura, Emmanuel Ledinot, Claire Campan, and
Martin Malmheden.

The \lstinline!spatialDistribution! operator was initiated by Hubertus Tummescheit,
based on an operator of Dymola, and with contributions from Hans Olsson.

The improved definition of pure and impure functions and the enhanced \lstinline!import!-clause was proposed by Peter Fritzson.

The various smaller language improvements based on submitted tickets
have been developed by a group headed by Hans Olsson and with group
members Peter Fritzson, Christoph Höger, Gerd Kurzbach, Jesper Mattsson,
Martin Sjölund, and Stefan Vorkoetter.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.3 specification:
\begin{contributors}
\item Johan Åkesson, Lund University and Modelon AB, Lund, Sweden
\item Peter Aronsson, MathCore AB, Linköping, Sweden
\item Ingrid Bausch-Gall, BAUSCH-GALL GmbH, Munich, Germany
\item Volker Beuter, Kämmerer AG, Germany
\item Torsten Blochwitz, ITI GmbH, Dresden, Germany
\item David Broman, PELAB, Linköping University, Sweden
\item Dag Brück, Dassault Systèmes, Lund, Sweden
\item Francesco Casella, Politecnico di Milano, Milano, Italy
\item Christoph Clauss, Fraunhofer, Dresden, Germany
\item Mike Dempsey, Claytex Services Limited, Leamington Spa, U.K.
\item Karin Dietl, TU Hamburg-Harburg, Germany
\item Francois Dupont, Dassault Systèmes, Brest, France
\item Jonas Eborn, Modelon, Lund, Sweden
\item Hilding Elmqvist, Dassault Systèmes, Lund, Sweden
\item Guilioano Fontanella, AIT, Vienna, Austria
\item Rüdiger Franke, ABB Power Generation, Mannheim, Germany
\item Peter Fritzson, PELAB, Linköping University, Sweden
\item Sébastien Furic, LMS International, Roanne. France
\item Leo Gall, BAUSCH-GALL Gmbh, Munich, Germany
\item Peter Harman, deltatheta uk limited, U.K.
\item Anton Haumer, AIT, Vienna, Austria
\item Dan Henriksson, Dassault Systèmes, Lund, Sweden
\item Christoph Höger, TU Berlin, Berlin, Germany
\item Christian Kral, AIT, Vienna, Austria
\item Gerd Kurzbach, ITI GmbH, Dresden, Germany
\item Kilian Link, Siemens AB, Erlangen, Germany
\item Krisitin Majetta, Fraunhofer, Dresden, Germany
\item Martin Malmheden, Dassault Systèmes, Velicy, France
\item Jesper Mattsson, Modelon, Lund, Sweden
\item Sven Erik Mattsson, Dassault Systèmes, Lund, Sweden
\item Eric Neuber, ITI GmbH, Dresden, Germany
\item Ramine Nikoukhah, Altair, France
\item Hans Olsson, Dassault Systèmes, Lund, Sweden
\item Martin Otter, DLR-RM (German Aerospace Center), Oberpfaffenhofen,Germany
\item Peter Pepper, Fraunhofer FIRST, Berlin, Germany
\item Adrian Pop, Linköping University, Linköping, Sweden
\item Olena Rogovchenko, PELAB, Linköping, Sweden
\item Stefan-Alexander Schneider, BMW, Munich, Germany
\item Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany
\item Martin Sjölund, PELAB; Linköping, Sweden
\item Kristian Stavåker, PELAB, Linköping, Sweden
\item Bernhard Thiele, DLR-RM (German Aerospace Center), Oberpfaffenhofen,Germany
\item Eric Thomas, Dassault Aviation, Paris, France
\item Michael Tiller, Dassault Systèmes, Velicy, France
\item Hubertus Tummescheit, Modelon AB, Lund, Sweden
\item Andreas Uhlig, ITI, Dresden Germany
\item Vladimir Vukovic, AIT, Vienna, Germany
\item Stefan Vorkoetter, Maplesoft, Waterloo, Canada
\item Daniel Weil, Dassault Systèmes, Grenoble, France
\item Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,Switzerland
\item Dietmar Winkler, Telemark University College, Porsgrunn, Norway
\item Stefan Wischhusen, XRG Simulation, Hamburg, Germany
\item Dirk Zimmer, DLR-RM (German Aerospace Center), Oberpfaffenhofen, Germany
\end{contributors}

\subsection{Acknowledgments}\label{acknowledgments1}

For the design of the synchronous language elements (\cref{synchronous-language-elements}) and
synchronous state machines (\cref{state-machines}), and for the understanding of
fine details of synchronous languages, especially from Lucid Synchrone,
very helpful discussions with
\begin{contributors}
\item Albert Benveniste, IRISA/INRIA, Rennes, France
\item Marc Pouzet, Laboratoire d'Informatique de l'ENS, Paris
\item Benoit Caillaud, IRISA, Rennes, France
\item Timothy Bourke, INRIA, Rennes, France
\end{contributors}
are appreciated.

\section{Modelica 3.2 Revision 2}\label{modelica-3-2-revision-2}

Modelica 3.2 Revision 2 was released 2013. The Modelica 3.2 Revision 2
specification was edited by Hans Olsson and Martin Otter.

\subsection{Main Changes in Modelica 3.2 Revision 2}\label{main-changes-in-modelica-3-2-revision-2}

The Modelica language was slightly adapted (in a backwards compatible way, except as listed below) in order that the Modelica Standard Library (MSL) version~3.2.1 is fully compliant to Modelica
Language~3.2 Revision~2.  This required the following improvements compared to 3.2 Revision~1:
\begin{itemize}
\item
  Possible to call a function through an instance name, \cref{composite-name-lookup}\\
  (used in MSL 3.2 to compute the gravity acceleration in \lstinline!Modelica.Mechanics.MultiBody.World!; this feature was also introduced in Modelica Language version 3.3 in May 2012).
\item
  New built-in operator \lstinline!Connections.rooted(A.R)! to inquire whether an overdetermined type or record instance \lstinline!A.R! in a call to \lstinline!Connections.branch(A.R, B.R)! is closer to the root of the spanning tree than \lstinline!B.R!, \cref{overconstrained-equation-operators-for-connection-graphs} (used in MSL 3.2 to avoid algebraic loops in several components such as in \lstinline!Modelica.Mechanics.MultiBody.Joints.Revolute!).
\item
  Several new annotations where vendor-specific variants were used in MSL 3.2; \cref{annotation-choices-for-suggested-redeclarations-and-modifications}, \cref{annotations-for-documentation}, \cref{annotations-for-symbolic-processing}, \cref{modelica:experiment}, \cref{connections}, and \cref{annotations-for-the-graphical-user-interface}.
\item
  Specified that \lstinline!Evaluate! can also occur in types, since this is used in MSL and important for performance; \cref{modelica:Evaluate}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/925}{\#925}.
\item
  Macros in graphical text items, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/659}{\#659}. (This
  feature was also introduced in Modelica Language version 3.3.)
\item
  Initial equations are discrete -- used in MSL for initialization of pre-variables, \cref{discrete-time-expressions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/853}{\#853}.
\item
  Updated \lstinline!noDerivative! to be consistent with MSL, \cref{using-the-derivative-annotation}.  This is an incompatibility, but the other variant was not used.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1035}{\#1035}.
\item
  Clarified handling of component with \lstinline!missingInnerMessage!; \cref{annotations-for-the-graphical-user-interface}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/891}{\#891}.
\item
  Clarified definition of protected; \cref{access-control-public-and-protected-elements}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/975}{\#975},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1123}{\#1123}.
\end{itemize}

In addition several issues with the specification text were corrected:
\begin{itemize}
\item
  Clarified an unclear sequence regarding functions as input arguments
  in \cref{prefix-rules}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1182}{\#1182}.
\item
  Clarified allowed binding equations for redeclarations, \cref{balanced-models}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1111}{\#1111}.
\item
  Unspecified enumerations now have defined semantics, \cref{unspecified-enumeration}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/834}{\#834}.
\item
  Transitively non-Replaceable, \cref{transitively-non-replaceable}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/854}{\#854}.
\item
  Modification text improved to not refer to inherited class,
  \cref{modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1042}{\#1042}.
\item
  Precedence for modifiers on \lstinline[language=grammar]!constraining-clause! clarified, \cref{constraining-type}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1128}{\#1128}.
\item
  Clarified arrays for constraining type, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1148}{\#1148}.
\item
  Avoid all forms of connections depending on connections,
  \cref{connect-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/828}{\#828}.
\item
  Clarified equation count for \lstinline!if!-equations, \cref{if-equations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/888}{\#888}.
\item
  Complete definition of \lstinline!reinit!, \cref{reinit}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/578}{\#578}.
  This forbids \lstinline!reinit! in algorithms, but it was previously not well-defined.
\item
  Clarified initializaton of \lstinline!pre(vc)! for a non-discrete (that is continuous-time) \lstinline!Real! variable \lstinline!vc!, \cref{initialization-initial-equation-and-initial-algorithm}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1195}{\#1195}.
\item
  Only one way of handling arrays of connectors is now defined,
  \cref{connectors-and-connections}. Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/757}{\#757}.
\item
  Example now use correct sine-source, \cref{connect-equations-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/750}{\#750}.
\item
  Restricted parameters in connectors, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/768}{\#768}.
\item
  Clarified type restrictions for some operators, \cref{reduction-functions-and-operators},
  \cref{matrix-and-vector-algebra-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/622}{\#622}.
\item
  Clarified that if at least one array element is used on the left hand
  side of the assignment operator in an algorithm section, then the
  complete array is initialized in this section, \cref{execution-of-an-algorithm-in-a-model}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1190}{\#1190}.
\item
  Record constructor corrected to not refer to keywords that should not
  occur, \cref{record-constructor-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/907}{\#907}.
\item
  External storage of classes, \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity},
  \cref{the-within-clause} and \cref{mapping-of-versions-to-file-system}.
  Tickets \href{https://github.com/modelica/ModelicaSpecification/issues/1019}{\#1019},
  \href{https://github.com/modelica/ModelicaSpecification/issues/892}{\#892},
  \href{https://github.com/modelica/ModelicaSpecification/issues/887}{\#887}.
\item
  Added example and explanation for inheritance restriction on operator
  record; \cref{example-of-overloading-for-complex-numbers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1065}{\#1065}.
\item
  Chapter \emph{Mapping of Models to Execution Environments} was removed;
  this change was already decided for Modelica 3.3 and no tool had
  released an implementation of this feature. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1015}{\#1015}.
\item
  Corrected license-example in \cref{licensing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1127}{\#1127}.
\item
  Grammar was internally restructured for \lstinline[language=grammar]!short-class-definition!, \cref{class-declarations}, \cref{class-definition}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1140}{\#1140}.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2 Revision 2}\label{contributors-to-the-modelica-language-version-3-2-revision-2}

The following members of the Modelica Association contributed to the
Modelica 3.2 Revision 2 specification (alphabetical list):

Peter Aronsson, MathCore AB, Linköping, Sweden

Peter Fritzson, PELAB, Linköping University, Linköping, Sweden

Hilding Elmqvist, Dassault Systèmes, Lund, Sweden

Christoph Höger, Technical University of Berlin, Berlin, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Jesper Mattsson, Modelon AB, Lund, Sweden

Hans Olsson, Dassault Systèmes, Lund, Sweden

Martin Otter, DLR, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Elena Shmoylova, Maplesoft, Waterloo, Canada

Martin Sjölund, PELAB, Linköping University, Linköping, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

\section{Modelica 3.2 Revision 1}\label{modelica-3-2-revision-1}

Modelica 3.2 Revision 1 was released on Feb. 29, 2012. The Modelica 3.2
Revision 1 specification was edited by Hans Olsson and Peter Fritzson.

\subsection{Main Changes in Modelica 3.2 Revision 1}\label{main-changes-in-modelica-3-2-revision-1}

The Modelica language was not changed with respect to the previous
version 3.2. Only issues with the specification text have been fixed. In
particular:
\begin{itemize}
\item
  Corrected typos and improved formatting.
\item
  \cref{comments} Comments:\\
  There are 2 and not 3 kinds of comments and comments are treated as
  white space character.\\
  Added definition of white space character.
\item
  \cref{identifiers} Identifiers:\\
  The single quotes are part of the identifier, e.g., 'x'.
\item
  \cref{built-in-variable-time} Built-in Variable time:\\
  Variable \lstinline!time! is only available in models and blocks and not in the
  other classes.
\item
  \cref{built-in-mathematical-functions-and-external-built-in-functions} Built-in Mathematical Functions\\
  Definition of \lstinline!atan2! corrected.
\item
  \cref{derivative-and-special-purpose-operators-with-function-syntax} Special Purpose Operators\\
  Included definition of \lstinline!inStream! and \lstinline!actualStream! operators from \cref{stream-connectors}.
\item
  \cref{event-related-operators-with-function-syntax} Event-Related Operators\\
  Clarified, that the first argument of \lstinline!smooth! is a scalar.\\
  Improved the definition of \lstinline!reinit!.
\item
  \cref{discrete-time-expressions} Discrete-Time Expressions\\
  Improved definition of ordered relations (\lstinline!>!, \lstinline!<!, \lstinline!>=!, \lstinline!<=!).
\item
  \cref{conditional-component-declaration} Conditional Component Declaration\\
  Clarified redeclaration of a component.
\item
  \cref{specialized-classes} Specialized Classes\\
  Clarified that \lstinline!stream! cannot be used in a record.\\
  Clarified restrictions on elements in a \lstinline!connector!.\\
  Errors in example of operator record Complex corrected.
\item
  \cref{enumeration-types} Enumeration Types\\
  Error in example corrected.
\item
  \cref{simultaneous-inner-outer-declarations} Simulataneous Inner/Outer Declarations\\
  Clarified inner/outer declarations.
\item
  \cref{inheritance-extends-clause} Inheritance\\
  Clarified that the elements of a flattened base class are added at the place of the \lstinline!extends!-clause.\\
  Equations of the flattened base class that are syntactically equivalent to equations in the flattened enclosing class are deprecated.
\item
  \cref{modifications} Modifications\\
  Element modifiers are no longer part of language, reference grammar
  instead of duplicating it.
\item
  \cref{redeclaration} Redeclaration\\
  Improved redeclarations definition and moved an example from \cref{the-class-extends-redeclaration-mechanism} at
  the right place.
\item
  \cref{reinit} reinit\\
  Improved \lstinline!reinit! definition.
\item
  \cref{initialization-initial-equation-and-initial-algorithm} Initialization\\
  Clarified that only \lstinline!when!-clauses with restricted form of initial() as
  condition will be active during initialization.
\item
  \cref{reduction-expressions} Reduction Expressions\\
  Improved definition
\item
  \cref{types-as-iteration-ranges} Types as iteration ranges\\
  Newly introduced section to improve the definition of iteration ranges
\item
  \cref{function-as-a-specialized-class} Function\\
  Added missing restrictions that \lstinline!model!, \lstinline!block!, \lstinline!inner!, \lstinline!outer! cannot be used in a function.
\item
  \cref{positional-or-named-input-arguments-of-functions} Positional or Named Input Arguments of Functions\\
  Corrected formal syntax of a function call
\item
  \cref{initialization-and-declaration-assignments-of-components-in-functions} Initialization and Declaration Assignments of
  Components in Functions\\
  Added the restriction of acylic bindings.
\item
  \cref{records} Records\\
  Mapping of arrays in records to C-structs is removed.
\item
  \cref{bitmap} Bitmap\\
  Defined flipping more precisely.
\item
  \cref{lexical-conventions} Lexical conventions\\
  More precisely defined white-space and comments.
\item
  \cref{grammar} Grammar\\
  Improved/corrected grammar definition
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2 Revision 1}\label{contributors-to-the-modelica-language-version-3-2-revision-1}

The following members of the Modelica Association contributed to the
Modelica 3.2 Revision 1 specification (alphabetical list):

Peter Aronsson, MathCore AB, Linköping, Sweden

Peter Fritzson, PELAB, Linköping University, Linköping, Sweden

Christoph Höger, Technical University of Berlin, Berlin, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Jesper Mattsson, Modelon AB, Lund, Sweden

Hans Olsson, Dassault Systèmes, Lund, Sweden

Adrian Pop, Linköping University, Linköping, Sweden

Martin Sjölund, PELAB, Linköping University, Linköping, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

\section{Modelica 3.2}\label{modelica-3-2}

Modelica 3.2 was released on March 24, 2010. The Modelica 3.2
specification was edited by Hans Olsson, Martin Otter and others.

\subsection{Main Changes in Modelica 3.2}\label{main-changes-in-modelica-3-2}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.2:
\begin{itemize}
\item
  Homotopy function for making it easier to solve initialization
  problems (see \cref{derivative-and-special-purpose-operators-with-function-syntax}).
\item
  Functions as formal inputs to functions (see new \cref{functional-input-arguments-to-functions}).
\item
  Overloaded operators have been refined (see \cref{overloaded-operators}):
  \begin{itemize}
  \item
    A new specialized class \lstinline!operator record! is introduced -- with specialized typing rules (the type is identified by the class name; all other Modelica classes have a structural type
    system where the type is only defined by the public elements).  Overloaded operators can only be defined inside an \lstinline!operator record!.  This change fixes a flaw in Modelica~3.1, since
    the look-up of overloaded operators is performed by the record class name.
  \item
    Inheritance of an \lstinline!operator record! is allowed if defined via a short class definition.  This removes a restriction of operator overloading in Modelica 3.1, e.g., to define derived classes with units for the record elements, like deriving \lstinline!ComplexVoltage! from \lstinline!Complex!.
  \item
    New overloaded element \lstinline!'0'! in order that operator record classes can
    be used as flow variables in connectors.
  \end{itemize}
\item
  Unicode support in description strings, strings in annotations and in
  comments in order to improve Modelica, e.g., for Arabian, Asian or
  Indian users (see grammar changes in \cref{lexical-conventions}). Modelica files are
  UTF-8 encoded, and can start with the UTF-8 encoded byte order mark
  (0xef 0xbb 0xbf) to indicate that it may contain UTF-8 characters;
  this is treated as white-space in the grammar (see \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity}).
\item
  Constants can once again be modified unless declared final -- as this is already used in packages.  (See \cref{constant-expressions}).
\item
  Global name lookup has been introduced (e.g.,
  \lstinline!.Modelica.Constants.pi!), see \cref{global-name-lookup}.
\item
  New C functions \lstinline!ModelicaVFormatMessage! and \lstinline!ModelicaVFormatError!, to
  simplify message formatting in external functions (see \cref{utility-functions})
\item
  Additional annotations allowing:
  \begin{itemize}
  \item
    Inclusion of C-header and object library files in packages and
    referencing them with URIs.\\
    (new annotations \lstinline!IncludeDirectory!, \lstinline!LibraryDirectory!, and
    standardized platform names like \lstinline!win32!; see \cref{annotations-for-external-libraries-and-include-files}; resolves
    ticket \#297).
  \item
    Images in parameter dialogs (new annotation \lstinline!groupImage!; see
    \cref{annotations-for-the-graphical-user-interface}).
  \item
    Start and fixed attributes for variables in parameter dialogs\\
    (new annotation \lstinline!showStartAttribute!; see \cref{annotations-for-the-graphical-user-interface}).
  \item
    Access control for packages to protect intelectual property.\\
    (new annotations \lstinline!Protection,! and \lstinline!License!; see new \cref{annotations-for-access-control-to-protect-intellectual-property}).
  \end{itemize}
\end{itemize}

The following changes in Modelica 3.2 are \emph{not} backwards compatible:
\begin{itemize}
\item
  The new built-in operator name \lstinline!homotopy!. In rare cases this might
  give name clashes in existing models.
\item
  Records with overloaded operations must be declared as \lstinline!operator record! instead of as \lstinline!record!. This is uncritical because tools
  that already support operator overloading will support the Modelica
  3.1 form still for some time.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2}\label{contributors-to-the-modelica-language-version-3-2}

The initial version of \emph{functions as formal inputs to functions} was
proposed by Peter Fritzson.

The definition of header-files and object-libraries with the
\lstinline!IncludeDirectory! and \lstinline!LibraryDirectory! annotations was mainly
developed by Hans Olsson.

The \lstinline!Protection! annotation used for access control is an improved version of existing annotations from Dymola.  The \lstinline!License! annotation was mainly developed by Dag Brück with improvements from Magnus Gäfvert.

The flaw in the operator overloading concept was detected by Sébastien
Furic. He also proposed the basic fix, by using a nominal type system
for records with overloaded operations.

The global name lookup was proposed by Stefan Vorkoetter.

The support for Unicode was initiated by Rui Gao and Hoyoun Kim.\\
Martin Otter, Michael Sielemann and Francesco Casella proposed \lstinline!homotopy!.  Michael Sielemann demonstrated with benchmark problems that non-linear solvers are not able to solve reliably initialization problems and that the \lstinline!homotopy! operator is therefore needed.  He provided a prototype implementation of \lstinline!homotopy! and demonstrated its use on a vehicle dynamics example.  Utilizing the prototype implementation, Francesco Casella demonstrated with a model of a thermal power plant with 390 iteration variables of the initialization problem, that an appropriate usage of \lstinline!homotopy! allows the system to reliably initialized without providing guess values for the iteration variables.  This was a strong indication that \lstinline!homotopy! will indeed improve initialization in Modelica significantly.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.2 specification:

Johan Åkesson, Lund University and Modelon AB, Lund, Sweden

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann, University of Applied Sciences, Bielefeld, Germany

Jonathan Beck, Dassault Systèmes, Paris, France

Torsten Blochwitz, ITI GmbH, Dresden, Germany

David Broman, PELAB, Linköping University, Sweden

Dag Brück, Dassault Systèmes, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Mike Dempsey, Claytex Services Limited, Leamington Spa, U.K.

Karin Dietl, TU Hamburg-Harburg, Germany

Filippo Donida, Politecnico di Milano, Milano, Italy

Hilding Elmqvist, Dassault Systèmes, Lund, Sweden

Peter Fritzson, PELAB, Linköping University, Sweden

Sébastien Furic, LMS International, Roanne. France

Manuel Gräber, TU Braunschweig, Germany

Peter Harman, deltatheta uk limited, U.K.

Anton Haumer, AIT, Vienna, Austria

Carsten Heinrich, Institut für Luft- und Kältetechnik, Dresden, Germany

Dan Henriksson, Dassault Systèmes, Lund, Sweden

Fredrik Karlsson, PELAB, Linköping University, Sweden

Christian Kral, AIT, Vienna, Austria

Imke Krüger, TU Hamburg-Harburg, Hamburg, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Kilian Link, Siemens AB, Erlangen, Germany

Sven Erik Mattsson, Dassault Systèmes, Lund, Sweden

Eric Neuber, ITI GmbH, Dresden, Germany

Hans Olsson, Dassault Systèmes, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Modelon AB, Lund, Sweden

Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany

Bernhard Thiele, German Aerospace Center, Oberpfaffenhofen, Germany

Thorben Vahlenkamp, XRG Simulation, Hamburg, Germany

Eric Thomas, Dassault Aviation, Paris, France

Michael Tiller, Emmeskay, Plymouth, MI, U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,
Switzerland

Dietmar Winkler, Telemark University College, Porsgrunn, Norway

\subsection{Acknowledgments}\label{acknowledgments2}

Partial financial support for the development of Modelica 3.2 by the
following funding agencies has been received:
\begin{itemize}
\item
  The German Ministry BMBF has partially funded DLR, Fraunhofer and
  Siemens (BMBF Förderkennzeichen: 01IS07022F) within the ITEA2 project
  EUROSYSLIB (\url{https://itea4.org/project/eurosyslib.html}).
\item
  The German Ministry BMBF has partially funded ITI GmbH (BMBF
  Förderkennzeichen: 01IS08002K), and the Swedish funding agency VINNOVA
  has partially funded Dynasim (2008-02291), within the ITEA2 project
  MODELISAR (\url{https://itea4.org/project/modelisar.html}).
\item
  The Swedish funding agency VINNOVA has partially funded Linköping
  University (PELAB) within the ITEA2 project OPENPROD
  (\url{https://itea4.org/project/openprod.html}).
\item
  The Swedish Research Council has partially funded Linköping University
  (PELAB) within the project \emph{High-Level Debugging of Equation-Based
  System Modeling \& Simulation Languages}.
\item
  The German Ministry BMBF has partially funded FH Bielefeld (BMBF
  Förderkennzeichen: 01IS09029C) within the ITEA2 project OPENPROD
  (\url{https://itea4.org/project/openprod.html}).
\end{itemize}

\section{Modelica 3.1}\label{modelica-3-1}

Modelica 3.1 was released on May 27, 2009. The Modelica 3.1
specification was edited by Francesco Casella, Rüdiger Franke, Hans
Olsson, Martin Otter, and Michael Sielemann.

\subsection{Main Changes in Modelica 3.1}\label{main-changes-in-modelica-3-1}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.1:
\begin{itemize}
\item
  Overloading of operators like \lstinline!'+'! or \lstinline!'*'! to allow convenient usage of
  user-defined data structures like complex numbers, polynomials,
  transfer functions. Usually, only scalar operations for one data type
  need to be overloaded. All other needed operations, like operations
  between different data types or on arrays of the new data type, can be
  automatically constructed by the tool.
\item
  Stream connector concept to ensure efficient and reliable simulation
  of fluid systems.
\item
  Partitioning models in parts and mapping these parts to execution
  environments. This allows convenient definition of, e.g.,
  Model-in-the-Loop, Software-in-the-Loop, Hardware-in-the-Loop
  Simulation, from the same ``logical'' system, by inheriting from the
  logical system and setting configuration options.
\item
  Arrays in buses (expandable connector) are much better supported.
  Furthermore, variables declared in an expandable connector need not to
  be referenced in the model and are then not available in the
  simulation model.
\item
  The order of classes stored in separate files can be given.
\item
  A restriction of balanced models was removed, so that modifiers to
  connector and record instances can be used and are considered for the
  equation count. This allows, e.g., a much easier implementation of the
  support connector of the Modelica.Mechanics.Rotational/Translational
  libraries.
\item
  A tool that uses \lstinline!missingInnerMessage! to give information may also automatically use the corresponding \lstinline!inner!-component.
\item
  URIs can be used for links in html-documentation and for the Bitmap
  annotation (such as: \filename{modelica://Modelica.Mechanics/C.jpg} for image
  \filename{C.jpg} that is stored in the directory of package
  \lstinline!Modelica.Mechanics!). This allows storing resources in a package on
  persistent storage and to reference resources via package and resource
  names.
\item
  \emph{Annotation} \lstinline!connectorSizing! to automatically enlarge a
  vector of connectors and connect to a free element of this vector when
  a connection line is drawn. This allows improving the user
  convenience, especially for state machine and fluid models.
\item
  \emph{Annotation} \lstinline!inverse! to define inverses of functions. This
  allows a tool to solve non-linear algebraic loops by using the
  user-provided inverse function.
\item
  \emph{Annotations} \lstinline!versionDate!, \lstinline!versionBuild!,
  \lstinline!dateModified!, \lstinline!revisionId! to improve version handling. For
  example, this allows handling of maintenance (bug-fix) releases and
  gives a library developer the possibility to state that a particular
  build is needed for a used library.
\end{itemize}

The following defects have been fixed in the Modelica specification:
\begin{itemize}
\item
  Modifier with subscripts were previously allowed, but not clearly
  defined, not implemented in many tools, and not used in libraries.
  They were thus removed.
\item
  Modelica keywords (\cref{modelica-keywords}) updated.
\item
  Clarification: Exponentiation and array range operator are
  non-associative\\
  (x\^{}y\^{}z or a:b:c:d:e:f are not allowed; parentheses are required)
\item
  Clarification: Restrictions on combining base classes (\cref{restriction-on-combining-base-classes-and-other-elements}).
\item
  Clarification: Execution of an algorithm (new \cref{execution-of-an-algorithm-in-a-model}).
\item
  The default type for arrays sent to external functions has been
  clarified.
\item
  The \lstinline!iconTransformation! defaults to the (diagram)
  \lstinline!transformation!, as was originally the intention.
\item
  The Connection set section was rewritten:
  \begin{itemize}
  \item
    Connection set is clearly defined including examples.
  \item
    The handling of connections involving \lstinline!outer! components was rewritten to ensure that models that seem to have the same connection structure generate the same equations from the \lstinline!connect!-equations.
    Previously a connection between an \lstinline!outer! component and an outside connector would move the connection upwards.
    The implication of this movement was unclear: if it turned the connector into an inside connector (as was likely the intention) it would prohibit default-connection of this normal connector leading to counter-intuitive results; and otherwise it would have no impact.
  \end{itemize}
\item
  Example of using fields was corrected.
\item
  Example with \lstinline!MatrixGain! was corrected.
\item
  Ambiguous annotations after \lstinline!external!-clause were corrected (as already used).
\item
  The \lstinline!reinit! operator can be used multiple times in one algorithm, and the semantics clarified.
\item
  Made clearer that acyclic parameters also hold for one parameter
  equation.
\item
  Changed in the text \emph{attributes} to \emph{prefix}, if a prefix is
  meant.
\end{itemize}

The following changes in Modelica 3.1 are \emph{not} backwards compatible:
\begin{itemize}
\item
  A class-level annotation can only be placed before the closing \lstinline!end! delimiter.
  This is uncritical because tools can easily fix incorrect models (ignore this new rule when reading a model and use this rule when storing the model).
\item
  New Modelica keywords \lstinline!stream! and \lstinline!operator!, a new built-in
  package \lstinline!Subtask! and new-built-in operators \lstinline!inStream! and
  \lstinline!actualStream! have been introduced. In rare cases this might give
  name clashes in existing models.
\item
  Modifiers on declared variables in expandable connectors are no longer
  allowed. This should be uncritical, because expandable connectors are
  usually used for signal buses where the signal is communicated to the
  bus from a block with a connect equation.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.1}\label{contributors-to-the-modelica-language-version-3-1}

The concept of operator overloading was developed by Hans Olsson, based
on work of Dag Brück, Peter Fritzson, and Martin Otter.

The streams concept was developed by Rüdiger Franke based on work from
Francesco Casella and with contributions especially from Hilding
Elmqvist, Sven Erik Mattson, Hans Olsson, Martin Otter and Michael
Sielemann.

The concept to map models to execution environments was developed by
Hilding Elmqvist, Dan Henriksson, Martin Otter, Bernhard Thiele and Sven
Erik Mattson.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.1 specification:

Johan Akesson, Lund University and Modelon AB, Lund, Sweden

Johan Andreasson, Modelon AB, Lund, Sweden

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

Torsten Blochwitz, ITI GmbH, Dresden, Germany

David Broman, Linköping University, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Karin Dietl, TU Hamburg-Harburg, Germany

Filippo Donida, Politecnico di Milano, Milano, Italy

Thomas Doumenc, Dassault Systèmes, Paris, France

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Power Generation, Mannheim, Germany

Peter Fritzson, Linköping University, Sweden

Magnus Gäfvert, Modelon AB, Lund, Sweden

Manuel Gräber, TU Braunschweig, Germany

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Carsten Heinrich, Institut für Luft- und Kältetechnik, Dresden, Germany

Dan Henriksson, Dynasim, Lund, Sweden

Roland Kossel, TLK Thermo GmbH, Braunschweig, Germany

Christian Kral, arsenal research, Vienna, Austria

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Kilian Link, Siemens AB, Erlangen, Germany

Sven Erik Mattsson, Dynasim, Lund, Sweden

Ramine Nikoukhah, INRIA, Paris, France

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

Christoph Richter, TU Braunschweig, Germany

Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany

Bernhard Thiele, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company/Emmeskay, Dearborn/Plymouth, MI,
U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,
Switzerland

Dietmar Winkler, TU Berlin, Germany

\subsection{Acknowledgments}\label{acknowledgments3}

Partial financial support for the development of Modelica 3.1 by the
following funding agencies has been received:
\begin{itemize}
\item
  The German Ministry BMBF has partially funded ABB, DLR, Fraunhofer and
  Siemens (BMBF Förderkennzeichen: 01IS07022F) within the ITEA2 project
  EUROSYSLIB (\url{https://itea3.org/project/eurosyslib.html}).
\item
  The German Ministry BMBF has partially funded ITI GmbH (BMBF
  Förderkennzeichen: 01IS08002K), and the Swedish funding agency VINNOVA
  has partially funded Dynasim (2008-02291), within the ITEA2 project
  MODELISAR (\url{https://itea3.org/project/modelisar.html}).
\item
  The Swedish funding agency VINNOVA has partially funded Linköping
  University (PELAB) within the project \emph{Safe and Secure Modeling and
  Simulation}.
\item
  The Swedish funding agency VR has partially funded Linköping
  University (PELAB) within the project \emph{High-Level Debugging of
  Equation-Based System Modeling \& Simulation Languages}.
\end{itemize}

\section{Modelica 3.0}\label{modelica-3-0}

Modelica 3.0 was released Sept. 5, 2007. The Modelica 3.0 specification
was edited by Peter Fritzson, Hans Olsson, and Martin Otter.

\subsection{Contributors to the Modelica Language, Version 3.0}\label{contributors-to-the-modelica-language-version-3-0}

The Modelica 3.0 specification was newly structured and written by Peter
Fritzson using text from the previous specification and also adding new
explanatory text. This draft specification was afterwards improved by
members of the Modelica Association.

The concept of \emph{balanced models} (which is the major change of the
language) was developed by Hans Olsson with contributions from Martin
Otter, Hilding Elmqvist, and Sven Erik Mattsson. The original
inspiration was from Mike Tiller.

This goes together with making the type interface and sub-typing cleaner
and stricter (the new \cref{interface-or-type-relationships}). This concept fixes flaws of the
language that have been pointed out by Sébastien Furic.

The graphical annotations have been redesigned and improved by Daniel
Hedberg, Erik Areskog, Dag Brück, and Hilding Elmqvist with
contributions from Peter Aronsson and Gerd Kurzbach.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.0 specification:

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

John Batteh, Ford Motor Company, Dearborn, MI, U.S.A.

David Broman, Linköping University, Linköping, Sweden

Peter Bunus, Linköping University, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Thomas Doumenc, Dassault Systèmes, Paris, France

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Sebastien Furic, Imagine, Roanne, France

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Daniel Hedberg, MathCore AB, Linköping, Sweden

Carsten Heinrich, Institut für Luft- und Kältetechnik gGmbH, Dresden,
Germany

Olof Johansson, Linköping University, Linköping, Sweden

Christian Kral, arsenal research, Vienna, Austria

Roland Kossel, TLK Thermo GmbH, Braunschweig, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Christian Kral, arsenal research, Vienna, Austria

Kilian Link, Siemens AB, Erlangen, Germany

José Diaz Lopez, Dynasim AB, Lund, Sweden

Karin Lund, Fachhochschule Ulm, Germany

Håkan Lundvall, Linköping University, Linköping, Sweden

Ludwig Marvan, VA TECH ELIN EBG Elektronik GmbH \& Co, Vienna, Austria

Sven Erik Mattsson, Dynasim, Lund, Sweden

Jakob Mauss, Qtronic GmbH, Berlin, Germany

Chuck Newman, Ford Motor Company, Dearborn, MI, U.S.A.

Kaj Nyström, Linköping University, Linköping, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Markus Plainer, Arsenal Research, Vienna, Austria

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

Christoph Richter, Technical University of Braunschweig, Braunschweig,
Germany

Anders Sandholm, Linköping University, Linköping, Sweden

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company/Emmeskay, Dearborn, MI, U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 3.0}\label{main-changes-in-modelica-3-0}

Modelica 3.0 is a ``clean-up'' version of the Modelica language. For
example, the specification is newly written to define the language in a
better way, errors in the language are fixed, unclear or undefined items
are more precisely described, and mild restrictions are introduced into
the language in order that a Modelica translator can much earlier and
more precisely detect modeling errors. Automated conversion of models to
Modelica 3.0 is possible. Furthermore, a tool can potentially handle
much larger models.

This Modelica version is for the first time (slightly) not backward
compatible to previous versions (all previous versions have been
backward compatible with exception of tiny issues as newly introduced
keywords). As a result, e.g., ``unsafe'' models of previous Modelica
versions are no longer valid. It is expected that Modelica tool vendors
provide (semi-) automatic mechanisms for conversion of models and
libraries.

The following main changes in Modelica 3.0 are \emph{not} backwards compatible:
\begin{itemize}
\item
  Restrictions to connectors (see \cref{restrictions-of-connections-and-connectors}): For each non-partial
  connector class the number of flow variables shall be equal to the
  number of variables that are neither parameter, constant, input,
  output, nor flow. For example, the following connector is illegal in
  Modelica 3:
\begin{lstlisting}[language=modelica]
connector notValid // illegal connector
  Real r1;
  Real r2;
  flow Real r3;
end notValid;
\end{lstlisting}
\item
  In a non-partial \lstinline!model! or \lstinline!block!, all non-connector inputs of \lstinline!model! or \lstinline!block! components must have binding equations.
\item
  A component declared with the \lstinline!inner! or \lstinline!outer! prefix shall not be of a
  class having top-level public connectors containing inputs.
\item
  Modifiers for components shall only contain redeclarations of
  replaceable elements and binding equations for parameters, constants,
  inputs and variables having a default binding equation.
\item
  All non-partial \lstinline!model! and \lstinline!block! classes must be locally balanced (see \cref{balanced-models}).  This means that the local number of unknowns equals the local equation size. Together with other restrictions, this leads to the strong property that a simulation model is always globally balanced (i.e., the number of unknowns is equal to the number of equations).
\item
  Prefixes \lstinline!input!, \lstinline!output!, \lstinline!inner!, \lstinline!outer!, \lstinline!flow! are not allowed in a record
\item
  The built-in operators \lstinline!abs! and \lstinline!sign! do no longer
  generate events but are implicitly defined with a \lstinline!noEvent!
  operator.
\item
  The \lstinline[language=grammar]!constraining-clause! of a replaceable class or component is changed from keyword \lstinline!extends! to the new keyword \lstinline!constrainedby! (since the \lstinline!extends! keyword could lead to the wrong impression that the redeclared model must inherit from the constraining class, but this is not the case).
\item
  The \lstinline!isPresent! construct, which was not implemented in tools, was removed.
\end{itemize}

The following changes in the Modelica 3.0 graphical annotations are also \emph{not} backwards compatible:
\begin{itemize}
\item
  Changed the definition of icon placement (record Transformation), so
  that the actual coordinates of the icon of a model instance are
  defined in the class where the instance is defined and no longer in
  the class where the icon is defined (this was a flaw in the Modelica
  2.0 graphical annotations).
\item
  Improved the definition of the rotation of a graphical primitive.
\item
  Change \lstinline!fontSize! unit from \lstinline!DrawingUnit! to \lstinline!pt! (since this is the usual
  unit for fonts).
\end{itemize}

The following main changes in Modelica 3.0 are \emph{backwards compatible}:
\begin{itemize}
\item
  New element-wise operators: \lstinline!.+!, \lstinline!.-!, \lstinline!.*!, \lstinline!./!, \lstinline!.^!.
\item
  A third argument \lstinline!AssertionLevel! to built-in function \lstinline!assert($\ldots$)! in order that warnings can optionally be defined.
\item
  New annotations \crefnameref{vendor-specific-annotations}:\\
  In this section it is precisely defined how vendor-specific
  annotations should be marked. Any tool shall save files with all
  standard annotations (defined in \cref{annotations}) and all vendor-specific
  annotations intact. The advantage is that a typo in non-vendor
  annotations can now be detected and marked as an error, whereas in
  previous versions this had to be ignored.
\item
  New annotation in \crefnameref{annotations-for-documentation}:\\
  \lstinline!preferredView = info!, \lstinline!diagram! or \lstinline!text!
\item
  New annotations in \crefnameref{function-inlining-and-event-generation}, \crefnameref{derivatives-and-inverses-of-functions}, and \crefnameref{annotations-for-symbolic-processing}:\\
  \lstinline!Evaluate!, \lstinline!HideResult!, \lstinline!Inline!, \lstinline!LateInline!, \lstinline!smoothOrder!
\item
  New annotation \cref{modelica:experiment}:\\
  \lstinline!StartTime!, \lstinline!StopTime!, \lstinline!Tolerance! to define important parameters of an experiment setup.
\item
  New annotations for graphical annotations in \cref{annotations-for-graphical-objects}:\\
  New attribute \lstinline!Smooth = enumeration(None, Bezier)! for graphical objects
  and connection lines (Bezier defines a Bezier spline).\\
  New attribute \lstinline!visible! in \lstinline!record Placement! allows making a graphical
  annotation invisible (e.g., after inheritance).\\
  New attributes \lstinline!startAngle!, \lstinline!endAngle! in record ellipse to define part
  of an ellipse.\\
  New layer specific annotations \lstinline!IconMap! and \lstinline!DiagramMap! for \lstinline!extends!.\\
  New attribute \lstinline!horizontalAlignment! to the \lstinline!Text! record to define the horizontal alignment of text.
\item
  New annotations for schematic animation and interactive user input in
  \cref{annotations-for-graphical-objects}:\\
  \lstinline!DynamicSelect! to modify annotation literals by the actual values of variables.\\
  \lstinline!OnMouseDownSetBoolean!, \lstinline!OnMouseUpSetBoolean!, \lstinline!OnMouseMoveXSetReal!,
  \lstinline!OnMouseMoveYSetReal!, \lstinline!OnMouseDownEditReal!, \lstinline!OnMouseDownEditString! to
  interactively set the variable of a class during simulation.
\end{itemize}

The following errors have been fixed in the Modelica specification:
\begin{itemize}
\item
  Syntax rule for a function call (e.g., according to the grammar in
  Modelica 2.2 a function call of the form
  \lstinline!Modelica.Math.Matrices.eig($\ldots$)! was invalid because the function name
  could not have `\lstinline!.!'. However, all Modelica tools supported the
  desired ``full Modelica name'' also for function calls).
\end{itemize}

\section{Modelica 2.2}\label{modelica-2-2}

Modelica 2.2 was released February 2, 2005. The Modelica 2.2
specification was edited by Hans Olsson, Michael Tiller and Martin
Otter.

\subsection{Contributors to the Modelica Language, Version 2.2}\label{contributors-to-the-modelica-language-version-2-2}

\indent\indent
Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

John Batteh, Ford Motor Company, Dearborn, MI, U.S.A.

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Christian Kral, arsenal research, Vienna, Austria

Sven Erik Mattsson, Dynasim, Lund, Sweden

Chuck Newman, Ford Motor Company, Dearborn, MI, U.S.A.

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Markus Plainer, Arsenal Research, Vienna, Austria

Adrian Pop, Linköping University, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.2}\label{main-changes-in-modelica-2-2}

The main changes in Modelica 2.2 are:
\begin{itemize}
\item
  Conditional component declarations to ignore component declarations
  depending on a parameter expression. Connection equations that
  reference a component that is no longer present, are ignored.
\item
  In redeclarations some parts of the original declaration are
  automatically inherited by the new declaration. This is intended to
  make it easier to write declarations by not having to repeat common
  parts of the declarations, and does in particular apply to attributes
  that must be identical.
\item
  Recursive \lstinline!inner!/\lstinline!outer! definitions to define hierarchically structured
  \lstinline!inner!/\lstinline!outer! declarations that can communicate with each other: An
  element declared with both the prefixes \lstinline!inner! and \lstinline!outer! conceptually
  introduces two declarations with the same name, one that follows the
  rules for \lstinline!inner! and another that follows the rules for \lstinline!outer!.
\item
  A non-input array component declared in a function with a dimension size specified by colon (\lstinline!:!) and no declaration assignment, can change size in the function in a simple and convenient way.
\item
  A new type of connector, called \lstinline!expandable connector! was
  introduced. This connector has less strict requirements about name
  matching of connected connectors and can be used conveniently in
  situations that required replaceable connectors previously. One main
  application area is to construct signal buses of complex systems.
\item
  The derivative operator \lstinline!der(expr)! may have an expression as argument
  and not only a variable name as previously, e.g., \lstinline!der(m*h)! is
  interpreted as \lstinline!der(m)*h + m*der(h)!.
\item
  A function can be defined as partial derivative of another function,
  e.g.:
\item
  ''\lstinline!function Gibbs_T = der(Gibbs,T)!'' is a function that computes the
  partial derivative of function Gibbs with respect to its input
  argument T.
\item
  External functions may have the new attribute \lstinline!"builtin"!, additionally to \lstinline!"C"! or \lstinline!"FORTRAN 77"!.  The \lstinline!"builtin"! specification is only used for functions that are defined to be built-in in the Modelica language.  The external function call mechanism for \lstinline!"builtin"! functions is implementation-defined.
\end{itemize}

The language changes are backward compatible.

\section{Modelica 2.1}\label{modelica-2-1}

Modelica 2.1 was released January 30, 2004. The Modelica 2.1
specification was edited by Hans Olsson and Martin Otter.

\subsection{Contributors to the Modelica Language, Version 2.1}\label{contributors-to-the-modelica-language-version-2-1}

\indent\indent
Mikael Adlers, MathCore, Linköping, Sweden

Peter Aronsson, Linköping University, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

Peter Bunus, Linköping University, Sweden

Jonas Eborn, United Technologies Research Center, Hartford, U.S.A.

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Olof Johansson, Linköping University, Sweden

Karin Lunde, R.O.S.E. Informatik GmbH, Heidenheim, Germany

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Levon Saldamli, Linköping University, Sweden

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, United Technologies Research Center, Hartford,
U.S.A.

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.1}\label{main-changes-in-modelica-2-1}

The main changes in Modelica 2.1 are:
\begin{itemize}
\item
  Arrays and array indices of Enumerations (needed, e.g., in the
  \lstinline!Electrical.Digital! library currently under development).
\item
  Connections into hierarchical connectors (needed, e.g., for convenient
  implementation of buses).
\item
  Optional output arguments of Modelica functions. The presence of
  actual input and/or output arguments can be inquired with the new
  built-in function \lstinline!isPresent!. The previous built-in function and
  attribute \lstinline!enable! was removed.
\item
  Making the default constraining type more useful by inheriting the
  base constraining type automatically to modifications.
\item
  Enhanced redeclaration as needed, e.g., in the Modelica.Media library
  under development (e.g., \lstinline!redeclare model name! or \lstinline!model extends name (<modifications>)!).
\item
  Handling of overdetermined connectors (needed, e.g., for multi-body
  systems and electrical power systems) including the new built-in
  package \lstinline!Connections! with operators \lstinline!Connections.branch!,
  \lstinline!Connections.root!, \lstinline!Connections.potentialRoot!, \lstinline!Connections.isRoot!.
\item
  Statement \lstinline!break! in the \lstinline!while!-statement of an algorithm section.
\item
  Statement \lstinline!return! in a Modelica function.
\item
  Built-in function \lstinline!String! to provide a string representation of \lstinline!Boolean!, \lstinline!Integer!, \lstinline!Real! and enumeration types.
\item
  Built-in function \lstinline!Integer! to provide the \lstinline!Integer! representation of an enumeration type.
\item
  Built-in function \lstinline!semiLinear! to define a characteristics with two
  slopes and a set of rules for symbolic transformations, especially
  when the function becomes underdetermined (this function is used in
  the Modelica Fluid library under development to define reversing flow
  in a mathematically clean way).
\item
  More general identifiers by having any character in single quotes,
  e.g., \lstinline!'+'! or '123.456\#1' are valid identifiers. \lstinline!'x'! and \lstinline!x! are
  different identifiers. This is useful for a direct mapping of product
  identifiers to model names and for having the usual symbols for
  digital electrical signals as enumerations (such as \lstinline!'+'!, \lstinline!'-'!, \lstinline!'0'!,
  \lstinline!'1'!).
\item
  New annotations:
\begin{itemize}
\item For version handling of libraries and models (\lstinline!version!, \lstinline!uses!,
\lstinline!conversion!),
\item for revision logging (\lstinline!revisions!),
\item for using a Modelica name as link in a HTML documentation text,
\item for convenient \lstinline!inner! declaration in a GUI (\lstinline!defaultComponentName!,
\lstinline!defaultComponentPrefixes!),
\item for parameter menu structuring (\lstinline!Dialog!, \lstinline!enable!, \lstinline!tab!,
\lstinline!group!), and
\item for library specific error messages (\lstinline!missingInnerMessage!,
\lstinline!unassignedMessage!).
\end{itemize}
\end{itemize}
Fixing some minor errors in the grammar and semantic specification.

The language changes are backward compatible, except for the introduction of the new keywords \lstinline!break! and \lstinline!return!, the new built-in package \lstinline!Connections! and the removing of built-in function and attribute \lstinline!enable!.

\section{Modelica 2.0}\label{modelica-2-0}

Modelica 2.0 was released January, 30 2002, and the draft was released
on December 18 in 2001. The Modelica 2.0 specification was edited by
Hans Olsson. Modelica is a registered trademark owned by the Modelica
Association since November 2001.

\subsection{Contributors to the Modelica Language, Version 2.0}\label{contributors-to-the-modelica-language-version-2-0}

\indent\indent
Peter Aronsson, Linköping University, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld

Peter Beater, University of Paderborn, Germany

Dag Brück, Dynasim, Lund, Sweden

Peter Bunus, Linköping University, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Vadim Engelson, Linköping University, Sweden

Peter Fritzson, Linköping University, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg

Pavel Grozman, Equa, Stockholm, Sweden

Johan Gunnarsson, MathCore, Linköping

Mats Jirstrand, MathCore, Linköping

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Levon Saldamli, Linköping University, Sweden

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.0}\label{main-changes-in-modelica-2-0}

A detailed description of the enhancements introduced by Modelica 2.0 is
given in the papers
\begin{itemize}
\item
  M. Otter, H. Olsson: New Features in Modelica 2.0. 2nd International
  Modelica Conference, March 18-19, DLR Oberpfaffenhofen, Proceedings,
  pp. 7.1--7.12, 2002. This paper can be downloaded from
  \url{https://www.modelica.org/events/Conference2002/papers/p01_Otter.pdf}
\item
  Mattsson S. E., Elmqvist H., Otter M., and Olsson H.: Initialization
  of Hybrid Differential-Algebraic Equations in Modelica 2.0. 2nd
  International Modelica Conference, March 18-19, DLR Oberpfaffenhofen,
  Proceedings, pp. 9--15, 2002. This paper can be downloaded from
  \url{https://www.modelica.org/events/Conference2002/papers/p02_Mattsson.pdf}
\end{itemize}

The main changes in Modelica 2.0 are:
\begin{itemize}
\item
  Full specification of initialization in order to compute consistent
  initial values of all variables appearing in a model before performing
  an operation, such as simulation or linearization.
\item
  Specified the graphical appearance of Modelica object diagrams,
  thereby ensuring portability of model topology information and
  improving the previous informal graphical description, e.g., with
  separate icon and diagram positions.
\item
  Enumeration types to allow the definition of options and properties in
  an understandable, safe and efficient way.
\item
  Support for (optional) explicit preference in state-selection in order
  that a modeler can incorporate application specific knowledge to guide
  the solution process, e.g., for real-time simulation.
\item
  Iterators in array constructors and reduction operators, to support
  more powerful expressions, especially in declarations, in order to
  avoid inconvenient and less efficient local function definitions.
\item
  Support for generic formulation of blocks applicable to both scalar
  and vector connectors, connection of (automatically) vectorized
  blocks, and simpler input/output connectors. This allows significant
  simplifications of the input/output block library of Modelica, e.g.,
  since only scalar versions of all blocks have to be provided.
  Furthermore, new library components can be incorporated more easily.
\item
  Record constructor to allow, e.g., the construction of data sheet
  libraries.
\item
  Functions with mixed positional and named arguments. Optional results
  and default arguments make the same function fit for beginners and
  expert users.
\item
  Additional utilities for external C functions that are interfaced to
  Modelica models, especially supporting external functions returning
  strings and external functions with internal memory (e.g., to
  interface user-defined tables, property databases, sparse matrix
  handling, hardware interfaces).
\item
  Added an index, and specification of some basic constructs that had previously not formally be defined, such as \lstinline!while!-clauses, \lstinline!if!-clauses.
\end{itemize}

The language changes are backward compatible, except for the introduction of the new keyword enumeration and the removal of the operator \lstinline!analysisType!.  The library change of the block library which will become available soon requires changes in user-models.

\section{Modelica 1.4}\label{modelica-1-4}

Modelica 1.4 was released December 15, 2000. The Modelica Association
was formed in Feb. 5, 2000 and is now responsible for the design of the
Modelica language. The Modelica 1.4 specification was edited by Hans
Olsson and Dag Brück.

\subsection{Contributors to the Modelica Language, Version 1.4}\label{contributors-to-the-modelica-language-version-1-4}

\indent\indent
Bernhard Bachmann, Fachhochschule Bielefeld, Germany

Peter Bunus, MathCore, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Vadim Engelson, Linköping University, Sweden

Jorge Ferreira, University of Aveiro, Portugal

Peter Fritzson, Linköping University, Linköping, Sweden

Pavel Grozman, Equa, Stockholm, Sweden

Johan Gunnarsson, MathCore, Linköping, Sweden

Mats Jirstrand, MathCore, Linköping, Sweden

Clemens Klein-Robbenhaar, Germany

Pontus Lidman, MathCore, Linköping, Sweden

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Tommy Persson, Linköping University, Sweden

Levon Saldamli, Linköping University, Sweden

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans-Jürg Wiesmann, ABB Corporate Research Ltd., Baden, Switzerland

\subsection{Contributors to the Modelica Standard Library}\label{contributors-to-the-modelica-standard-library}

% https://tex.stackexchange.com/questions/31555/how-can-i-indent-the-paragraphs-which-follow-a-heading
\indent\indent
Peter Beater, University of Paderborn, Germany

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Hubertus Tummescheit, Lund Institute of Technology, Sweden

\subsection{Main Changes in Modelica 1.4}\label{main-changes-in-modelica-1-4}

\begin{itemize}
\item
  Removed declare-before-use rule. This simplifies graphical user
  environments, because there exists no order of declarations when
  components are graphically composed together.
\item
  Refined package concept by introducing encapsulated classes and import mechanism.
  Encapsulated classes can be seen as ``self-contained units'':
  When copying or moving an encapsulated class, at most the \lstinline!import!-clauses in this class have to be changed.
\item
  Refined \lstinline!when!-clause:
  The \lstinline[morekeywords={[2]{nondiscrete}}]!nondiscrete!\index{nondiscrete@\robustinline{nondiscrete} (removed keyword)} keyword is removed, equations in \lstinline!when!-clauses must have a unique variable name on left hand side variable and the exact mapping of \lstinline!when!-clauses to equations is defined.
  As a result, \lstinline!when!-clauses are now precisely defined without referring to a sorting algorithm and it is possible to handle algebraic loops between \lstinline!when!-clauses with different conditions and between \lstinline!when!-clauses and the continuous-time part of a model.
  The \lstinline!discrete! keyword is now optional, simplifying the library development because only one type of connector is needed and not several types which do contain or do not contain the discrete prefix on variables.
  Additionally, \lstinline!when!-clauses in algorithm sections may have \lstinline!elsewhen!-clauses which simplifies the definition of priorities between \lstinline!when!-clauses.
\item
  For replaceable declarations: allowed \lstinline[language=grammar]!constraining-clause!, and annotations listing suitable redeclarations.
  This allows a graphical user environment to automatically build menus with meaningful choices.
\item
  Functions can specify their derivative. This allows, e.g., the
  application of the Pantelides algorithm to reduce the index of a DAE
  also for external functions.
\item
  New built-in operator \lstinline!rem! (remainder) and the built-in operators
  div, mod, ceil, floor, integer, previously only allowed to be used in
  \lstinline!when!-clauses can now be used everywhere, because state events are
  automatically generated when the result value of one of these operator
  changes discontinuously.
\item
  Quantity attribute also for base types \lstinline!Boolean!, \lstinline!Integer!, \lstinline!String! (and not only for \lstinline!Real!), in order to allow abstracted variables to refer to physical quantities (e.g., \lstinline!Boolean i(quantity="Current")! is true if current is flowing and is false if no current is flowing).
\item
  \lstinline!final! keyword also allowed in declaration, to prevent modification.
  Example:
\end{itemize}

\begin{lstlisting}[language=modelica]
model A
  Real x[:];
  final Integer n=size(x,1);
end A;
\end{lstlisting}

\begin{itemize}
\item
  Several minor enhancements, such as usage of dot-notation in
  modifications\\
  (e.g., \lstinline!A x(B.C=1, B.D=2)! is the same as \lstinline!A x(B(C=1, D=2))!).
\item
  Internally restructured specification.
\end{itemize}

Modelica 1.4 is backwards compatible with Modelica 1.3, with the exception of (1) some exotic cases where different results are achieved with the removed ``declare-before-use-rule'' and the previous declaration order, (2) \lstinline!when!-clauses in equations sections, which use the general form \lstinline!expr1 = expr2! (now only \lstinline!v = expr! is allowed + some special cases for functions), (3) some exotic cases where a \lstinline!when!-clause may be no longer evaluated at the initial time, because the initialization of the when-condition is now defined in a more meaningful way (before Modelica 1.4, every condition in a \lstinline!when!-clause has a ``previous'' value of false), and (4) models containing the \lstinline[morekeywords={[2]{nondiscrete}}]!nondiscrete! keyword which was removed.

\section{Modelica 1.3 and Older Versions.}\label{modelica-1-3-and-older-versions}

Modelica 1.3 was released December 15, 1999.

\subsection{Contributors up to Modelica 1.3}\label{contributors-up-to-modelica-1-3}

The following list contributors and their affiliations at the time when Modelica 1.3 was released.

Hilding Elmqvist, Dynasim AB, Lund, Sweden

Bernhard Bachmann, ABB Corporate Research Center Heidelberg

Francois Boudaud, Gaz de France, Paris, France

Jan Broenink, University of Twente, Enschede, Netherlands

Dag Brück, Dynasim AB, Lund, Sweden

Thilo Ernst, GMD FIRST, Berlin, Germany

Ruediger Franke, ABB Network Partner Ltd. Baden, Switzerland

Peter Fritzson, Linköping University, Sweden

Alexandre Jeandel, Gaz de France, Paris, France

Pavel Grozman, Bris Data AB, Stockholm, Sweden

Kaj Juslin, VTT, Espoo, Finland

David Kågedal, Linköping University, Sweden

Mattias Klose, Technical University of Berlin, Germany

Nathalie Loubere, Gaz de France, Paris, France

Sven-Erik Mattsson, Dynasim AB, Lund, Sweden

Peter J. Mosterman, DLR Oberpfaffenhofen, Germany

Henrik Nilsson, Linköping University, Sweden

Hans Olsson, , Dynasim AB, Lund, Sweden

Martin Otter, DLR Oberpfaffenhofen, Germany

Per Sahlin, Bris Data AB, Stockholm, Sweden

Andrée Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans Vangheluwe, University of Gent, Belgium

\subsection{Main Changes in Modelica 1.3}\label{main-changes-in-modelica-1-3}

Modelica 1.3 was released December 15, 1999.
\begin{itemize}
\item
  Defined connection semantics for \lstinline!inner!/\lstinline!outer! connectors.
\item
  Defined semantics for protected element.
\item
  Defined that least variable variability prefix wins.
\item
  Improved semantic definition of array expressions.
\item
  Defined scope of \lstinline!for!-loop variables.
\end{itemize}

\subsection{Main Changes in Modelica 1.2}\label{main-changes-in-modelica-1-2}

Modelica 1.2 was released June 15, 1999.
\begin{itemize}
\item
  Changed the external function interface to give greater flexibility.
\item
  Introduced \lstinline!inner!/\lstinline!outer! for dynamic types.
\item
  Redefined \lstinline!final! keyword to only restrict further
  modification.
\item
  Restricted redeclaration to replaceable elements.
\item
  Defined semantics for \lstinline!if!-clauses.
\item
  Defined allowed code optimizations.
\item
  Refined the semantics of event-handling.
\item
  Introduced \lstinline!fixed! and \lstinline!nominal! attributes.
\item
  Introduced \lstinline!terminate! and \lstinline!analysisType!.
\end{itemize}

\subsection{Main Changes in Modelica 1.1}\label{main-changes-in-modelica-1-1}

Modelica 1.1 was released in December 1998.

Major changes:
\begin{itemize}
\item
  Specification as a separate document from the rationale.
\item
  Introduced prefixes \lstinline!discrete! and \lstinline[morekeywords={[2]{nondiscrete}}]!nondiscrete!.
\item
  Introduced \lstinline!pre! and \lstinline!when!.
\item
  Defined semantics for array expressions.
\item
  Introduced built-in functions and operators (only connect was present in Modelica 1.0).
\end{itemize}

\subsection{Modelica 1.0}\label{modelica-1-0}

Modelica 1, the first version of Modelica, was released in September
1997, and had the language specification as a short appendix to the
rationale.
