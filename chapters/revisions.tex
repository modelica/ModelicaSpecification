\chapter{Modelica Revision History}\label{modelica-revision-history}

This appendix describes the history of the Modelica Language Design, and
its contributors. This appendix is just present for historic reasons and
is not normative. The current version of this document is available from
\url{https://www.modelica.org/documents}.

\section{Modelica 3.4}\label{modelica-3-4}
Modelica 3.4 was released April 10, 2017. The Modelica 3.4 specification
was edited by Hans Olsson.

\subsection{Main changes in Modelica 3.4}\label{main-changes-in-modelica-3-4}

The following Modelica Change Proposals are backward compatible
extensions added in 3.4:
\begin{itemize}
\item
  Automatic conversions between different versions (MCP-0014),
  \cref{version-handling}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1622}{\#1622}.
\item
  Flattening is clearly specified (MCP-0019), \cref{simple-name-lookup} and \cref{flattening-process}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1829}{\#1829}.
\item
  Convert from Integer to Enumeration (MCP-0022), primarily
  \cref{type-conversion-of-integer-to-enumeration-values}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1842}{\#1842}.
\item
  Explicitly casting a Model to Record (MCP-0023), \cref{casting-to-record}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1953}{\#1953}.
\item
  Initialization of Clocked Continuous States (MCP-0024),
  \cref{clocked-discrete-time-and-clocked-discretized-continuous-time-partition},
  \cref{initialization-of-clocked-partitions} and \cref{other-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2007}{\#2007}.
\item
  An added option to Ellipse Annotation to draw only an arc (MCP-0026),
  \cref{ellipse}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2045}{\#2045}.
\item
  Allowing mixed Real and non-Real Record Derivatives (MCP-0028),
  \cref{using-the-derivative-annotation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2134}{\#2134}.
\end{itemize}

The definition of pure functions was refined, in particular to restore
backwards compatibility with Modelica 3.2, \cref{pure-modelica-functions}. Ticket
\href{https://github.com/modelica/ModelicaSpecification/issues/1937}{\#1937}.

The following minor improvements were made (starting from 3.3 Revision 1):
\begin{itemize}
\item
  Clarified simulation model, \cref{scope-of-the-specification}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/730}{\#730}.
\item
  Clarified structural analysis, \cref{scope-of-the-specification}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/588}{\#588}.
\item
  Clarified meta-symbols, \cref{notation-and-grammar} and 2.3.1. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1616}{\#1616}.
\item
  Typo, \cref{identifiers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1702}{\#1702}.
\item
  Clarified newline, \cref{strings}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1479}{\#1479}.
\item
  Allow `\lstinline!"!' and define it to be equal to `\lstinline!\"!' (and
  similarly for `\lstinline!\?!'), \cref{identifiers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1176}{\#1176}.
\item
  Clarified that built-in functions in the specification, \cref{built-in-intrinsic-operators-with-function-syntax}
  and 12.5. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1608}{\#1608}.
\item
  Clarified named arguments for builtin operators, in particular
  spatialDistribution, \cref{derivative-and-special-purpose-operators-with-function-syntax} and \cref{positional-or-named-input-arguments-of-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2002}{\#2002}.
\item
  Clarified that semiLinear is continuous, \cref{derivative-and-special-purpose-operators-with-function-syntax}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/112}{\#112}.
\item
  Corrected spelling, \cref{derivative-and-special-purpose-operators-with-function-syntax}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1828}{\#1828}.
\item
  Corrected typo in code and reformulated description, \cref{spatialdistribution}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1588}{\#1588},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1729}{\#1729}, and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2166}{\#2166}.
\item
  Corrected typo for events, \cref{modelica:smooth}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1657}{\#1657}.
\item
  Clarified sample operator, \cref{event-related-operators-with-function-syntax}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/677}{\#677}.
\item
  Additional functions give parameter expression, \cref{parameter-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1082}{\#1082}.
\item
  Clarified \lstinline!ExternalObject!, \cref{prefix-rules}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1546}{\#1546}.
\item
  Simplified rules type prefixes for structured components, \cref{prefix-rules}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1686}{\#1686}.
\item
  Clarified that unexpanded bindings shall be unexpanded, \cref{acyclic-bindings-of-constants-and-parameters}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2153}{\#2153}.
\item
  Clarified conditional components, \cref{conditional-component-declaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2057}{\#2057}.
\item
  Improved example to avoid using class, \cref{local-class-definitions-nested-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/553}{\#553}.
\item
  Clarify inheritance from predefines types, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1250}{\#1250}.
\item
  Allow \lstinline!connector! inheriting from \lstinline!operator record!, \cref{specialized-classes}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1714}{\#1714}.
\item
  Clarify restrictions on record components, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1615}{\#1615}.
\item
  Clarify that only functions may have external-clause, \cref{specialized-classes} and \cref{function-as-a-specialized-class}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/2014}{\#2014}.
\item
  Clarified equation count for operator record, \cref{balanced-models}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/866}{\#866}.
\item
  Clarified restriction on attributes, \cref{predefined-types-and-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1426}{\#1426}.
\item
  Clarified how reserved the different built-in types are, \cref{predefined-types-and-classes}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1538}{\#1538}.
\item
  Removed restriction on nominal and explained purpose, \cref{real-type}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1445}{\#1445}.
\item
  Added unbounded to Real, \cref{real-type} and \cref{attributes-start-fixed-nominal-and-unbounded}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/926}{\#926}.
\item
  Added fixed-attribute for String, \cref{string-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1797}{\#1797}.
\item
  Clarified and corrected example in \cref{enumeration-types}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1849}{\#1849} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2150}{\#2150}.
\item
  Clarified nominal attribute, \cref{attributes-start-fixed-nominal-and-unbounded}
  and \cref{stream-operator-instream-and-connection-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1877}{\#1877}.
\item
  Added that \lstinline!Connections! is builtin package, \cref{connections}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1883}{\#1883}.
\item
  Clarified lookup-order regarding import, \cref{simple-name-lookup}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1573}{\#1573}.
\item
  Extend calling functions through component to array case, \cref{composite-name-lookup} and \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1613}{\#1613}.
\item
  Clarified existing use of automatic inner declarations, \cref{instance-hierarchy-name-lookup-of-inner-declarations}
  and \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1551}{\#1551} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/1749}{\#1749}.
\item
  Removed restriction on array size for modifiers, \cref{interface-compatibility-or-subtyping}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1432}{\#1432}.
\item
  Clarified that 2/3 and 2\^{}(-3) are Real, \cref{type-compatible-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1647}{\#1647}.
\item
  Clarified that the external-clause is inherited, \cref{inheritance-extends-clause}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/789}{\#789}.
\item
  Further clarified order for multiple inheritance, \cref{instantiation} and
  \cref{inheritance-extends-clause}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2015}{\#2015}.
\item
  Clarified inheritance restrictions, \cref{restrictions-on-the-kind-of-base-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1451}{\#1451}.
\item
  Restricted merging of modifiers, \cref{merging-of-modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/791}{\#791}.
\item
  Clarified each especially for nested arrays, \cref{single-modification} and \cref{modifiers-for-array-elements}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1596}{\#1596}.
\item
  Clarified replaceable with array sizes on types, \cref{redeclaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1251}{\#1251}.
\item
  Corrected and moved example, \cref{redeclaration} and \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1034}{\#1034}.
\item
  Clarified \lstinline!redeclare class extends B!, \cref{the-class-extends-redeclaration-mechanism}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/462}{\#462} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/709}{\#709}.
\item
  Corrected example, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1725}{\#1725}.
\item
  Clarified description and annotation on constraining-clause, \cref{constraining-clause-annotations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/512}{\#512}.
\item
  Corrected typo, \cref{annotation-choices-for-suggested-redeclarations-and-modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1770}{\#1770}.
\item
  Clarified for-equation with types, \cref{for-equations-repetitive-equation-structures}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/915}{\#915}.
\item
  Clarified event generation, \cref{events-and-synchronization}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2114}{\#2114}.
\item
  Further clarified \lstinline!initial()! for when-clauses, \cref{initialization-initial-equation-and-initial-algorithm}, and indicated that this appendix is not normative.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1852}{\#1852}.
\item
  Clarified using \lstinline!start! attribute for parameters, \cref{initialization-initial-equation-and-initial-algorithm}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2136}{\#2136}.
\item
  Clarified that states for first order ODE, \cref{the-number-of-equations-needed-for-initialization}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/937}{\#937}.
\item
  Clarified adding \lstinline!input!/\lstinline!output! prefix for expandable connector variables, \cref{expandable-connectors}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/829}{\#829}.
\item
  Clarified creating elements in expandable connectors, \cref{expandable-connectors}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/428}{\#428}.
\item
  Corrected expandable connector example, \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1763}{\#1763}.
\item
  Clarified that stream variables do not generate equations, \cref{generation-of-connection-equations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1584}{\#1584}.
\item
  Restrict that stream only connects to stream, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/796}{\#796}.
\item
  Clarified section heading, \cref{balancing-restriction-and-size-of-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/727}{\#727}.
\item
  Clarified vector arguments for operators in \cref{overconstrained-equation-operators-for-connection-graphs}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1590}{\#1590}.
\item
  Corrected example, \cref{an-overdetermined-connector-for-power-systems}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2143}{\#2143}.
\item
  Clarified return type for reduction expressions, \cref{reduction-functions-and-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/981}{\#981}.
\item
  Extended reduction expression sum to operator records, \cref{reduction-functions-and-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1897}{\#1897}.
\item
  Clarified table in \cref{reduction-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1722}{\#1722}.
\item
  Match parenthesis, \cref{array-constructor-with-several-iterators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1558}{\#1558}.
\item
  Recommend better alternative for generating vector, \cref{vector-construction}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1837}{\#1837}.
\item
  Defined unary operators, \cref{array-element-wise-addition-subtraction-and-string-concatenation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2027}{\#2027}.
\item
  Allow missing trailing indices, sections \cref{array-indexing} and \cref{slice-operation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1603}{\#1603}.
\item
  Clarified that element-wise division gives real result,
  \cref{array-element-wise-division}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1119}{\#1119}.
\item
  Removed misleading comment, \cref{execution-of-an-algorithm-in-a-model}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/938}{\#938}.
\item
  Clarified how assignment works for multi-returning functions,
  \cref{assignments-from-called-functions-with-multiple-results}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1921}{\#1921}.
\item
  Clarified no equations and initial algorithms in functions,
  \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2160}{\#2160}.
\item
  Clarified assigning to record variables with bindings in functions,
  \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2016}{\#2016}.
\item
  Clarified initialization of variables in functions, \cref{initialization-and-declaration-assignments-of-components-in-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1708}{\#1708}.
\item
  Standarize current practice of using = instead of := for bindings in
  functions, \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1595}{\#1595}.
\item
  Clarified function partial evaluation, \cref{function-partial-application}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/647}{\#647}.
\item
  Clarified initialization of record components in functions,
  \cref{initialization-and-declaration-assignments-of-components-in-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1230}{\#1230}.
\item
  Clarified flexible array sizes, \cref{flexible-array-sizes-and-resizing-of-arrays-in-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2158}{\#2158}.
\item
  Clarified name of output for record constructor in \cref{record-constructor-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/366}{\#366}.
\item
  Clarified derivatives for functions in several ways, \cref{using-the-derivative-annotation}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/985}{\#985},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1543}{\#1543},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1544}{\#1544},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1545}{\#1545},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1547}{\#1547},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1548}{\#1548},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1788}{\#1788},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1972}{\#1972},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1987}{\#1987}.
\item
  Clarified that using C89 and added possibility for C89, C99, and C11 ,
  \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1088}{\#1088}.
\item
  Clarified input/output to external functions, \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/775}{\#775}.
\item
  Clarified handling of Boolean variables for external C,
  \cref{simple-types}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1846}{\#1846}.
\item
  Added that Strings can be sent to FORTRAN~77, \cref{simple-types}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1971}{\#1971}.
\item
  Allow multiple include directories, \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2103}{\#2103}.
\item
  Allow specific libraries for different compiler versions,
  \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1316}{\#1316}.
\item
  Added external warning functions, \cref{utility-functions}. Ticker
  \href{https://github.com/modelica/ModelicaSpecification/issues/1967}{\#1967}.
\item
  Clarified that pointers are only valid during each call, \cref{external-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1611}{\#1611}.
\item
  Clarified constructor and destructor, \cref{external-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1907}{\#1907}.
\item
  Clarified 'structured entity' to be 'directory', \cref{mapping-package-class-structures-to-a-hierarchical-file-system}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/922}{\#922}.
\item
  Clarified handling of incorrect package.order, \cref{mapping-a-package-class-hierarchy-into-a-directory-hierarchy-structured-entity}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1858}{\#1858}.
\item
  Restricted use of files with multiple classes, \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1854}{\#1854}.
\item
  Clarified storing resources in a file-system, \cref{external-resources}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/685}{\#685},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1623}{\#1623}.
\item
  Used correct font, \cref{external-resources}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2061}{\#2061}.
\item
  Clarified that inStream optimizations are allowed, \cref{stream-operator-instream-and-connection-equations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1766}{\#1766}.
\item
  Corrected actualStream example in \cref{stream-operator-actualstream}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1652}{\#1652}.
\item
  Corrected non-periodic rational clocks, \cref{clock-constructors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2022}{\#2022}.
\item
  Clarified initialization of clocked discretized continuous-time
  partitions, \cref{solver-methods}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1528}{\#1528}.
\item
  Defined rendering order, \cref{annotations-for-graphical-objects}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1750}{\#1750}.
\item
  Clarified rotation direction, \cref{common-definitions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1830}{\#1830}.
\item
  Clarified coordinate system definition, \cref{coordinate-systems}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1831}{\#1831}.
\item
  Defined coordinate system inheritance to be less suprising,
  \cref{coordinate-systems} and \cref{extends-clause}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1978}{\#1978}.
\item
  Clarified lineThickness and borderPattern, \cref{graphical-primitives} \cref{graphical-properties}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1896}{\#1896}.
\item
  Corrected formatting, \cref{graphical-properties}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1825}{\#1825}.
\item
  Made the different Text-annotations more similar, \cref{connections}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1621}{\#1621}.
\item
  Clarified LinePatterns in \cref{graphical-primitives}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1483}{\#1483}.
\item
  Corrected flipping of components and bitmaps, and clarified various
  aspects of bitmaps, \cref{component-instance} and \cref{bitmap}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1923}{\#1923}.
\item
  Clarified arrows, \cref{line}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1894}{\#1894}.
\item
  Clarified existing use of zero-width texts, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1636}{\#1636}.
\item
  Added specific fontnames, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1986}{\#1986}.
\item
  Added alternative for macro-expansion, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2148}{\#2148}.
\item
  Corrected example in \cref{mouse-input}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2111}{\#2111}.
\item
  Placed annotation last in classes, in particular \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1009}{\#1009}.
\item
  Cleaned up code and formatting in \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2041}{\#2041},
  \href{https://github.com/modelica/ModelicaSpecification/issues/2042}{\#2042}, and
  \href{https://github.com/modelica/ModelicaSpecification/issues/2125}{\#2125}.
\item
  Added missing nano-prefix, \cref{the-syntax-of-unit-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1261}{\#1261}.
\item
  Replaced the outdated contents of \cref{the-modelica-standard-library} by a hyperlink. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2130}{\#2130}.
\item
  Added ModelicaServices to \cref{the-modelica-standard-library}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/2132}{\#2132}.
\item
  Restrict grammar to avoid modifiers with leading dot, \cref{grammar}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1027}{\#1027}.
\item
  Restrict grammar for base-prefix, \cref{class-definition}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/917}{\#917}.
\item
  Restrict grammar for arrays, \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/809}{\#809}.
\item
  Restrict grammar for function arguments (replacing semantic
  restriction), \cref{expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1634}{\#1634}.
\item
  Corrected typo in \cref{rationale-for-the-formulation-of-the-instream-operator}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1317}{\#1317}.
\end{itemize}

\subsection{Contributors to the Modelica Language 3.4}\label{contributors-to-the-modelica-language-3-4}

The members of the Modelica Association contributed to the Modelica 3.4
specification.

\section{Modelica 3.3 Revision 1}\label{modelica-3-3-revision-1}

Modelica 3.3 Revision 1 was released July 11, 2014. The Modelica 3.3
Revision 1 specification was edited by Hans Olsson.

\subsection{Main changes in Modelica 3.3 Revision 1}\label{main-changes-in-modelica-3-3-revision-1}
The changes made in Modelica 3.2 Revision 2 are included, and in
addition the following improvements were made:
\begin{itemize}
\item
  Clarified that String-operator cannot use positional arguments,
  \cref{numeric-functions-and-conversion-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1468}{\#1468}.
\item
  Corrected size of enumeration, \cref{numeric-functions-and-conversion-functions} and \cref{type-conversion-of-enumeration-values-to-string-or-integer}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1369}{\#1369}.
\item
  Clarified \lstinline!spatialDistribution!, \cref{built-in-mathematical-functions-and-external-built-in-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1510}{\#1510}.
\item
  Restricted \lstinline!cardinality! to give a clear definition, \cref{cardinality-deprecated}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1409}{\#1409}.
\item
  Clarified which constants need a value, \cref{constant-expressions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1220}{\#1220}.
\item
  Clarified type prefixes rules, \cref{prefix-rules}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1196}{\#1196},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1221}{\#1221},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1301}{\#1301}.
\item
  Added exception for cyclic parameter bindings (already used in MSL),
  \cref{acyclic-bindings-of-constants-and-parameters}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1320}{\#1320}.
\item
  Added example for use of conditional components, \cref{conditional-component-declaration}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1227}{\#1227}.
\item
  Corrected annotation-grammar, \cref{class-declarations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1378}{\#1378}.
\item
  Corrected duplicated class-definition grammar, \cref{class-declarations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1388}{\#1388}.
\item
  Clarified short class definition, \cref{short-class-definitions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/527}{\#527}.
\item
  Removed unusable variant for operator and operator function, \cref{specialized-classes}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1459}{\#1459},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1497}{\#1497}.
\item
  Added definition of AssertionLevel, \cref{assertionlevel}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/962}{\#962}.
\item
  Corrected typos at end of loops in examples,\cref{enumeration-types} and
  \cref{implicit-iteration-ranges-of-for-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/902}{\#902}
\item
  Clarified temporary flattening, \cref{composite-name-lookup}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1327}{\#1327}.
\item
  Added definition of modification equations, \cref{modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/959}{\#959}.
\item
  Clarified modifiers for array elements, \cref{modifiers-for-array-elements}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1324}{\#1324}.
\item
  Corrected example for final element modification, \cref{final-element-modification-prevention}
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1326}{\#1326}.
\item
  Corrected duplicated class-definition grammar, \cref{the-class-extends-redeclaration-mechanism}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1388}{\#1388}.
\item
  Clarified modifiers on constraining type, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1033}{\#1033}.
\item
  Clarified when \lstinline!redeclare! can be used with the same type and rules for redeclaring array types, \cref{restrictions-on-redeclarations}.
  Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1252}{\#1252},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1281}{\#1281}.
\item
  Clarified default for annotation choicesAllMatching, \cref{annotation-choices-for-suggested-redeclarations-and-modifications}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1391}{\#1391}.
\item
  Forbid when-statements in initial equation/algorithm (they would in
  most cases not be active; leading to confusion), \cref{restrictions-on-equations-within-when-equations} and
  \cref{restrictions-on-when-statements}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1288}{\#1288}.
\item
  Clarified reinit during initialization, \cref{reinit} \cref{initialization-initial-equation-and-initial-algorithm}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1372}{\#1372}.
\item
  Clarified using start-values as guess-values; \cref{initialization-initial-equation-and-initial-algorithm}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1133}{\#1133},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1246}{\#1246}.
\item
  Clarified allowed use of variables in expandable connectors; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1279}{\#1279}.
\item
  Clarified causality for expandable connectors; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1305}{\#1305}.
\item
  Clarified expandable connectors in general; \cref{expandable-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1330}{\#1330}.
\item
  Clarified connection matching, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/884}{\#884}.
\item
  Added quantity checks for connectors (MSL already relies on this
  check); \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1284}{\#1284}.
\item
  Clarified arrays with non-Integer dimensions, \cref{array-declarations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1501}{\#1501}.
\item
  Clarified that ndims is allow for a scalar, \cref{array-dimension-and-size-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1303}{\#1303}.
\item
  Clarified number of arguments for zeros, ones, fill, \cref{specialized-array-constructor-functions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1351}{\#1351}.
\item
  Clarified min/max, \cref{reduction-functions-and-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1036}{\#1036}.
\item
  Clarified array expressions using iterations allow non-simple types,
  \cref{array-constructor-with-iterators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1521}{\#1521}.
\item
  Clarified arrays with non-Integer dimensions, \cref{indexing-with-boolean-or-enumeration-values}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1463}{\#1463}.
\item
  Clarified calling function as specialized class, \cref{function-as-a-specialized-class}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1362}{\#1362}.
\item
  Clarified default values in functions depending on other inputs,
  \cref{positional-or-named-input-arguments-of-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1346}{\#1346}.
\item
  Corrected syntax error in example, \cref{function-partial-application}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1338}{\#1338}.
\item
  Clarified annotations on external functions, \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/660}{\#660}.
\item
  Add possibility for sending arrays in records to external functions,
  \cref{external-function-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/351}{\#351}.
\item
  Corrected spelling to FORTRAN~77, \cref{aliasing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1278}{\#1278}.
\item
  Clarified default directories, \cref{annotations-for-external-libraries-and-include-files}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1456}{\#1456}.
\item
  Clarified constructing/destructing external objects, \cref{external-objects}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1518}{\#1518}.
\item
  Clarified encapsulation requirement for operator record, \cref{overloaded-operators}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1254}{\#1254}.
\item
  Clarified operator record: arrays, priority, and zero result,
  \cref{overloaded-binary-operations}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/1469}{\#1469},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1476}{\#1476},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1481}{\#1481}.
\item
  Added element wise operations for operator record, \cref{overloaded-binary-operations}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1455}{\#1455}.
\item
  Improved formulation, \cref{clock-constructors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1362}{\#1362}.
\item
  Clarified why noClock exists; \cref{sub-clock-conversion-operators}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1094}{\#1094}.
\item
  Added initial conditions to solver methods for clocked discretized
  continuous-time partitions; \cref{solver-methods}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1379}{\#1379}.
\item
  Added requirement that priorities must be unique for statechart
  transitions (the restriction was present in original description and
  is necessary to ensure deterministic behavior), \cref{state-machine-semantics}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/853}{\#853}.
\item
  Corrected syntax in Line definition, \cref{line}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1464}{\#1464}.
\item
  Corrected connectorSizing description, \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1441}{\#1441}.
\item
  Corrected license example, \cref{licensing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1127}{\#1127}.
\item
  Clarified names of productions in grammar and changed to use hyphen,
  \cref{lexical-conventions}. Tickets
  \href{https://github.com/modelica/ModelicaSpecification/issues/713}{\#713} and
  \href{https://github.com/modelica/ModelicaSpecification/issues/1033}{\#1033}.
\item
  Modified grammar use consistent style for import-list, \cref{class-definition}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1374}{\#1374}.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.3 Revision 1}\label{contributors-to-the-modelica-language-version-3-3-revision-1}

The following members of the Modelica Association contributed to the
Modelica 3.3 Revision 1 and/or Modelica 3.2 Revision 2 specification
(alphabetical list):
\begin{contributors}
\item Peter Aronsson, MathCore AB, Linköping, Sweden
\item Peter Fritzson, PELAB, Linköping University, Linköping, Sweden
\item Hilding Elmqvist, Dassault Systèmes, Lund, Sweden
\item Christoph Höger, Technical University of Berlin, Berlin, Germany
\item Gerd Kurzbach, ITI GmbH, Dresden, Germany
\item Jesper Mattsson, Modelon AB, Lund, Sweden
\item Hans Olsson, Dassault Systèmes, Lund, Sweden
\item Martin Otter, DLR, Oberpfaffenhofen, Germany
\item Adrian Pop, Linköping University, Linköping, Sweden
\item Elena Shmoylova, Maplesoft, Waterloo, Canada
\item Martin Sjölund, PELAB, Linköping University, Linköping, Sweden
\item Stefan Vorkoetter, Maplesoft, Waterloo, Canada
\end{contributors}

\section{Modelica 3.3}\label{modelica-3-3}

Modelica 3.3 was released on May 9, 2012. The Modelica 3.3 specification
was edited by Hans Olsson, Hilding Elmqvist and Martin Otter.

\subsection{Main changes in Modelica 3.3}\label{main-changes-in-modelica-3-3}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.3:
\begin{itemize}
\item
  Language elements for describing synchronous behavior suited for
  implementation of control systems, \cref{synchronous-language-elements}.
\item
  Language elements to define synchronous state machines, \cref{state-machines}.
\item
  The spatialDistribution function for special one-dimensional flow
  problems, \cref{spatialdistribution}.
\item
  The getInstanceName function for diagnostic messages, \cref{getinstancename}.
\item
  Possible to call a function through an instance name, \cref{composite-name-lookup}.
\item
  Can use the start-value for a parameter to give a non-zero default
  that should be changed, \cref{initialization-initial-equation-and-initial-algorithm}.
\item
  A recommened procedure for priority between initial values have been
  added, \cref{recommended-selection-of-start-values}.
\item
  Functions can be defined without algorithm-section, \cref{function-as-a-specialized-class}.
\item
  Functions can be marked as \lstinline!pure! or \lstinline!impure! with specified semantics, \cref{pure-modelica-functions}.
\item
  The rules for \lstinline!ExternalObject! have been clarified, \cref{external-objects} and \cref{interface-or-type-relationships}.
\item
  Multiple definition import, \cref{importing-definitions-from-a-package}.
\item
  Additional annotations allowing:
  \begin{itemize}
  \item
    Functions to generate events, \cref{annotations-for-code-generation}.
  \item
    Experiments to specify a time-resolution of simulation result,
    \cref{annotations-for-simulation-experiments}.
  \item
    Single instance of class, \cref{annotation-for-single-use-of-class}.
  \item
    Text in the diagram layer can use a macro syntax, \cref{text}.
  \item
    Color selection dialog for parameters, \cref{annotations-for-the-graphical-user-interface}.
  \item
    Conversion to specify a set of versions to convert with one script,
    \cref{version-handling}.
  \item
    Licensed libraries to define the set of allowed operations
    (including binary/source export), \cref{licensing}.
  \end{itemize}
\end{itemize}

The following changes in Modelica 3.3 are \emph{not} backwards compatible:
\begin{itemize}
\item
  \Crefnameref{synchronous-language-elements} from
  Modelica 3.2 has been removed (a more powerful functionality is
  instead provided with the new \cref{synchronous-language-elements} and \cref{state-machines}). Since, no
  released tools has yet supported the previous \cref{synchronous-language-elements}, this not
  backwards compatible change is uncritical.
\item
  The new \lstinline!spatialDistribution! and \lstinline!getInstanceName! functions could cause
  problems if another function with that name was already used.
\end{itemize}

\begin{itemize}
\item
  Conditional physical connectors must be connected if enabled,
  \cref{conditional-component-declaration}
  and \cref{restrictions-of-connections-and-connectors}. In almost all cases they have to be connected
  to generate correct result, and it is not possible to check that they
  are connected in the models
\end{itemize}

\subsection{Contributors to Modelica 3.3}\label{contributors-to-modelica-3-3}

The language elements for describing synchronous behavior, \cref{synchronous-language-elements},
was mainly developed by Hilding Elmqvist, Martin Otter, and Sven Erik
Mattsson. Hilding Elmqvist wrote a detailed tutorial. Sven Erik Mattsson
developed a test implementation of the language elements and the needed
new algorithms. Based on the prototype, tests and feedback have been
provided by Martin Otter and Bernhard Thiele.

The language elements to define synchronous state machines, \cref{state-machines},
was mainly developed by Hilding Elmqvist with contributions from
Francois Dupont, Sven Erik Mattsson and Fabien Gaucher. Hilding Elmqvist
wrote a tutorial. Sven Erik Mattsson and Carl-Fredrik Abelson developed
a test implementation. Based on the prototype, tests and feedback have
been provided by Alain Thura, Emmanuel Ledinot, Claire Campan, and
Martin Malmheden.

The spatialDistribution operator was initiated by Hubertus Tummescheit,
based on an operator of Dymola, and with contributions from Hans Olsson.

The improved definition of pure and impure functions and the enhanced import-clause was proposed by Peter Fritzson.

The various smaller language improvements based on submitted tickets
have been developed by a group headed by Hans Olsson and with group
members Peter Fritzson, Christoph Höger, Gerd Kurzbach, Jesper Mattsson,
Martin Sjölund, and Stefan Vorkoetter.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.3 specification:
\begin{contributors}
\item Johan Åkesson, Lund University and Modelon AB, Lund, Sweden
\item Peter Aronsson, MathCore AB, Linköping, Sweden
\item Ingrid Bausch-Gall, BAUSCH-GALL GmbH, Munich, Germany
\item Volker Beuter, Kämmerer AG, Germany
\item Torsten Blochwitz, ITI GmbH, Dresden, Germany
\item David Broman, PELAB, Linköping University, Sweden
\item Dag Brück, Dassault Systèmes, Lund, Sweden
\item Francesco Casella, Politecnico di Milano, Milano, Italy
\item Christoph Clauss, Fraunhofer, Dresden, Germany
\item Mike Dempsey, Claytex Services Limited, Leamington Spa, U.K.
\item Karin Dietl, TU Hamburg-Harburg, Germany
\item Francois Dupont, Dassault Systèmes, Brest, France
\item Jonas Eborn, Modelon, Lund, Sweden
\item Hilding Elmqvist, Dassault Systèmes, Lund, Sweden
\item Guilioano Fontanella, AIT, Vienna, Austria
\item Rüdiger Franke, ABB Power Generation, Mannheim, Germany
\item Peter Fritzson, PELAB, Linköping University, Sweden
\item Sébastien Furic, LMS International, Roanne. France
\item Leo Gall, BAUSCH-GALL Gmbh, Munich, Germany
\item Peter Harman, deltatheta uk limited, U.K.
\item Anton Haumer, AIT, Vienna, Austria
\item Dan Henriksson, Dassault Systèmes, Lund, Sweden
\item Christoph Höger, TU Berlin, Berlin, Germany
\item Christian Kral, AIT, Vienna, Austria
\item Gerd Kurzbach, ITI GmbH, Dresden, Germany
\item Kilian Link, Siemens AB, Erlangen, Germany
\item Krisitin Majetta, Fraunhofer, Dresden, Germany
\item Martin Malmheden, Dassault Systèmes, Velicy, France
\item Jesper Mattsson, Modelon, Lund, Sweden
\item Sven Erik Mattsson, Dassault Systèmes, Lund, Sweden
\item Eric Neuber, ITI GmbH, Dresden, Germany
\item Ramine Nikoukhah, Altair, France
\item Hans Olsson, Dassault Systèmes, Lund, Sweden
\item Martin Otter, DLR-RM (German Aerospace Center), Oberpfaffenhofen,Germany
\item Peter Pepper, Fraunhofer FIRST, Berlin, Germany
\item Adrian Pop, Linköping University, Linköping, Sweden
\item Olena Rogovchenko, PELAB, Linköping, Sweden
\item Stefan-Alexander Schneider, BMW, Munich, Germany
\item Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany
\item Martin Sjölund, PELAB; Linköping, Sweden
\item Kristian Stavåker, PELAB, Linköping, Sweden
\item Bernhard Thiele, DLR-RM (German Aerospace Center), Oberpfaffenhofen,Germany
\item Eric Thomas, Dassault Aviation, Paris, France
\item Michael Tiller, Dassault Systèmes, Velicy, France
\item Hubertus Tummescheit, Modelon AB, Lund, Sweden
\item Andreas Uhlig, ITI, Dresden Germany
\item Vladimir Vukovic, AIT, Vienna, Germany
\item Stefan Vorkoetter, Maplesoft, Waterloo, Canada
\item Daniel Weil, Dassault Systèmes, Grenoble, France
\item Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,Switzerland
\item Dietmar Winkler, Telemark University College, Porsgrunn, Norway
\item Stefan Wischhusen, XRG Simulation, Hamburg, Germany
\item Dirk Zimmer, DLR-RM (German Aerospace Center), Oberpfaffenhofen, Germany
\end{contributors}

\subsection{Acknowledgments}\label{acknowledgments1}

For the design of the synchronous language elements (\cref{synchronous-language-elements}) and
synchronous state machines (\cref{state-machines}), and for the understanding of
fine details of synchronous languages, especially from Lucid Synchrone,
very helpful discussions with
\begin{contributors}
\item Albert Benveniste, IRISA/INRIA, Rennes, France
\item Marc Pouzet, Laboratoire d'Informatique de l'ENS, Paris
\item Benoit Caillaud, IRISA, Rennes, France
\item Timothy Bourke, INRIA, Rennes, France
\end{contributors}
are appreciated.

\section{Modelica 3.2 Revision 2}\label{modelica-3-2-revision-2}

Modelica 3.2 Revision 2 was released 2013. The Modelica 3.2 Revision 2
specification was edited by Hans Olsson and Martin Otter.

\subsection{Main changes in Modelica 3.2 Revision 2}\label{main-changes-in-modelica-3-2-revision-2}

The Modelica language was slightly adapted (in a backwards compatible way, except as listed below) in order that the Modelica Standard Library (MSL) version~3.2.1 is fully compliant to Modelica
Language~3.2 Revision~2.  This required the following improvements compared to 3.2 Revision~1:
\begin{itemize}
\item
  Possible to call a function through an instance name, \cref{composite-name-lookup}\\
  (used in MSL 3.2 to compute the gravity acceleration in
  Modelica.Mechanics.MultiBody.World; this feature was also introduced
  in Modelica Language version 3.3 in May 2012).
\item
  New built-in operator \lstinline!Connections.rooted(A.R)! to inquire whether an overdetermined type or record instance \lstinline!A.R! in a call to \lstinline!Connections.branch(A.R, B.R)! is closer to the root of the spanning tree than \lstinline!B.R!, \cref{overconstrained-equation-operators-for-connection-graphs} (used in MSL 3.2 to avoid algebraic loops in several components such as in Modelica.Mechanics.MultiBody.Joints.Revolute).
\item
  Several new annotations where vendor-specific variants were used in
  MSL 3.2; \cref{annotation-choices-for-suggested-redeclarations-and-modifications},
  \cref{annotations-for-documentation}, \cref{annotations-for-code-generation},
  \cref{annotations-for-simulation-experiments}, \cref{connections}, and \cref{annotations-for-the-graphical-user-interface}.
\item
  Specified that Evaluate can also occur in types, since this is used in
  MSL and important for performance; \cref{annotations-for-code-generation}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/925}{\#925}.
\item
  Macros in graphical text items, \cref{text}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/659}{\#659}. (This
  feature was also introduced in Modelica Language version 3.3.)
\item
  Initial equations are discrete -- used in MSL for initialization of pre-variables, \cref{discrete-time-expressions}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/853}{\#853}.
\item
  Updated \lstinline!noDerivative! to be consistent with MSL, \cref{using-the-derivative-annotation}.  This is an incompatibility, but the other variant was not used.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1035}{\#1035}.
\item
  Clarified handling of component with missingInnerMessage;
  \cref{annotations-for-the-graphical-user-interface}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/891}{\#891}.
\item
  Clarified definition of protected; \cref{access-control-public-and-protected-elements}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/975}{\#975},
  \href{https://github.com/modelica/ModelicaSpecification/issues/1123}{\#1123}.
\end{itemize}

In addition several issues with the specification text were corrected:
\begin{itemize}
\item
  Clarified an unclear sequence regarding functions as input arguments
  in \cref{prefix-rules}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1182}{\#1182}.
\item
  Clarified allowed binding equations for redeclarations, \cref{balanced-models}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/1111}{\#1111}.
\item
  Unspecified enumerations now have defined semantics, \cref{unspecified-enumeration}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/834}{\#834}.
\item
  Transitively non-Replaceable, \cref{transitively-non-replaceable}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/854}{\#854}.
\item
  Modification text improved to not refer to inherited class,
  \cref{modifications}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1042}{\#1042}.
\item
  Precedence for modifiers on constraining-clause clarified, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1128}{\#1128}.
\item
  Clarified arrays for constraining type, \cref{constraining-type}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1148}{\#1148}.
\item
  Avoid all forms of connections depending on connections,
  \cref{connect-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/828}{\#828}.
\item
  Clarified equation count for if-equations, \cref{if-equations}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/888}{\#888}.
\item
  Complete definition of \lstinline!reinit!, \cref{reinit}.
  Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/578}{\#578}.
  This forbids \lstinline!reinit! in algorithms, but it was previously not well-defined.
\item
  Clarified initializaton of pre(vc) for a non-discrete (that is
  continuous-time) Real variable vc, \cref{initialization-initial-equation-and-initial-algorithm}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1195}{\#1195}.
\item
  Only one way of handling arrays of connectors is now defined,
  \cref{connectors-and-connections}. Ticket \href{https://github.com/modelica/ModelicaSpecification/issues/757}{\#757}.
\item
  Example now use correct sine-source, \cref{connect-equations-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/750}{\#750}.
\item
  Restricted parameters in connectors, \cref{restrictions-of-connections-and-connectors}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/768}{\#768}.
\item
  Clarified type restrictions for some operators, \cref{reduction-functions-and-operators},
  \cref{matrix-and-vector-algebra-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/622}{\#622}.
\item
  Clarified that if at least one array element is used on the left hand
  side of the assignment operator in an algorithm section, then the
  complete array is initialized in this section, \cref{execution-of-an-algorithm-in-a-model}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1190}{\#1190}.
\item
  Record constructor corrected to not refer to keywords that should not
  occur, \cref{record-constructor-functions}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/907}{\#907}.
\item
  External storage of classes, \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity},
  \cref{the-within-clause} and \cref{mapping-of-versions-to-file-system}.
  Tickets \href{https://github.com/modelica/ModelicaSpecification/issues/1019}{\#1019},
  \href{https://github.com/modelica/ModelicaSpecification/issues/892}{\#892},
  \href{https://github.com/modelica/ModelicaSpecification/issues/887}{\#887}.
\item
  Added example and explanation for inheritance restriction on operator
  record; \cref{example-of-overloading-for-complex-numbers}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1065}{\#1065}.
\item
  Chapter \emph{Mapping of Models to Execution Environments} was removed;
  this change was already decided for Modelica 3.3 and no tool had
  released an implementation of this feature. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1015}{\#1015}.
\item
  Corrected license-example in \cref{licensing}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1127}{\#1127}.
\item
  Grammar was internally restructured for short-class-definition,
  \cref{class-declarations}, \cref{class-definition}. Ticket
  \href{https://github.com/modelica/ModelicaSpecification/issues/1140}{\#1140}.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2 Revision 2}\label{contributors-to-the-modelica-language-version-3-2-revision-2}

The following members of the Modelica Association contributed to the
Modelica 3.2 Revision 2 specification (alphabetical list):

Peter Aronsson, MathCore AB, Linköping, Sweden

Peter Fritzson, PELAB, Linköping University, Linköping, Sweden

Hilding Elmqvist, Dassault Systèmes, Lund, Sweden

Christoph Höger, Technical University of Berlin, Berlin, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Jesper Mattsson, Modelon AB, Lund, Sweden

Hans Olsson, Dassault Systèmes, Lund, Sweden

Martin Otter, DLR, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Elena Shmoylova, Maplesoft, Waterloo, Canada

Martin Sjölund, PELAB, Linköping University, Linköping, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

\section{Modelica 3.2 Revision 1}\label{modelica-3-2-revision-1}

Modelica 3.2 Revision 1 was released on Feb. 29, 2012. The Modelica 3.2
Revision 1 specification was edited by Hans Olsson and Peter Fritzson.

\subsection{Main changes in Modelica 3.2 Revision 1}\label{main-changes-in-modelica-3-2-revision-1}

The Modelica language was not changed with respect to the previous
version 3.2. Only issues with the specification text have been fixed. In
particular:
\begin{itemize}
\item
  Corrected typos and improved formatting.
\item
  \cref{comments} Comments:\\
  There are 2 and not 3 kinds of comments and comments are treated as
  white space character.\\
  Added definition of white space character.
\item
  \cref{identifiers} Identifiers:\\
  The single quotes are part of the identifier, e.g., 'x'.
\item
  \cref{built-in-variable-time} Built-in Variable time:\\
  Variable \lstinline!time! is only available in models and blocks and not in the
  other classes.
\item
  \cref{built-in-mathematical-functions-and-external-built-in-functions} Built-in Mathematical Functions\\
  Definition of \lstinline!atan2! corrected.
\item
  \cref{derivative-and-special-purpose-operators-with-function-syntax} Special Purpose Operators\\
  Included definition of inStream and actualStream operators from
  \cref{stream-connectors}.
\item
  \cref{event-related-operators-with-function-syntax} Event-Related Operators\\
  Clarified, that the first argument of \lstinline!smooth! is a scalar.\\
  Improved the definition of \lstinline!reinit!.
\item
  \cref{discrete-time-expressions} Discrete-Time Expressions\\
  Improved definition of ordered relations
  (\textgreater{},\textless{},\textgreater{}=,\textless{}=).
\item
  \cref{conditional-component-declaration} Conditional Component Declaration\\
  Clarified redeclaration of a component.
\item
  \cref{specialized-classes} Specialized Classes\\
  Clarified that \lstinline!stream! cannot be used in a record.\\
  Clarified restrictions on elements in a \lstinline!connector!.\\
  Errors in example of operator record Complex corrected.
\item
  \cref{enumeration-types} Enumeration Types\\
  Error in example corrected.
\item
  \cref{simultaneous-inner-outer-declarations} Simulataneous Inner/Outer Declarations\\
  Clarified inner/outer declarations.
\item
  \cref{inheritance-extends-clause} Inheritance\\
  Clarified that the elements of a flattened base class are added at the
  place of the extends clause.\\
  Equations of the flattened base class that are syntactically
  equivalent to equations in the flattened enclosing class are
  deprecated.
\item
  \cref{modifications} Modifications\\
  Element modifiers are no longer part of language, reference grammar
  instead of duplicating it.
\item
  \cref{redeclaration} Redeclaration\\
  Improved redeclarations definition and moved an example from \cref{the-class-extends-redeclaration-mechanism} at
  the right place.
\item
  \cref{reinit} reinit\\
  Improved reinit definition.
\item
  \cref{initialization-initial-equation-and-initial-algorithm} Initialization\\
  Clarified that only when-clauses with restricted form of initial() as
  condition will be active during initialization.
\item
  \cref{reduction-expressions} Reduction Expressions\\
  Improved definition
\item
  \cref{types-as-iteration-ranges} Types as iteration ranges\\
  Newly introduced section to improve the definition of iteration ranges
\item
  \cref{function-as-a-specialized-class} Function\\
  Added missing restrictions that \lstinline!model!, \lstinline!block!, \lstinline!inner!, \lstinline!outer! cannot be used in a function.
\item
  \cref{positional-or-named-input-arguments-of-functions} Positional or Named Input Arguments of Functions\\
  Corrected formal syntax of a function call
\item
  \cref{initialization-and-declaration-assignments-of-components-in-functions} Initialization and Declaration Assignments of
  Components in Functions\\
  Added the restriction of acylic bindings.
\item
  \cref{records} Records\\
  Mapping of arrays in records to C-structs is removed.
\item
  \cref{bitmap} Bitmap\\
  Defined flipping more precisely.
\item
  \cref{lexical-conventions} Lexical conventions\\
  More precisely defined whitespace and comments.
\item
  \cref{grammar} Grammar\\
  Improved/corrected grammar definition
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2 Revision 1}\label{contributors-to-the-modelica-language-version-3-2-revision-1}

The following members of the Modelica Association contributed to the
Modelica 3.2 Revision 1 specification (alphabetical list):

Peter Aronsson, MathCore AB, Linköping, Sweden

Peter Fritzson, PELAB, Linköping University, Linköping, Sweden

Christoph Höger, Technical University of Berlin, Berlin, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Jesper Mattsson, Modelon AB, Lund, Sweden

Hans Olsson, Dassault Systèmes, Lund, Sweden

Adrian Pop, Linköping University, Linköping, Sweden

Martin Sjölund, PELAB, Linköping University, Linköping, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

\section{Modelica 3.2}\label{modelica-3-2}

Modelica 3.2 was released on March 24, 2010. The Modelica 3.2
specification was edited by Hans Olsson, Martin Otter and others.

\subsection{Main changes in Modelica 3.2}\label{main-changes-in-modelica-3-2}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.2:
\begin{itemize}
\item
  Homotopy function for making it easier to solve initialization
  problems (see \cref{derivative-and-special-purpose-operators-with-function-syntax}).
\item
  Functions as formal inputs to functions (see new \cref{functional-input-arguments-to-functions}).
\item
  Overloaded operators have been refined (see \cref{overloaded-operators}):
  \begin{itemize}
  \item
    A new specialized class \lstinline!operator record! is introduced -- with specialized typing rules (the type is identified by the class name; all other Modelica classes have a structural type
    system where the type is only defined by the public elements).  Overloaded operators can only be defined inside an \lstinline!operator record!.  This change fixes a flaw in Modelica~3.1, since
    the look-up of overloaded operators is performed by the record class name.
  \item
    Inheritance of an \lstinline!operator record! is allowed if defined via a
    short class definition. This removes a restriction of operator
    overloading in Modelica 3.1, e.g., to define derived classes with
    units for the record elements, like deriving ComplexVoltage from
    Complex.
  \item
    New overloaded element \lstinline!'0'! in order that operator record classes can
    be used as flow variables in connectors.
  \end{itemize}
\item
  Unicode support in description strings, strings in annotations and in
  comments in order to improve Modelica, e.g., for Arabian, Asian or
  Indian users (see grammar changes in \cref{lexical-conventions}). Modelica files are
  UTF-8 encoded, and can start with the UTF-8 encoded byte order mark
  (0xef 0xbb 0xbf) to indicate that it may contain UTF-8 characters;
  this is treated as white-space in the grammar (see \cref{mapping-a-package-class-hierarchy-into-a-single-file-nonstructured-entity}).
\item
  Constants can once again be modified unless declared final -- as this is already used in packages.  (See \cref{constant-expressions}).
\item
  Global name lookup has been introduced (e.g.
  \lstinline!.Modelica.Constants.pi!), see \cref{global-name-lookup}.
\item
  New C functions \lstinline!ModelicaVFormatMessage! and \lstinline!ModelicaVFormatError!, to
  simplify message formatting in external functions (see \cref{utility-functions})
\item
  Additional annotations allowing:
  \begin{itemize}
  \item
    Inclusion of C-header and object library files in packages and
    referencing them with URIs.\\
    (new annotations \lstinline!IncludeDirectory!, \lstinline!LibraryDirectory!, and
    standardized platform names like \lstinline!win32!; see \cref{annotations-for-external-libraries-and-include-files}; resolves
    ticket \#297).
  \item
    Images in parameter dialogs (new annotation \lstinline!groupImage!; see
    \cref{annotations-for-the-graphical-user-interface}).
  \item
    Start and fixed attributes for variables in parameter dialogs\\
    (new annotation \lstinline!showStartAttribute!; see \cref{annotations-for-the-graphical-user-interface}).
  \item
    Access control for packages to protect intelectual property.\\
    (new annotations \lstinline!Protection,! and \lstinline!License!; see new \cref{annotations-for-access-control-to-protect-intellectual-property}).
  \end{itemize}
\end{itemize}

The following changes in Modelica 3.2 are \emph{not} backwards compatible:
\begin{itemize}
\item
  The new built-in operator name \lstinline!homotopy!. In rare cases this might
  give name clashes in existing models.
\item
  Records with overloaded operations must be declared as \lstinline!operator record! instead of as \lstinline!record!. This is uncritical because tools
  that already support operator overloading will support the Modelica
  3.1 form still for some time.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.2}\label{contributors-to-the-modelica-language-version-3-2}

The initial version of \emph{functions as formal inputs to functions} was
proposed by Peter Fritzson.

The definition of header-files and object-libraries with the
\lstinline!IncludeDirectory! and \lstinline!LibraryDirectory! annotations was mainly
developed by Hans Olsson.

The \lstinline!Protection! annotation used for access control is an improved version of existing annotations from Dymola.  The \lstinline!License! annotation was mainly developed by Dag Brück with improvements from Magnus Gäfvert.

The flaw in the operator overloading concept was detected by Sébastien
Furic. He also proposed the basic fix, by using a nominal type system
for records with overloaded operations.

The global name lookup was proposed by Stefan Vorkoetter.

The support for Unicode was initiated by Rui Gao and Hoyoun Kim.\\
Martin Otter, Michael Sielemann and Francesco Casella proposed \lstinline!homotopy!.  Michael Sielemann demonstrated with benchmark problems that non-linear solvers are not able to solve reliably initialization problems and that the \lstinline!homotopy! operator is therefore needed.  He provided a prototype implementation of \lstinline!homotopy! and demonstrated its use on a vehicle dynamics example.  Utilizing the prototype implementation, Francesco Casella demonstrated with a model of a thermal power plant with 390 iteration variables of the initialization problem, that an appropriate usage of \lstinline!homotopy! allows the system to reliably initialized without providing guess values for the iteration variables.  This was a strong indication that \lstinline!homotopy! will indeed improve initialization in Modelica significantly.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.2 specification:

Johan Åkesson, Lund University and Modelon AB, Lund, Sweden

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann, University of Applied Sciences, Bielefeld, Germany

Jonathan Beck, Dassault Systèmes, Paris, France

Torsten Blochwitz, ITI GmbH, Dresden, Germany

David Broman, PELAB, Linköping University, Sweden

Dag Brück, Dassault Systèmes, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Mike Dempsey, Claytex Services Limited, Leamington Spa, U.K.

Karin Dietl, TU Hamburg-Harburg, Germany

Filippo Donida, Politecnico di Milano, Milano, Italy

Hilding Elmqvist, Dassault Systèmes, Lund, Sweden

Peter Fritzson, PELAB, Linköping University, Sweden

Sébastien Furic, LMS International, Roanne. France

Manuel Gräber, TU Braunschweig, Germany

Peter Harman, deltatheta uk limited, U.K.

Anton Haumer, AIT, Vienna, Austria

Carsten Heinrich, Institut für Luft- und Kältetechnik, Dresden, Germany

Dan Henriksson, Dassault Systèmes, Lund, Sweden

Fredrik Karlsson, PELAB, Linköping University, Sweden

Christian Kral, AIT, Vienna, Austria

Imke Krüger, TU Hamburg-Harburg, Hamburg, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Kilian Link, Siemens AB, Erlangen, Germany

Sven Erik Mattsson, Dassault Systèmes, Lund, Sweden

Eric Neuber, ITI GmbH, Dresden, Germany

Hans Olsson, Dassault Systèmes, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Modelon AB, Lund, Sweden

Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany

Bernhard Thiele, German Aerospace Center, Oberpfaffenhofen, Germany

Thorben Vahlenkamp, XRG Simulation, Hamburg, Germany

Eric Thomas, Dassault Aviation, Paris, France

Michael Tiller, Emmeskay, Plymouth, MI, U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,
Switzerland

Dietmar Winkler, Telemark University College, Porsgrunn, Norway

\subsection{Acknowledgments}\label{acknowledgments2}

Partial financial support for the development of Modelica 3.2 by the
following funding agencies has been received:
\begin{itemize}
\item
  The German Ministry BMBF has partially funded DLR, Fraunhofer and
  Siemens (BMBF Förderkennzeichen: 01IS07022F) within the ITEA2 project
  EUROSYSLIB (\url{https://itea3.org/project/eurosyslib.html}).
\item
  The German Ministry BMBF has partially funded ITI GmbH (BMBF
  Förderkennzeichen: 01IS08002K), and the Swedish funding agency VINNOVA
  has partially funded Dynasim (2008-02291), within the ITEA2 project
  MODELISAR (\url{https://itea3.org/project/modelisar.html}).
\item
  The Swedish funding agency VINNOVA has partially funded Linköping
  University (PELAB) within the ITEA2 project OPENPROD
  (http://www.openprod.org).
\item
  The Swedish Research Council has partially funded Linköping University
  (PELAB) within the project \emph{High-Level Debugging of Equation-Based
  System Modeling \& Simulation Languages}.
\item
  The German Ministry BMBF has partially funded FH Bielefeld (BMBF
  Förderkennzeichen: 01IS09029C) within the ITEA2 project OPENPROD
  (\href{http://www.openprod.}{http://www.openprod.org}).
\end{itemize}

\section{Modelica 3.1}\label{modelica-3-1}

Modelica 3.1 was released on May 27, 2009. The Modelica 3.1
specification was edited by Francesco Casella, Rüdiger Franke, Hans
Olsson, Martin Otter, and Michael Sielemann.

\subsection{Main changes in Modelica 3.1}\label{main-changes-in-modelica-3-1}

The following \emph{backward compatible extensions} have been introduced with Modelica 3.1:
\begin{itemize}
\item
  Overloading of operators like \lstinline!'+'! or \lstinline!'*'! to allow convenient usage of
  user-defined data structures like complex numbers, polynomials,
  transfer functions. Usually, only scalar operations for one data type
  need to be overloaded. All other needed operations, like operations
  between different data types or on arrays of the new data type, can be
  automatically constructed by the tool.
\item
  Stream connector concept to ensure efficient and reliable simulation
  of fluid systems.
\item
  Partitioning models in parts and mapping these parts to execution
  environments. This allows convenient definition of, e.g.,
  Model-in-the-Loop, Software-in-the-Loop, Hardware-in-the-Loop
  Simulation, from the same ``logical'' system, by inheriting from the
  logical system and setting configuration options.
\item
  Arrays in buses (expandable connector) are much better supported.
  Furthermore, variables declared in an expandable connector need not to
  be referenced in the model and are then not available in the
  simulation model.
\item
  The order of classes stored in separate files can be given.
\item
  A restriction of balanced models was removed, so that modifiers to
  connector and record instances can be used and are considered for the
  equation count. This allows, e.g., a much easier implementation of the
  support connector of the Modelica.Mechanics.Rotational/Translational
  libraries.
\item
  A tool that uses missingInnerMessage to give information may also
  automatically use the corresponding \lstinline!inner!-component.
\item
  URIs can be used for links in html-documentation and for the Bitmap
  annotation (such as: \filename{modelica://Modelica.Mechanics/C.jpg} for image
  \filename{C.jpg} that is stored in the directory of package
  \lstinline!Modelica.Mechanics!). This allows storing resources in a package on
  persistent storage and to reference resources via package and resource
  names.
\item
  \emph{Annotation} \lstinline!connectorSizing! to automatically enlarge a
  vector of connectors and connect to a free element of this vector when
  a connection line is drawn. This allows improving the user
  convenience, especially for state machine and fluid models.
\item
  \emph{Annotation} \lstinline!inverse! to define inverses of functions. This
  allows a tool to solve non-linear algebraic loops by using the
  user-provided inverse function.
\item
  \emph{Annotations} \lstinline!versionDate!, \lstinline!versionBuild!,
  \lstinline!dateModified!, \lstinline!revisionId! to improve version handling. For
  example, this allows handling of maintenance (bug-fix) releases and
  gives a library developer the possibility to state that a particular
  build is needed for a used library.
\end{itemize}

The following defects have been fixed in the Modelica specification:
\begin{itemize}
\item
  Modifier with subscripts were previously allowed, but not clearly
  defined, not implemented in many tools, and not used in libraries.
  They were thus removed.
\item
  Modelica keywords (\cref{modelica-keywords}) updated.
\item
  Clarification: Exponentiation and array range operator are
  non-associative\\
  (x\^{}y\^{}z or a:b:c:d:e:f are not allowed; parentheses are required)
\item
  Clarification: Restrictions on combining base classes (\cref{restriction-on-combining-base-classes-and-other-elements}).
\item
  Clarification: Execution of an algorithm (new \cref{execution-of-an-algorithm-in-a-model}).
\item
  The default type for arrays sent to external functions has been
  clarified.
\item
  The \lstinline!iconTransformation! defaults to the (diagram)
  \lstinline!transformation!, as was originally the intention.
\item
  The Connection set section was rewritten:
  \begin{itemize}
  \item
    Connection set is clearly defined including examples.
  \item
    The handling of connections involving \lstinline!outer! components was rewritten
    to ensure that models that seem to have the same connection
    structure generate the same equations from the connect equations.
    Previously a connection between an \lstinline!outer! component and an outside
    connector would move the connection upwards. The implication of this
    movement was unclear: if it turned the connector into an inside
    connector (as was likely the intention) it would prohibit
    default-connection of this normal connector leading to
    counter-intuitive results; and otherwise it would have no impact.
  \end{itemize}
\item
  Example of using fields was corrected.
\item
  Example with MatrixGain was corrected.
\item
  Ambiguous annotations after external-clause were corrected (as already used).
\item
  The reinit-operator can be used multiple times in one algorithm, and
  the semantics clarified.
\item
  Made clearer that acyclic parameters also hold for one parameter
  equation.
\item
  Changed in the text \emph{attributes} to \emph{prefix}, if a prefix is
  meant.
\end{itemize}

The following changes in Modelica 3.1 are \emph{not} backwards compatible:
\begin{itemize}
\item
  A class-level annotation can only be placed before the end-statement.
  This is uncritical because tools can easily fix incorrect models
  (ignore this new rule when reading a model and use this rule when
  storing the model).
\item
  New Modelica keywords \lstinline!stream! and \lstinline!operator!, a new built-in
  package \lstinline!Subtask! and new-built-in operators \lstinline!inStream! and
  \lstinline!actualStream! have been introduced. In rare cases this might give
  name clashes in existing models.
\item
  Modifiers on declared variables in expandable connectors are no longer
  allowed. This should be uncritical, because expandable connectors are
  usually used for signal buses where the signal is communicated to the
  bus from a block with a connect equation.
\end{itemize}

\subsection{Contributors to the Modelica Language, Version 3.1}\label{contributors-to-the-modelica-language-version-3-1}

The concept of operator overloading was developed by Hans Olsson, based
on work of Dag Brück, Peter Fritzson, and Martin Otter.

The streams concept was developed by Rüdiger Franke based on work from
Francesco Casella and with contributions especially from Hilding
Elmqvist, Sven Erik Mattson, Hans Olsson, Martin Otter and Michael
Sielemann.

The concept to map models to execution environments was developed by
Hilding Elmqvist, Dan Henriksson, Martin Otter, Bernhard Thiele and Sven
Erik Mattson.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.1 specification:

Johan Akesson, Lund University and Modelon AB, Lund, Sweden

Johan Andreasson, Modelon AB, Lund, Sweden

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

Torsten Blochwitz, ITI GmbH, Dresden, Germany

David Broman, Linköping University, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Karin Dietl, TU Hamburg-Harburg, Germany

Filippo Donida, Politecnico di Milano, Milano, Italy

Thomas Doumenc, Dassault Systèmes, Paris, France

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Power Generation, Mannheim, Germany

Peter Fritzson, Linköping University, Sweden

Magnus Gäfvert, Modelon AB, Lund, Sweden

Manuel Gräber, TU Braunschweig, Germany

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Carsten Heinrich, Institut für Luft- und Kältetechnik, Dresden, Germany

Dan Henriksson, Dynasim, Lund, Sweden

Roland Kossel, TLK Thermo GmbH, Braunschweig, Germany

Christian Kral, arsenal research, Vienna, Austria

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Kilian Link, Siemens AB, Erlangen, Germany

Sven Erik Mattsson, Dynasim, Lund, Sweden

Ramine Nikoukhah, INRIA, Paris, France

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

Christoph Richter, TU Braunschweig, Germany

Michael Sielemann, German Aerospace Center, Oberpfaffenhofen, Germany

Bernhard Thiele, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company/Emmeskay, Dearborn/Plymouth, MI,
U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Stefan Vorkoetter, Maplesoft, Waterloo, Canada

Hans-Jürg Wiesmann, ABB Switzerland, Corporate Research, Baden,
Switzerland

Dietmar Winkler, TU Berlin, Germany

\subsection{Acknowledgments}\label{acknowledgments3}

Partial financial support for the development of Modelica 3.1 by the
following funding agencies has been received:
\begin{itemize}
\item
  The German Ministry BMBF has partially funded ABB, DLR, Fraunhofer and
  Siemens (BMBF Förderkennzeichen: 01IS07022F) within the ITEA2 project
  EUROSYSLIB (\url{https://itea3.org/project/eurosyslib.html}).
\item
  The German Ministry BMBF has partially funded ITI GmbH (BMBF
  Förderkennzeichen: 01IS08002K), and the Swedish funding agency VINNOVA
  has partially funded Dynasim (2008-02291), within the ITEA2 project
  MODELISAR (\url{https://itea3.org/project/modelisar.html}).
\item
  The Swedish funding agency VINNOVA has partially funded Linköping
  University (PELAB) within the project \emph{Safe and Secure Modeling and
  Simulation}.
\item
  The Swedish funding agency VR has partially funded Linköping
  University (PELAB) within the project \emph{High-Level Debugging of
  Equation-Based System Modeling \& Simulation Languages}.
\end{itemize}

\section{Modelica 3.0}\label{modelica-3-0}

Modelica 3.0 was released Sept. 5, 2007. The Modelica 3.0 specification
was edited by Peter Fritzson, Hans Olsson, and Martin Otter.

\subsection{Contributors to the Modelica Language, Version 3.0}\label{contributors-to-the-modelica-language-version-3-0}

The Modelica 3.0 specification was newly structured and written by Peter
Fritzson using text from the previous specification and also adding new
explanatory text. This draft specification was afterwards improved by
members of the Modelica Association.

The concept of \emph{balanced models} (which is the major change of the
language) was developed by Hans Olsson with contributions from Martin
Otter, Hilding Elmqvist, and Sven Erik Mattsson. The original
inspiration was from Mike Tiller.

This goes together with making the type interface and sub-typing cleaner
and stricter (the new \cref{interface-or-type-relationships}). This concept fixes flaws of the
language that have been pointed out by Sébastien Furic.

The graphical annotations have been redesigned and improved by Daniel
Hedberg, Erik Areskog, Dag Brück, and Hilding Elmqvist with
contributions from Peter Aronsson and Gerd Kurzbach.

The following members of the Modelica Association participated at design
meetings and contributed to the Modelica 3.0 specification:

Peter Aronsson, MathCore AB, Linköping, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

John Batteh, Ford Motor Company, Dearborn, MI, U.S.A.

David Broman, Linköping University, Linköping, Sweden

Peter Bunus, Linköping University, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Thomas Doumenc, Dassault Systèmes, Paris, France

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Sebastien Furic, Imagine, Roanne, France

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Daniel Hedberg, MathCore AB, Linköping, Sweden

Carsten Heinrich, Institut für Luft- und Kältetechnik gGmbH, Dresden,
Germany

Olof Johansson, Linköping University, Linköping, Sweden

Christian Kral, arsenal research, Vienna, Austria

Roland Kossel, TLK Thermo GmbH, Braunschweig, Germany

Gerd Kurzbach, ITI GmbH, Dresden, Germany

Christian Kral, arsenal research, Vienna, Austria

Kilian Link, Siemens AB, Erlangen, Germany

José Diaz Lopez, Dynasim AB, Lund, Sweden

Karin Lund, Fachhochschule Ulm, Germany

Håkan Lundvall, Linköping University, Linköping, Sweden

Ludwig Marvan, VA TECH ELIN EBG Elektronik GmbH \& Co, Vienna, Austria

Sven Erik Mattsson, Dynasim, Lund, Sweden

Jakob Mauss, Qtronic GmbH, Berlin, Germany

Chuck Newman, Ford Motor Company, Dearborn, MI, U.S.A.

Kaj Nyström, Linköping University, Linköping, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Markus Plainer, Arsenal Research, Vienna, Austria

Adrian Pop, Linköping University, Linköping, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

Christoph Richter, Technical University of Braunschweig, Braunschweig,
Germany

Anders Sandholm, Linköping University, Linköping, Sweden

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company/Emmeskay, Dearborn, MI, U.S.A

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 3.0}\label{main-changes-in-modelica-3-0}

Modelica 3.0 is a ``clean-up'' version of the Modelica language. For
example, the specification is newly written to define the language in a
better way, errors in the language are fixed, unclear or undefined items
are more precisely described, and mild restrictions are introduced into
the language in order that a Modelica translator can much earlier and
more precisely detect modeling errors. Automated conversion of models to
Modelica 3.0 is possible. Furthermore, a tool can potentially handle
much larger models.

This Modelica version is for the first time (slightly) not backward
compatible to previous versions (all previous versions have been
backward compatible with exception of tiny issues as newly introduced
keywords). As a result, e.g., ``unsafe'' models of previous Modelica
versions are no longer valid. It is expected that Modelica tool vendors
provide (semi-) automatic mechanisms for conversion of models and
libraries.

The following main changes in Modelica 3.0 are \emph{not} backwards compatible:
\begin{itemize}
\item
  Restrictions to connectors (see \cref{restrictions-of-connections-and-connectors}): For each non-partial
  connector class the number of flow variables shall be equal to the
  number of variables that are neither parameter, constant, input,
  output, nor flow. For example, the following connector is illegal in
  Modelica 3:
\begin{lstlisting}[language=modelica]
connector notValid // illegal connector
  Real r1;
  Real r2;
  flow Real r3;
end notValid;
\end{lstlisting}
\item
  In a non-partial \lstinline!model! or \lstinline!block!, all non-connector inputs of \lstinline!model! or \lstinline!block! components must have binding equations.
\item
  A component declared with the \lstinline!inner! or \lstinline!outer! prefix shall not be of a
  class having top-level public connectors containing inputs.
\item
  Modifiers for components shall only contain redeclarations of
  replaceable elements and binding equations for parameters, constants,
  inputs and variables having a default binding equation.
\item
  All non-partial \lstinline!model! and \lstinline!block! classes must be locally balanced (see \cref{balanced-models}).  This means that the local number of unknowns equals the local equation size. Together with other restrictions, this leads to the strong property that a simulation model is always globally balanced (i.e., the number of unknowns is equal to the number of equations).
\item
  Prefixes \lstinline!input!, \lstinline!output!, \lstinline!inner!, \lstinline!outer!,
	\lstinline!flow! are not allowed in a record
\item
  The built-in operators \lstinline!abs! and \lstinline!sign! do no longer
  generate events but are implicitly defined with a \lstinline!noEvent!
  operator.
\item
  The constraining clause of a replaceable class or component is changed
  from keyword \lstinline!extends! to the new keyword \lstinline!constrainedby! (since the
  \lstinline!extends! keyword could lead to the wrong impression that the redeclared
  model must inherit from the constraining class, but this is not the
  case).
\item
  The \lstinline!isPresent! construct, which was not implemented in tools, was removed.
\end{itemize}

The following changes in the Modelica 3.0 graphical annotations are also \emph{not} backwards compatible:
\begin{itemize}
\item
  Changed the definition of icon placement (record Transformation), so
  that the actual coordinates of the icon of a model instance are
  defined in the class where the instance is defined and no longer in
  the class where the icon is defined (this was a flaw in the Modelica
  2.0 graphical annotations).
\item
  Improved the definition of the rotation of a graphical primitive.
\item
  Change \lstinline!fontSize! unit from \lstinline!DrawingUnit! to \lstinline!pt! (since this is the usual
  unit for fonts).
\end{itemize}

The following main changes in Modelica 3.0 are \emph{backwards compatible}:
\begin{itemize}
\item
  New element-wise operators: \lstinline!.+!, \lstinline!.-!, \lstinline!.*!, \lstinline!./!, \lstinline!.^!.
\item
  A third argument \lstinline!AssertionLevel! to built-in function \lstinline!assert(!...\lstinline!)! in
  order that warnings can optionally be defined.
\item
  New annotations \crefnameref{vendor-specific-annotations}:\\
  In this section it is precisely defined how vendor-specific
  annotations should be marked. Any tool shall save files with all
  standard annotations (defined in \cref{annotations}) and all vendor-specific
  annotations intact. The advantage is that a typo in non-vendor
  annotations can now be detected and marked as an error, whereas in
  previous versions this had to be ignored.
\item
  New annotation in \crefnameref{annotations-for-documentation}:\\
  \lstinline!preferredView = info!, \lstinline!diagram! or \lstinline!text!
\item
  New annotations \crefnameref{annotations-for-code-generation}:\\
  \lstinline!Evaluate!, \lstinline!HideResult!, \lstinline!Inline!,
	\lstinline!LateInline!, \lstinline!smoothOrder!
\item
  New annotation \crefnameref{annotations-for-simulation-experiments}:\\
  \lstinline!StartTime!, \lstinline!StopTime!, \lstinline!Tolerance! to define important parameters of an
  experiment setup.
\item
  New annotations for graphical annotations in \cref{annotations-for-graphical-objects}:\\
  New attribute \lstinline!Smooth = enumeration(None, Bezier)! for graphical objects
  and connection lines (Bezier defines a Bezier spline).\\
  New attribute \lstinline!visible! in \lstinline!record Placement! allows making a graphical
  annotation invisible (e.g.\ after inheritance).\\
  New attributes \lstinline!startAngle!, \lstinline!endAngle! in record ellipse to define part
  of an ellipse.\\
  New layer specific annotations \lstinline!IconMap! and \lstinline!DiagramMap! for \lstinline!extends!.\\
  New attribute \lstinline!horizontalAlignment! to the \lstinline!Text! record to define the horizontal alignment of text.
\item
  New annotations for schematic animation and interactive user input in
  \cref{annotations-for-graphical-objects}:\\
  \lstinline!DynamicSelect! to modify annotation literals by the actual values of variables.\\
  \lstinline!OnMouseDownSetBoolean!, \lstinline!OnMouseUpSetBoolean!, \lstinline!OnMouseMoveXSetReal!,
  \lstinline!OnMouseMoveYSetReal!, \lstinline!OnMouseDownEditReal!, \lstinline!OnMouseDownEditString! to
  interactively set the variable of a class during simulation.
\end{itemize}

The following errors have been fixed in the Modelica specification:
\begin{itemize}
\item
  Syntax rule for a function call (e.g., according to the grammar in
  Modelica 2.2 a function call of the form
  \lstinline!Modelica.Math.Matrices.eig($\ldots$)! was invalid because the function name
  could not have `\lstinline!.!'. However, all Modelica tools supported the
  desired ``full Modelica name'' also for function calls).
\end{itemize}

\section{Modelica 2.2}\label{modelica-2-2}

Modelica 2.2 was released February 2, 2005. The Modelica 2.2
specification was edited by Hans Olsson, Michael Tiller and Martin
Otter.

\subsection{Contributors to the Modelica Language, Version 2.2}\label{contributors-to-the-modelica-language-version-2-2}
\indent\indent
Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

John Batteh, Ford Motor Company, Dearborn, MI, U.S.A.

Dag Brück, Dynasim, Lund, Sweden

Francesco Casella, Politecnico di Milano, Milano, Italy

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Jonas Eborn, Modelon AB, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Christian Kral, arsenal research, Vienna, Austria

Sven Erik Mattsson, Dynasim, Lund, Sweden

Chuck Newman, Ford Motor Company, Dearborn, MI, U.S.A.

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Markus Plainer, Arsenal Research, Vienna, Austria

Adrian Pop, Linköping University, Sweden

Katrin Prölß, Technical University Hamburg-Harburg, Germany

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Modelon AB, Lund, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.2}\label{main-changes-in-modelica-2-2}

The main changes in Modelica 2.2 are:
\begin{itemize}
\item
  Conditional component declarations to ignore component declarations
  depending on a parameter expression. Connection equations that
  reference a component that is no longer present, are ignored.
\item
  In redeclarations some parts of the original declaration are
  automatically inherited by the new declaration. This is intended to
  make it easier to write declarations by not having to repeat common
  parts of the declarations, and does in particular apply to attributes
  that must be identical.
\item
  Recursive \lstinline!inner!/\lstinline!outer! definitions to define hierarchically structured
  \lstinline!inner!/\lstinline!outer! declarations that can communicate with each other: An
  element declared with both the prefixes \lstinline!inner! and \lstinline!outer! conceptually
  introduces two declarations with the same name, one that follows the
  rules for \lstinline!inner! and another that follows the rules for \lstinline!outer!.
\item
  A non-input array component declared in a function with a dimension
  size specified by colon(:) and no declaration assignment, can change
  size in the function in a simple and convenient way.
\item
  A new type of connector, called \lstinline!expandable connector! was
  introduced. This connector has less strict requirements about name
  matching of connected connectors and can be used conveniently in
  situations that required replaceable connectors previously. One main
  application area is to construct signal buses of complex systems.
\item
  The derivative operator \lstinline!der(expr)! may have an expression as argument
  and not only a variable name as previously, e.g., \lstinline!der(m*h)! is
  interpreted as \lstinline!der(m)*h + m*der(h)!.
\item
  A function can be defined as partial derivative of another function,
  e.g.:
\item
  ''\lstinline!function Gibbs_T = der(Gibbs,T)!'' is a function that computes the
  partial derivative of function Gibbs with respect to its input
  argument T.
\item
  External functions may have the new attribute \lstinline!"builtin"!, additionally to \lstinline!"C"! or \lstinline!"FORTRAN 77"!.  The \lstinline!"builtin"! specification is only used for functions that are defined to be built-in in the Modelica language.  The external function call mechanism for \lstinline!"builtin"! functions is implementation-defined.
\end{itemize}

The language changes are backward compatible.

\section{Modelica 2.1}\label{modelica-2-1}

Modelica 2.1 was released January 30, 2004. The Modelica 2.1
specification was edited by Hans Olsson and Martin Otter.

\subsection{Contributors to the Modelica Language, Version 2.1}\label{contributors-to-the-modelica-language-version-2-1}
\indent\indent
Mikael Adlers, MathCore, Linköping, Sweden

Peter Aronsson, Linköping University, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld, Germany

Peter Bunus, Linköping University, Sweden

Jonas Eborn, United Technologies Research Center, Hartford, U.S.A.

Hilding Elmqvist, Dynasim, Lund, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg, Germany

Peter Fritzson, Linköping University, Sweden

Anton Haumer, Technical Consulting \& Electrical Engineering,
St.Andrae-Woerdern, Austria

Olof Johansson, Linköping University, Sweden

Karin Lunde, R.O.S.E. Informatik GmbH, Heidenheim, Germany

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Levon Saldamli, Linköping University, Sweden

Christian Schweiger, German Aerospace Center, Oberpfaffenhofen, Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, United Technologies Research Center, Hartford,
U.S.A.

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.1}\label{main-changes-in-modelica-2-1}

The main changes in Modelica 2.1 are:
\begin{itemize}
\item
  Arrays and array indices of Enumerations (needed, e.g., in the
  \lstinline!Electrical.Digital! library currently under development).
\item
  Connections into hierarchical connectors (needed, e.g., for convenient
  implementation of buses).
\item
  Optional output arguments of Modelica functions. The presence of
  actual input and/or output arguments can be inquired with the new
  built-in function \lstinline!isPresent!. The previous built-in function and
  attribute \lstinline!enable! was removed.
\item
  Making the default constraining type more useful by inheriting the
  base constraining type automatically to modifications.
\item
  Enhanced redeclaration as needed, e.g., in the Modelica.Media library
  under development (e.g.\ \lstinline!redeclare model name! or \lstinline!model extends name (<modifications>)!).
\item
  Handling of overdetermined connectors (needed, e.g., for multi-body
  systems and electrical power systems) including the new built-in
  package \lstinline!Connections! with operators \lstinline!Connections.branch!,
  \lstinline!Connections.root!, \lstinline!Connections.potentialRoot!, \lstinline!Connections.isRoot!.
\item
  % The "while-loop" is referred to as a "while-statement" everywhere else.
  Statement \lstinline!break! in the while-loop of an algorithm section.
\item
  Statement \lstinline!return! in a Modelica function.
\item
  Built-in function \lstinline!String! to provide a string representation of
  \lstinline!Boolean!, \lstinline!Integer!, \lstinline!Real! and \lstinline!Enumeration! types.
\item
  Built-in function \lstinline!Integer! to provide the \lstinline!Integer! representation of
  an \lstinline!Enumeration! type.
\item
  Built-in function \lstinline!semiLinear! to define a characteristics with two
  slopes and a set of rules for symbolic transformations, especially
  when the function becomes underdetermined (this function is used in
  the Modelica Fluid library under development to define reversing flow
  in a mathematically clean way).
\item
  More general identifiers by having any character in single quotes,
  e.g.\ \lstinline!'+'! or '123.456\#1' are valid identifiers. \lstinline!'x'! and \lstinline!x! are
  different identifiers. This is useful for a direct mapping of product
  identifiers to model names and for having the usual symbols for
  digital electrical signals as enumerations (such as \lstinline!'+'!, \lstinline!'-'!, \lstinline!'0'!,
  \lstinline!'1'!).
\item
  New annotations:
\begin{itemize}
\item For version handling of libraries and models (\lstinline!version!, \lstinline!uses!,
\lstinline!conversion!),
\item for revision logging (\lstinline!revisions!),
\item for using a Modelica name as link in a HTML documentation text,
\item for convenient \lstinline!inner! declaration in a GUI (\lstinline!defaultComponentName!,
\lstinline!defaultComponentPrefixes!),
\item for parameter menu structuring (\lstinline!Dialog!, \lstinline!enable!, \lstinline!tab!,
\lstinline!group!), and
\item for library specific error messages (\lstinline!missingInnerMessage!,
\lstinline!unassignedMessage!).
\end{itemize}
\end{itemize}
Fixing some minor errors in the grammar and semantic specification.

The language changes are backward compatible, except for the introduction of the new keywords \lstinline!break! and \lstinline!return!, the new built-in package \lstinline!Connections! and the removing of built-in function and attribute \lstinline!enable!.

\section{Modelica 2.0}\label{modelica-2-0}

Modelica 2.0 was released January, 30 2002, and the draft was released
on December 18 in 2001. The Modelica 2.0 specification was edited by
Hans Olsson. Modelica is a registered trademark owned by the Modelica
Association since November 2001.

\subsection{Contributors to the Modelica Language, Version 2.0}\label{contributors-to-the-modelica-language-version-2-0}
\indent\indent
Peter Aronsson, Linköping University, Sweden

Bernhard Bachmann , University of Applied Sciences, Bielefeld

Peter Beater, University of Paderborn, Germany

Dag Brück, Dynasim, Lund, Sweden

Peter Bunus, Linköping University, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Vadim Engelson, Linköping University, Sweden

Peter Fritzson, Linköping University, Sweden

Rüdiger Franke, ABB Corporate Research, Ladenburg

Pavel Grozman, Equa, Stockholm, Sweden

Johan Gunnarsson, MathCore, Linköping

Mats Jirstrand, MathCore, Linköping

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Levon Saldamli, Linköping University, Sweden

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans-Jürg Wiesmann, ABB Switzerland Ltd.,Corporate Research, Baden,
Switzerland

\subsection{Main Changes in Modelica 2.0}\label{main-changes-in-modelica-2-0}

A detailed description of the enhancements introduced by Modelica 2.0 is
given in the papers
\begin{itemize}
\item
  M. Otter, H. Olsson: New Features in Modelica 2.0. 2nd International
  Modelica Conference, March 18-19, DLR Oberpfaffenhofen, Proceedings,
  pp. 7.1--7.12, 2002. This paper can be downloaded from
  \url{https://www.modelica.org/events/Conference2002/papers/p01_Otter.pdf}
\item
  Mattsson S. E., Elmqvist H., Otter M., and Olsson H.: Initialization
  of Hybrid Differential-Algebraic Equations in Modelica 2.0. 2nd
  International Modelica Conference, March 18-19, DLR Oberpfaffenhofen,
  Proceedings, pp. 9--15, 2002. This paper can be downloaded from
  \url{https://www.modelica.org/events/Conference2002/papers/p02_Mattsson.pdf}
\end{itemize}

The main changes in Modelica 2.0 are:
\begin{itemize}
\item
  Full specification of initialization in order to compute consistent
  initial values of all variables appearing in a model before performing
  an operation, such as simulation or linearization.
\item
  Specified the graphical appearance of Modelica object diagrams,
  thereby ensuring portability of model topology information and
  improving the previous informal graphical description, e.g., with
  separate icon and diagram positions.
\item
  Enumeration types to allow the definition of options and properties in
  an understandable, safe and efficient way.
\item
  Support for (optional) explicit preference in state-selection in order
  that a modeler can incorporate application specific knowledge to guide
  the solution process, e.g., for real-time simulation.
\item
  Iterators in array constructors and reduction operators, to support
  more powerful expressions, especially in declarations, in order to
  avoid inconvenient and less efficient local function definitions.
\item
  Support for generic formulation of blocks applicable to both scalar
  and vector connectors, connection of (automatically) vectorized
  blocks, and simpler input/output connectors. This allows significant
  simplifications of the input/output block library of Modelica, e.g.,
  since only scalar versions of all blocks have to be provided.
  Furthermore, new library components can be incorporated more easily.
\item
  Record constructor to allow, e.g., the construction of data sheet
  libraries.
\item
  Functions with mixed positional and named arguments. Optional results
  and default arguments make the same function fit for beginners and
  expert users.
\item
  Additional utilities for external C functions that are interfaced to
  Modelica models, especially supporting external functions returning
  strings and external functions with internal memory (e.g., to
  interface user-defined tables, property databases, sparse matrix
  handling, hardware interfaces).
\item
  Added an index, and specification of some basic constructs that had
  previously not formally be defined, such as while-clauses, if-clauses.
\end{itemize}

The language changes are backward compatible, except for the
introduction of the new keyword enumeration and the removal of the
operator analysisType(). The library change of the block library which
will become available soon requires changes in user-models.

\section{Modelica 1.4}\label{modelica-1-4}

Modelica 1.4 was released December 15, 2000. The Modelica Association
was formed in Feb. 5, 2000 and is now responsible for the design of the
Modelica language. The Modelica 1.4 specification was edited by Hans
Olsson and Dag Brück.

\subsection{Contributors to the Modelica Language, Version 1.4}\label{contributors-to-the-modelica-language-version-1-4}
\indent\indent
Bernhard Bachmann, Fachhochschule Bielefeld, Germany

Peter Bunus, MathCore, Linköping, Sweden

Dag Brück, Dynasim, Lund, Sweden

Hilding Elmqvist, Dynasim, Lund, Sweden

Vadim Engelson, Linköping University, Sweden

Jorge Ferreira, University of Aveiro, Portugal

Peter Fritzson, Linköping University, Linköping, Sweden

Pavel Grozman, Equa, Stockholm, Sweden

Johan Gunnarsson, MathCore, Linköping, Sweden

Mats Jirstrand, MathCore, Linköping, Sweden

Clemens Klein-Robbenhaar, Germany

Pontus Lidman, MathCore, Linköping, Sweden

Sven Erik Mattsson, Dynasim, Lund, Sweden

Hans Olsson, Dynasim, Lund, Sweden

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

Tommy Persson, Linköping University, Sweden

Levon Saldamli, Linköping University, Sweden

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans-Jürg Wiesmann, ABB Corporate Research Ltd., Baden, Switzerland

\subsection{Contributors to the Modelica Standard Library}\label{contributors-to-the-modelica-standard-library}
% https://tex.stackexchange.com/questions/31555/how-can-i-indent-the-paragraphs-which-follow-a-heading
\indent\indent
Peter Beater, University of Paderborn, Germany

Christoph Clauß, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Martin Otter, German Aerospace Center, Oberpfaffenhofen, Germany

André Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Hubertus Tummescheit, Lund Institute of Technology, Sweden

\subsection{Main Changes in Modelica 1.4}\label{main-changes-in-modelica-1-4}

\begin{itemize}
\item
  Removed declare-before-use rule. This simplifies graphical user
  environments, because there exists no order of declarations when
  components are graphically composed together.
\item
  Refined package concept by introducing encapsulated classes and import
  mechanism. Encapsulated classes can be seen as ``self-contained units'':
  When copying or moving an encapsulated class, at most the import
  statements in this class have to be changed.
\item
  Refined when-clause: The \lstinline!nondiscrete! keyword is removed, equations in when-clauses must have a unique variable name on left hand side variable and the exact mapping of when-clauses to equations is defined.  As a result, when-clauses are now precisely defined without referring to a sorting algorithm and it is possible to handle algebraic loops between when-clauses with different conditions and between when-clauses and the continuous-time part of a model.  The \lstinline!discrete! keyword is now optional, simplifying the library development because only one type of connector is needed and not several types which do contain or do not contain the discrete prefix on variables.  Additionally, when-clauses in algorithm sections may have elsewhen-clauses which simplifies the definition of priorities between when-clauses.
\item
  For replaceable declarations: allowed constraining clauses, and
  annotations listing suitable redeclarations. This allows a graphical
  user environment to automatically build menus with meaningful choices.
\item
  Functions can specify their derivative. This allows, e.g., the
  application of the Pantelides algorithm to reduce the index of a DAE
  also for external functions.
\item
  New built-in operator \lstinline!rem! (remainder) and the built-in operators
  div, mod, ceil, floor, integer, previously only allowed to be used in
  when-clauses can now be used everywhere, because state events are
  automatically generated when the result value of one of these operator
  changes discontinuously.
\item
  Quantity attribute also for base types Boolean, Integer, String (and
  not only for Real), in order to allow abstracted variables to refer to
  physical quantities (e.g.\ \lstinline!Boolean i(quantity="Current")! is true if
  current is flowing and is false if no current is flowing).
\item
  \lstinline!final! keyword also allowed in declaration, to prevent modification.
  Example:
\end{itemize}

\begin{lstlisting}[language=modelica]
model A
  Real x[:];
  final Integer n=size(x,1);
end A;
\end{lstlisting}

\begin{itemize}
\item
  Several minor enhancements, such as usage of dot-notation in
  modifications\\
  (e.g.: \lstinline!A x(B.C=1, B.D=2)! is the same as \lstinline!A x(B(C=1, D=2))!).
\item
  Internally restructured specification.
\end{itemize}

Modelica 1.4 is backwards compatible with Modelica 1.3, with the exception of (1) some exotic cases where different results are achieved with the removed ``declare-before-use-rule'' and the previous declaration order, (2) when-clauses in equations sections, which use the general form \lstinline!expr1 = expr2! (now only \lstinline!v = expr! is allowed + some special cases for functions), (3) some exotic cases where a when-clause may be no longer evaluated at the initial time, because the initialization of the when-condition is now defined in a more meaningful way (before Modelica 1.4, every condition in a when-clause has a ``previous'' value of false), and (4) models containing the \lstinline!nondiscrete! keyword which was removed.

\section{Modelica 1.3 and Older Versions.}\label{modelica-1-3-and-older-versions}

Modelica 1.3 was released December 15, 1999.

\subsection{Contributors up to Modelica 1.3}\label{contributors-up-to-modelica-1-3}
The following list contributors and their affiliations at the time when
Modelica 1.3 was released.

Hilding Elmqvist, Dynasim AB, Lund, Sweden

Bernhard Bachmann, ABB Corporate Research Center Heidelberg

Francois Boudaud, Gaz de France, Paris, France

Jan Broenink, University of Twente, Enschede, Netherlands

Dag Brück, Dynasim AB, Lund, Sweden

Thilo Ernst, GMD FIRST, Berlin, Germany

Ruediger Franke, ABB Network Partner Ltd. Baden, Switzerland

Peter Fritzson, Linköping University, Sweden

Alexandre Jeandel, Gaz de France, Paris, France

Pavel Grozman, Bris Data AB, Stockholm, Sweden

Kaj Juslin, VTT, Espoo, Finland

David Kågedal, Linköping University, Sweden

Mattias Klose, Technical University of Berlin, Germany

Nathalie Loubere, Gaz de France, Paris, France

Sven-Erik Mattsson, Dynasim AB, Lund, Sweden

Peter J. Mosterman, DLR Oberpfaffenhofen, Germany

Henrik Nilsson, Linköping University, Sweden

Hans Olsson, , Dynasim AB, Lund, Sweden

Martin Otter, DLR Oberpfaffenhofen, Germany

Per Sahlin, Bris Data AB, Stockholm, Sweden

Andrée Schneider, Fraunhofer Institute for Integrated Circuits, Dresden,
Germany

Michael Tiller, Ford Motor Company, Dearborn, MI, U.S.A.

Hubertus Tummescheit, Lund Institute of Technology, Sweden

Hans Vangheluwe, University of Gent, Belgium

\subsection{Main Changes in Modelica 1.3}\label{main-changes-in-modelica-1-3}

Modelica 1.3 was released December 15, 1999.
\begin{itemize}
\item
  Defined connection semantics for \lstinline!inner!/\lstinline!outer! connectors.
\item
  Defined semantics for protected element.
\item
  Defined that least variable variability prefix wins.
\item
  Improved semantic definition of array expressions.
\item
  Defined scope of for-loop variables.
\end{itemize}

\subsection{Main Changes in Modelica 1.2}\label{main-changes-in-modelica-1-2}

Modelica 1.2 was released June 15, 1999.
\begin{itemize}
\item
  Changed the external function interface to give greater flexibility.
\item
  Introduced \lstinline!inner!/\lstinline!outer! for dynamic types.
\item
  Redefined \lstinline!final! keyword to only restrict further
  modification.
\item
  Restricted redeclaration to replaceable elements.
\item
  Defined semantics for if-clauses.
\item
  Defined allowed code optimizations.
\item
  Refined the semantics of event-handling.
\item
  Introduced \lstinline!fixed! and \lstinline!nominal! attributes.
\item
  Introduced \lstinline!terminate! and \lstinline!analysisType!.
\end{itemize}

\subsection{Main Changes in Modelica 1.1}\label{main-changes-in-modelica-1-1}
Modelica 1.1 was released in December 1998.

Major changes:
\begin{itemize}
\item
  Specification as a separate document from the rationale.
\item
  Introduced prefixes \lstinline!discrete! and \lstinline!nondiscrete!.
\item
  Introduced \lstinline!pre! and \lstinline!when!.
\item
  Defined semantics for array expressions.
\item
  Introduced built-in functions and operators (only connect was present in Modelica 1.0).
\end{itemize}

\subsection{Modelica 1.0}\label{modelica-1-0}

Modelica 1, the first version of Modelica, was released in September
1997, and had the language specification as a short appendix to the
rationale.
